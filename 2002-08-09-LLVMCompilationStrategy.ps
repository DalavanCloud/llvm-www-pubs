%!PS-Adobe-2.0
%%Creator: dvips(k) 5.78 Copyright 1998 Radical Eye Software (www.radicaleye.com)
%%Title: paper.dvi
%%Pages: 20
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Italic Courier Times-Bold
%%+ Courier-Oblique Symbol
%%EndComments
%DVIPSCommandLine: dvips -o paper.ps paper.dvi
%DVIPSParameters: dpi=1200
%DVIPSSource:  TeX output 2003.04.01:0917
%%BeginProcSet: tex.pro
%!
/TeXDict 300 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 2 string 0 1 255{IE S dup 360 add 36 4 index cvrs cvn
put}for pop 65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N
/RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley
X /rulex X V}B /V{}B /RV statusdict begin /product where{pop false[
(Display)(NeXT)(LaserWriter 16/600)]{dup length product length le{dup
length product exch 0 exch getinterval eq{pop true exit}if}{pop}ifelse}
forall}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont cvx]cvx def}def /ObliqueSlant
{dup sin S cos div neg}B /SlantFont{4 index mul add}def /ExtendFont{3 -1
roll mul exch}def /ReEncodeFont{/Encoding exch def}def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 1200 1200 (paper.dvi)
@start /Fa 171[65 6[97 77[{ TeXBase1Encoding ReEncodeFont }2
116.231 /Times-Italic rf /Fc 134[66 2[66 75 42 58 58
75 75 75 75 108 42 66 42 42 75 75 42 66 75 66 75 75 50
8[124 2[83 75 2[91 108 100 124 83 1[66 50 1[108 2[108
100 1[91 8[75 1[75 75 2[75 1[75 42 37 50 37 2[50 50 50
39[{ TeXBase1Encoding ReEncodeFont }50 149.44 /Times-Italic
rf /Fd 144[66 66 8[59 101[{ TeXBase1Encoding ReEncodeFont }3
132.835 /Times-Italic rf /Fe 133[74 5[55 65 74 1[92 83
92 138 46 92 1[46 92 83 1[74 92 74 92 83 12[111 4[129
1[157 111 4[129 3[120 1[120 6[55 3[83 83 1[83 83 83 2[42
55 42[92 2[{ TeXBase1Encoding ReEncodeFont }34 166.044
/Times-Bold rf /Ff 141[80 2[80 1[80 80 5[80 80 1[80 1[80
97[{ TeXBase1Encoding ReEncodeFont }8 132.835 /Courier
rf /Fg 139[73 13[87 102[{}2 166.044 /Symbol rf /Fh 130[90
1[90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90 90
90 90 90 90 90 90 90 90 90 90 3[90 1[90 90 90 90 1[90
90 90 90 90 90 90 90 90 90 90 1[90 90 90 90 90 90 90
90 90 90 2[90 90 1[90 90 90 90 90 90 90 90 90 90 90 90
90 90 90 90 90 90 90 90 90 90 90 2[90 90 33[{
 TeXBase1Encoding ReEncodeFont }81 149.44 /Courier rf
/Fi 156[100 99[{ TeXBase1Encoding ReEncodeFont }1 166.044
/Courier-Oblique rf /Fj 107[59 59 24[59 66 66 96 66 66
37 52 44 66 66 66 66 103 37 66 37 37 66 66 44 59 66 59
66 59 3[44 1[44 3[125 96 1[81 74 4[96 118 81 1[52 44
2[74 81 1[89 1[96 6[37 66 2[66 66 2[66 66 66 1[33 44
33 75 1[44 44 44 36[74 2[{ TeXBase1Encoding ReEncodeFont }58
132.835 /Times-Roman rf /Fk 200[50 50 50 50 50 50 50
49[{ TeXBase1Encoding ReEncodeFont }7 99.6264 /Times-Roman
rf /Fl 133[88 100 100 144 100 111 66 78 88 1[111 100
111 166 55 111 1[55 111 100 66 88 111 88 111 100 10[144
1[133 111 144 1[122 155 144 188 133 2[78 1[155 122 133
144 144 1[144 6[66 100 100 100 100 100 100 100 100 100
1[55 50 66 41[111 111 2[{ TeXBase1Encoding ReEncodeFont }55
199.253 /Times-Bold rf /Fm 200[61 61 61 61 61 61 61 49[{
 TeXBase1Encoding ReEncodeFont }7 122.872 /Times-Roman
rf /Fn 133[100 100 100 1[100 100 100 100 100 100 100
100 100 100 100 100 100 100 100 100 100 100 100 100 100
100 3[100 1[100 10[100 1[100 1[100 6[100 100 100 4[100
100 100 4[100 1[100 100 1[100 100 100 1[100 100 100 100
100 100 100 1[100 100 37[{ TeXBase1Encoding ReEncodeFont }51
166.044 /Courier rf
%DVIPSBitmapFont: Fo cmsy10 10 1
/Fo 1 16 df<0000003FFC000000000003FFFFC0000000000FFFFFF0000000003FFFFFFC
00000000FFFFFFFF00000003FFFFFFFFC000000FFFFFFFFFF000001FFFFFFFFFF800003F
FFFFFFFFFC00007FFFFFFFFFFE0000FFFFFFFFFFFF0001FFFFFFFFFFFF8001FFFFFFFFFF
FF8003FFFFFFFFFFFFC007FFFFFFFFFFFFE007FFFFFFFFFFFFE00FFFFFFFFFFFFFF00FFF
FFFFFFFFFFF01FFFFFFFFFFFFFF81FFFFFFFFFFFFFF83FFFFFFFFFFFFFFC3FFFFFFFFFFF
FFFC7FFFFFFFFFFFFFFE7FFFFFFFFFFFFFFE7FFFFFFFFFFFFFFE7FFFFFFFFFFFFFFEFFFF
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFFFFFF
FFFE7FFFFFFFFFFFFFFE7FFFFFFFFFFFFFFE7FFFFFFFFFFFFFFE3FFFFFFFFFFFFFFC3FFF
FFFFFFFFFFFC1FFFFFFFFFFFFFF81FFFFFFFFFFFFFF80FFFFFFFFFFFFFF00FFFFFFFFFFF
FFF007FFFFFFFFFFFFE007FFFFFFFFFFFFE003FFFFFFFFFFFFC001FFFFFFFFFFFF8001FF
FFFFFFFFFF8000FFFFFFFFFFFF00007FFFFFFFFFFE00003FFFFFFFFFFC00001FFFFFFFFF
F800000FFFFFFFFFF0000003FFFFFFFFC0000000FFFFFFFF000000003FFFFFFC00000000
0FFFFFF00000000003FFFFC000000000003FFC000000404177C953>15
D E
%EndDVIPSBitmapFont
/Fp 134[74 1[111 74 83 46 65 65 1[83 83 83 120 46 74
46 46 83 83 46 74 83 74 83 83 23[55 27[55 41[83 83 2[{
 TeXBase1Encoding ReEncodeFont }27 166.044 /Times-Italic
rf /Fq 105[83 1[74 74 24[74 83 83 120 83 83 46 65 55
83 83 83 83 129 46 83 46 46 83 83 55 74 83 74 83 74 3[55
1[55 3[157 120 120 101 92 111 1[92 120 120 148 101 1[65
55 120 120 92 101 120 111 111 120 5[46 46 83 83 83 83
83 83 83 83 83 83 46 42 55 42 94 83 55 55 55 35[92 92
2[{ TeXBase1Encoding ReEncodeFont }75 166.044 /Times-Roman
rf /Fr 138[133 80 93 106 1[133 120 133 199 66 2[66 133
1[80 106 133 106 1[120 10[173 1[159 133 173 4[226 159
2[93 5[173 1[173 10[120 120 120 120 120 120 49[{
 TeXBase1Encoding ReEncodeFont }31 239.103 /Times-Bold
rf /Fs 75[50 29[75 27[66 75 75 108 75 75 42 58 50 75
75 75 75 116 42 75 42 42 75 75 50 66 75 66 75 66 3[50
1[50 1[108 108 141 108 108 91 83 100 1[83 108 108 133
91 108 58 50 108 108 83 91 108 100 100 108 6[42 75 75
75 75 75 75 75 75 75 75 42 37 50 37 2[50 50 50 36[83
2[{ TeXBase1Encoding ReEncodeFont }73 149.44 /Times-Roman
rf /Ft 139[50 58 66 14[66 83 75 31[108 65[{
 TeXBase1Encoding ReEncodeFont }7 149.44 /Times-Bold
rf /Fu 137[120 120 120 120 120 1[120 120 120 120 120
2[120 1[120 1[120 120 120 1[120 32[120 17[120 1[120 44[{
 TeXBase1Encoding ReEncodeFont }19 199.253 /Courier rf
%DVIPSBitmapFont: Fv cmsy10 12 2
/Fv 2 104 df[<000000000000000FFC00000000000003FFFE0000000000003FFFFE0000
00000001FFFFFE000000000007FFFFFC00000000001FFFFF0000000000007FFFF0000000
000000FFFF80000000000003FFFE00000000000007FFF80000000000000FFFE000000000
00001FFFC00000000000003FFF800000000000007FFF000000000000007FFE0000000000
0000FFFC00000000000001FFFC00000000000001FFF800000000000003FFF80000000000
0003FFF000000000000003FFF000000000000007FFF000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
000FFFE00000000000000FFFC00000000000000FFFC00000000000001FFFC00000000000
001FFF800000000000003FFF800000000000003FFF000000000000007FFF000000000000
00FFFE00000000000000FFFC00000000000001FFF800000000000007FFF0000000000000
0FFFE00000000000003FFFC00000000000007FFF80000000000003FFFE0000000000000F
FFF8000000000001FFFFF000000000007FFFFF800000000000FFFFFE000000000000FFFF
E0000000000000FFFFFE0000000000007FFFFF80000000000001FFFFF00000000000000F
FFF800000000000003FFFE000000000000007FFF800000000000003FFFC0000000000000
0FFFE000000000000007FFF000000000000001FFF800000000000000FFFC000000000000
00FFFE000000000000007FFF000000000000003FFF000000000000003FFF800000000000
001FFF800000000000001FFFC00000000000000FFFC00000000000000FFFC00000000000
000FFFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFE000000000000007FFE00000000000
0007FFE000000000000007FFE000000000000007FFF000000000000003FFF00000000000
0003FFF000000000000003FFF800000000000001FFF800000000000001FFFC0000000000
0000FFFC000000000000007FFE000000000000007FFF000000000000003FFF8000000000
00001FFFC00000000000000FFFE000000000000007FFF800000000000003FFFE00000000
000000FFFF800000000000007FFFF00000000000001FFFFF00000000000007FFFFFC0000
00000001FFFFFE0000000000003FFFFE00000000000003FFFE000000000000000FFC>71
199 114 276 100 102 D[<7FF000000000000000FFFFC0000000000000FFFFF8000000
000000FFFFFF0000000000007FFFFFE0000000000000FFFFF80000000000000FFFFE0000
0000000001FFFF000000000000007FFFC00000000000001FFFE00000000000000FFFF000
000000000003FFF800000000000001FFFC00000000000000FFFE000000000000007FFE00
0000000000003FFF000000000000003FFF800000000000001FFF800000000000001FFFC0
0000000000000FFFC00000000000000FFFC00000000000000FFFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFF000000000000003FFF000000000000003FFF000000000000003FFF8
00000000000001FFF800000000000001FFFC00000000000000FFFC00000000000000FFFE
000000000000007FFE000000000000003FFF000000000000001FFF800000000000000FFF
C000000000000007FFF000000000000003FFF800000000000001FFFE000000000000007F
FF800000000000003FFFF00000000000000FFFFF00000000000003FFFFFC000000000000
7FFFFE0000000000000FFFFE0000000000007FFFFE000000000003FFFFFC00000000000F
FFFF0000000000003FFFF00000000000007FFF80000000000001FFFE00000000000003FF
F800000000000007FFF00000000000000FFFC00000000000001FFF800000000000003FFF
000000000000007FFE00000000000000FFFE00000000000000FFFC00000000000001FFFC
00000000000001FFF800000000000003FFF800000000000003FFF000000000000003FFF0
00000000000007FFF000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE000000000000007FFE000000000000007FFE0
00000000000007FFE000000000000007FFE00000000000000FFFE00000000000000FFFC0
0000000000000FFFC00000000000001FFFC00000000000001FFF800000000000003FFF80
0000000000003FFF000000000000007FFE00000000000000FFFE00000000000001FFFC00
000000000003FFF80000000000000FFFF00000000000001FFFE00000000000007FFFC000
0000000001FFFF0000000000000FFFFE000000000000FFFFF800000000007FFFFFE00000
000000FFFFFF000000000000FFFFF8000000000000FFFFC00000000000007FF000000000
000000>71 199 114 276 100 I E
%EndDVIPSBitmapFont
/Fw 138[100 55 1[78 1[100 100 100 144 55 2[55 100 2[88
1[88 1[100 11[144 111 100 122 8[66 4[144 133 9[100 6[100
1[100 2[66 9[100 35[{ TeXBase1Encoding ReEncodeFont }25
199.253 /Times-Italic rf /Fx 134[100 2[100 1[55 78 66
1[100 100 100 155 55 100 1[55 100 100 66 88 100 1[100
88 10[144 144 8[122 2[66 5[133 1[144 19[66 45[{
 TeXBase1Encoding ReEncodeFont }26 199.253 /Times-Roman
rf /Fy 134[143 3[143 80 112 96 1[143 143 143 223 80 2[80
143 143 1[127 143 127 1[127 10[207 1[175 160 5[255 175
2[96 5[191 67[{ TeXBase1Encoding ReEncodeFont }24 286.924
/Times-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 1200dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 864 900 a Fy(The)73 b(LL)-29 b(VM)73 b(Instruction)f(Set)f(and)
i(Compilation)h(Strate)l(gy)2484 1405 y Fx(Chris)50 b(Lattner)701
b(V)-12 b(ikram)50 b(Adv)m(e)903 1660 y Fw(Computer)f(Science)i
(Department)f(T)-18 b(ec)m(hnical)50 b(Report)f(#UIUCDCS-R-2002-2292)
2161 1916 y Fx(Uni)-5 b(v)m(ersity)50 b(of)g(Illinois)g(at)h
(Urbana-Champaign)2306 2172 y Fv(f)p Fu(lattner,vadve)p
Fv(g)p Fu(@cs.uiu)o(c.)o(ed)o(u)3622 2680 y Ft(Abstract)639
2943 y Fs(This)43 b(document)e(introduces)h(the)g(LL)-15
b(VM)43 b(compiler)f(infrastructure)e(and)j(instruction)c(set,)45
b(a)e(simple)f(approach)g(that)g(enables)415 3144 y(sophisticated)f
(code)h(transformations)e(at)i(link)e(time,)k(runtime,)e(and)g(in)f
(the)h(\002eld.)60 b(It)42 b(is)f(a)i(pragmatic)e(approach)h(to)g
(compilation,)415 3345 y(interfering)30 b(with)g(programmers)i(and)g
(tools)e(as)j(little)d(as)i(possible,)g(while)f(still)g(retaining)f(e)n
(xtensi)l(v)n(e)h(high-le)l(v)n(el)f(information)f(from)415
3546 y(source-le)l(v)n(el)37 b(compilers)h(for)f(later)h(stages)g(of)g
(an)g(application')-8 b(s)36 b(lifetime.)47 b(W)-12 b(e)39
b(describe)f(the)g(LL)-15 b(VM)38 b(instruction)d(set,)k(the)f(design)
415 3746 y(of)f(the)g(LL)-15 b(VM)38 b(system,)g(and)f(some)h(of)e(its)
h(k)o(e)n(y)f(components.)0 4331 y Fr(1)239 b(Intr)l(oduction)0
4722 y Fq(Modern)43 b(programming)h(languages)f(and)g(softw)n(are)g
(practices)f(aim)i(to)f(support)h(more)f(reliable,)g(\003e)n(xible,)g
(and)g(po)l(werful)h(softw)n(are)0 4942 y(applications,)51
b(increase)e(programmer)i(producti)l(vity)-11 b(,)52
b(and)e(pro)n(vide)g(higher)g(le)l(v)n(el)f(semantic)g(information)i
(to)f(the)g(compiler)-9 b(.)77 b(Un-)0 5161 y(fortunately)-11
b(,)57 b(traditional)d(approaches)e(to)h(compilation)h(either)g(f)n
(ail)g(to)f(e)n(xtract)g(suf)l(\002cient)g(performance)g(from)h(the)g
(program)g(\(by)0 5380 y(not)38 b(using)f(interprocedural)h(analysis)f
(or)g(pro\002le)h(information\))h(or)f(interfere)g(with)g(the)f(b)m
(uild)h(process)e(substantially)h(\(by)h(requiring)0
5599 y(b)m(uild)56 b(scripts)g(to)h(be)f(modi\002ed)h(for)f(either)h
(pro\002ling)g(or)g(interprocedural)f(optimization\).)97
b(Furthermore,)60 b(the)n(y)c(do)g(not)h(support)0 5818
y(optimization)49 b(either)f(at)g(runtime)h(or)f(after)g(an)g
(application)g(has)g(been)f(installed)h(at)g(an)g(end-user')-9
b(s)48 b(site,)h(when)e(the)h(most)g(rele)l(v)l(ant)0
6038 y(information)j(about)e Fp(actual)g Fq(usage)g(patterns)g(w)n
(ould)h(be)f(a)m(v)l(ailable.)74 b(The)50 b(LL)-17 b(VM)50
b(Compilation)g(Strate)n(gy)f(is)g(designed)g(to)h(enable)0
6257 y(ef)l(fecti)l(v)n(e)45 b Fp(multi-sta)n(g)n(e)i
Fq(optimization)f(\(at)g(compile-time,)h(link-time,)h(runtime,)f(and)e
(of)l(\003ine\))i(and)f(more)g(ef)l(fecti)l(v)n(e)f(pro\002le-dri)l(v)n
(en)0 6476 y(optimization,)d(and)f(to)g(do)h(so)f(without)h(changes)e
(to)i(the)g(traditional)g(b)m(uild)f(process)g(or)h(programmer)g
(interv)n(ention.)249 6695 y(LL)-17 b(VM)59 b(\(Lo)l(w)f(Le)l(v)n(el)f
(V)-10 b(irtual)58 b(Machine\))f(is)h(a)f(compilation)h(strate)n(gy)f
(that)h(uses)f(a)g(lo)l(w-le)l(v)n(el)g(virtual)h(instruction)h(set)e
(with)0 6914 y(rich)41 b(type)g(information)h(as)e(a)h(common)g(code)g
(representation)f(for)i(all)f(phases)f(of)h(compilation.)51
b(This)41 b(representation)g(allo)l(ws)f(us)h(to)0 7133
y(preserv)n(e)46 b(the)g(traditional)h(\223compile-link-e)n(x)n
(ecute\224)f(model)g(of)h(compilation)g(\(allo)l(wing)g(b)m(uild)g
(scripts)f(to)h(be)g(used)f(unmodi\002ed\),)0 7353 y(supports)e
(interprocedural)g(optimization)h(at)f(link-time,)i(run-time,)f(and)f
(as)f(an)h(of)l(\003ine)h(process,)e(and)h(allo)l(ws)g(for)g(pro\002le)
h(directed)0 7572 y(optimization)d(to)g(occur)f(in)h(the)f(\002eld)h
(\(allo)l(wing)g(the)f(application)g(to)h(be)f(customized)g(to)h(the)f
(end-user')-9 b(s)41 b(usage)g(pattern\).)249 7791 y(There)f(are)g(a)f
(number)h(of)h(weaknesses)c(in)j(the)g(current)g(approaches)f(to)h
(compilation)g(that)g(we)f(are)h(trying)g(to)g(address.)50
b(Some)40 b(of)0 8010 y(the)h(most)h(prominant)g(approaches)e(to)i
(interprocedural)g(optimization,)f(pro\002ling,)h(and)g(whole)f(system)
g(optimization)h(are:)249 8366 y Fo(\017)83 b Fq(Perform)54
b(interprocedural)g(optimization)g(at)f(the)g(source)g(le)l(v)n(el.)85
b(The)54 b(primary)g(dra)n(wback)e(of)h(this)h(approach)e(is)h(the)h
(need)415 8585 y(for)62 b(whole-program)g(analysis)e(phase)g(at)h
(compile)g(time,)66 b(which)61 b(disrupts)g(the)g(\223compile-link-e)n
(x)n(ecute\224)f(b)m(uild)h(process)415 8804 y(\(requiring)43
b(signi\002cant)e(changes)f(to)i(b)m(uild)g(scripts\),)e(and)i(also)f
(substantially)g(complicates)f(compiler)i(de)l(v)n(elopment.)249
9145 y Fo(\017)83 b Fq(Perform)43 b(interprocedural)f(optimization)g
(at)g(link)g(time,)g(using)f(the)h(compiler)g(internal)g
(representation)f(\(IR\))h(e)n(xported)g(dur)m(-)415
9364 y(ing)48 b(static)f(compilation)h([13,)f(3,)g(11],)i(or)f(using)f
(special)g(annotations)g(added)g(to)g(object)h(\002les)f([29].)70
b(The)47 b(main)h(dif)l(\002culties)415 9583 y(with)56
b(this)f(approach)h(is)f(that)h(this)f(e)n(xtra)g(information)i(is)e
(proprietary)i(and)e(ad-hoc,)j(making)e(them)g(dif)l(\002cult)g(to)g
(use)f(with)415 9802 y(third-party)45 b(compilers.)57
b(Additionally)-11 b(,)44 b(runtime)h(optimization)f(using)f(an)h(e)n
(xported)f(compiler)h(IR)f(tends)g(to)h(be)g(unfeasible)415
10021 y(because)c(of)i(the)f(lar)m(ge)h(size)f(of)g(most)h(static)f
(intermediate)g(representations.)249 10362 y Fo(\017)83
b Fq(Perform)38 b(interprocedural)e(optimization)h(on)f(machine)g(code)
g(in)g(an)g(\223optimizing)h(link)n(er\224)g([5,)f(12,)g(17,)g(23,)f
(26)q(,)g(10,)h(25].)50 b(This)415 10581 y(approach)38
b(is)g(transparent)g(to)g(the)g(end)g(user)-7 b(,)38
b(b)m(ut)h(is)e(limited)i(by)f(the)h(lack)e(of)i(information)g(pro)n
(vided)f(by)g(machine)g(code.)49 b(Ma-)415 10800 y(chine)36
b(code)g(is)g(a)f(dif)l(\002cult)i(medium)g(for)g(performing)g
(aggressi)l(v)n(e)d(interprocedural)j(optimizations,)g(because)d(the)i
(high-le)l(v)n(el)3858 11160 y(1)p eop
%%Page: 2 2
2 1 bop 415 166 a Fq(structure)50 b(of)f(the)h(code)f(is)g(obfuscated)g
(by)g(lo)l(w-le)l(v)n(el)g(details)g(of)h(the)f(machine.)75
b(Because)47 b(of)j(this)g(limitation,)h(optimizing)415
385 y(link)n(ers)40 b(typically)h(are)f(limited)g(to)g(lo)l(w-le)l(v)n
(el)g(optimizations)g(such)g(as)f(pro\002le-dri)l(v)n(en)h(code)g
(layout,)g(interprocedural)g(re)n(gis-)415 604 y(ter)i(allocation,)f
(constant)g(propag)o(ation,)g(and)g(dead)g(code)g(elimination.)249
956 y Fo(\017)83 b Fq(Pro\002le)61 b(information)h(is)e(traditionally)h
(collected)e(by)i(creating)f(a)g(special)f(\223pro\002le)i(enabled\224)
e(b)m(uild)i(of)f(the)h(application,)415 1176 y(running)45
b(it)g(with)g(representati)l(v)n(e)e(input,)i(and)g(feeding)f(the)g
(data)h(generated)f(back)g(into)h(another)f(b)m(uild)h(c)n(ycle.)59
b(The)44 b(primary)415 1395 y(problems)h(with)h(this)f(approach)f(are)h
(that)g(it)h(requires)f(e)n(xtra)f(w)n(ork)i(for)g(the)f(de)l(v)n
(elopers)f(to)h(use)g(\(which)g(reduces)f(the)h(lik)n(ely-)415
1614 y(hood)h(that)h(pro\002le)f(directed)g(compilation)h(will)f(be)g
(used\),)h(and)f(that)g(getting)g(a)g(representati)l(v)n(e)f(input)h
(sample)g(can)g(be)f(v)n(ery)415 1833 y(dif)l(\002cult)d(for)g(some)f
(classes)f(of)i(application.)249 2185 y Fo(\017)83 b
Fq(T)-6 b(raditionally)-11 b(,)40 b(once)d(the)g(application)h(has)f
(been)g(link)n(ed,)h(the)g(e)n(x)n(ecutable)e(remains)h(frozen)h
(throughout)g(its)g(lifetime.)50 b(While)415 2404 y(speculati)l(v)n(e,)
36 b(we)h(belie)l(v)n(e)f(there)h(may)g(be)g(use)f(for)i
Fp(runtime)e Fq(and)h Fp(of)m(\003ine)g Fq(optimization,)h(which)f(are)
g(not)g(a)m(v)l(ailable)f(in)i(e)n(xisting)415 2624 y(systems.)125
b(Program)67 b(transformation)g(e)n(xtremely)f(late)g(in)h(the)f
(lifetime)h(of)g(the)f(application)g(is)g(neccesary)f(to)i(adapt)f(to)
415 2843 y(changing)39 b(usage)f(patterns)h(of)h(the)f(end-user)g(and)g
(to)h(adapt)f(to)g(hardw)n(are)g(changes)g(that)g(may)g(occur)g(\(allo)
l(wing)h(retuning)f(for)415 3062 y(a)i(ne)l(w)g(CPU,)g(for)h(e)n
(xample\).)249 3447 y(In)65 b(contrast,)k(LL)-17 b(VM)66
b(enables)d(no)n(v)n(el)g(interprocedural)i(transformations)g(at)f
(link)h(time,)70 b(runtime,)h(and)64 b(e)l(v)n(en)f(in)i(the)f
(\002eld.)0 3666 y(It)57 b(\002ts)g(the)f(standard)h
(\223compile-link-e)n(x)n(ecute\224)e(b)m(uild)i(model,)j(w)n(orking)d
(as)f(a)g(drop-in)i(replacement)e(for)h(an)g(e)n(xisting)f(compiler)0
3885 y(in)e(b)m(uild)g(scripts,)i(easing)d(deplo)n(yment)h(of)g(ne)l(w)
f(optimizers.)88 b(LL)-17 b(VM)55 b(can)e(g)o(ather)h(pro\002ling)h
(information)f(transparently)g(to)g(the)0 4105 y(programmer)-7
b(,)42 b Fp(without)g Fq(requiring)g(a)f(special)g(pro\002le)h(b)m
(uild)g(and)f(\223representati)l(v)n(e\224)f(training)i(e)n(x)n
(ecutions.)249 4324 y(This)63 b(paper)f(describes)f(the)h(high)h(le)l
(v)n(el)e(approach)h(to)h(compilation)f(used)g(by)g(LL)-17
b(VM)64 b(\(Section)e(2\),)68 b(contains)61 b(detailed)i(in-)0
4543 y(formation)c(about)f(the)g(virtual)h(instruction)g(set)e(used)h
(throughout)h(the)f(compilation)h(process)e(\(Section)i(3\),)j
(describes)57 b(some)h(of)0 4762 y(the)d(transformations)h(implemented)
f(in)h(the)f(LL)-17 b(VM)56 b(infrastructure)g(\(Section)g(4\),)j(and)c
(describes)f(k)n(e)n(y)h(components)g(of)h(our)g(in-)0
4981 y(frastructure)d(\(Section)g(5\).)86 b(An)52 b(online)h(reference)
g(manual)f(describes)g(the)h(indi)l(vidual)g(LL)-17 b(VM)54
b(instructions)e(and)h(tools)g(in)g(more)0 5201 y(detail)41
b([19)q(].)0 5791 y Fr(2)239 b(The)60 b(LL)-22 b(VM)60
b(A)-6 b(ppr)l(oach)0 6182 y Fq(The)48 b(centerpiece)e(of)i(the)g
(system)f(is)g(the)h(LL)-17 b(VM)48 b(virtual)g(instruction)g(set.)69
b(It)48 b(combines)f(a)g(lo)l(w-le)l(v)n(el)g(representation)h(with)f
Fp(high-)0 6401 y(le)n(vel)33 b Fq(information)i(about)e(operands,)i
(by)f(using)f(Static)h(Single)g(Assignment)g(\(SSA\))g(form)h(and)f
(high-le)l(v)n(el,)g(language)f(independent)0 6620 y(type)h
(information)i(\(more)f(detail)f(is)g(pro)n(vided)g(in)h(Section)f
(3\).)49 b(The)35 b(RISC)f(lik)n(e,)i(lo)l(w-le)l(v)n(el)d
(instructions)i(of)f(LL)-17 b(VM)35 b(allo)l(w)g(for)g(man)n(y)0
6839 y(traditional)44 b(optimizations)g(to)g(be)f(directly)h(applied)f
(to)h(LL)-17 b(VM)44 b(code,)f(while)h(the)f(high-le)l(v)n(el)h(type)f
(information)i(allo)l(ws)e(for)h(no)n(v)n(el)0 7059 y(high-le)l(v)n(el)
33 b(transformations)g(as)f(well.)48 b(This)34 b(common)f
(representation)f(enables)g(the)h(po)l(werful)g(multi-phase)g
(compilation)h(strate)n(gy)0 7278 y(sho)l(wn)41 b(in)h(Figure)g(1.)300
9201 y @beginspecial 0 @llx 0 @lly 1373 @urx 322 @ury
4320 @rwi @setspecial
%%BeginDocument: LLVMDiagramHighLevel.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: LLVMDiagramHighLevel.dia
%%Creator: Dia v0.88.1
%%CreationDate: Fri May 17 21:36:02 2002
%%For: sabre
%%Magnification: 1.0000
%%Orientation: Portrait
%%BoundingBox: 0 0 1373 322
%%Pages: 1
%%BeginSetup
%%EndSetup
%%EndComments
%%BeginProlog
[ /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright
/parenleft /parenright /asterisk /plus /comma /hyphen /period /slash /zero /one
/two /three /four /five /six /seven /eight /nine /colon /semicolon
/less /equal /greater /question /at /A /B /C /D /E
/F /G /H /I /J /K /L /M /N /O
/P /Q /R /S /T /U /V /W /X /Y
/Z /bracketleft /backslash /bracketright /asciicircum /underscore /quoteleft /a /b /c
/d /e /f /g /h /i /j /k /l /m
/n /o /p /q /r /s /t /u /v /w
/x /y /z /braceleft /bar /braceright /asciitilde /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/space /exclamdown /cent /sterling /currency /yen /brokenbar /section /dieresis /copyright
/ordfeminine /guillemotleft /logicalnot /hyphen /registered /macron /degree /plusminus /twosuperior /threesuperior
/acute /mu /paragraph /periodcentered /cedilla /onesuperior /ordmasculine /guillemotright /onequarter /onehalf
/threequarters /questiondown /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
/Egrave /Eacute /Ecircumflex /Edieresis /Igrave /Iacute /Icircumflex /Idieresis /Eth /Ntilde
/Ograve /Oacute /Ocircumflex /Otilde /Odieresis /multiply /Oslash /Ugrave /Uacute /Ucircumflex
/Udieresis /Yacute /Thorn /germandbls /agrave /aacute /acircumflex /atilde /adieresis /aring
/ae /ccedilla /egrave /eacute /ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis
/eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /divide /oslash /ugrave
/uacute /ucircumflex /udieresis /yacute /thorn /ydieresis] /isolatin1encoding exch def
/Times-Roman-latin1
    /Times-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-Italic-latin1
    /Times-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-Bold-latin1
    /Times-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-BoldItalic-latin1
    /Times-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-Book-latin1
    /AvantGarde-Book findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-BookOblique-latin1
    /AvantGarde-BookOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-Demi-latin1
    /AvantGarde-Demi findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-DemiOblique-latin1
    /AvantGarde-DemiOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-Light-latin1
    /Bookman-Light findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-LightItalic-latin1
    /Bookman-LightItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-Demi-latin1
    /Bookman-Demi findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-DemiItalic-latin1
    /Bookman-DemiItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-latin1
    /Courier findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-Oblique-latin1
    /Courier-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-Bold-latin1
    /Courier-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-BoldOblique-latin1
    /Courier-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-latin1
    /Helvetica findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Oblique-latin1
    /Helvetica-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Bold-latin1
    /Helvetica-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-BoldOblique-latin1
    /Helvetica-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-latin1
    /Helvetica-Narrow findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-Oblique-latin1
    /Helvetica-Narrow-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-Bold-latin1
    /Helvetica-Narrow-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-BoldOblique-latin1
    /Helvetica-Narrow-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Roman-latin1
    /NewCenturySchoolbook-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Italic-latin1
    /NewCenturySchoolbook-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Bold-latin1
    /NewCenturySchoolbook-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-BoldItalic-latin1
    /NewCenturySchoolbook-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Roman-latin1
    /Palatino-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Italic-latin1
    /Palatino-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Bold-latin1
    /Palatino-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-BoldItalic-latin1
    /Palatino-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Symbol-latin1
    /Symbol findfont
definefont pop
/ZapfChancery-MediumItalic-latin1
    /ZapfChancery-MediumItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/ZapfDingbats-latin1
    /ZapfDingbats findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/cp {closepath} bind def
/c {curveto} bind def
/f {fill} bind def
/a {arc} bind def
/ef {eofill} bind def
/ex {exch} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth pop} bind def
/tr {translate} bind def

/ellipsedict 8 dict def
ellipsedict /mtrx matrix put
/ellipse
{ ellipsedict begin
   /endangle exch def
   /startangle exch def
   /yrad exch def
   /xrad exch def
   /y exch def
   /x exch def   /savematrix mtrx currentmatrix def
   x y tr xrad yrad sc
   0 0 1 startangle endangle arc
   savematrix setmatrix
   end
} def

/mergeprocs {
dup length
3 -1 roll
dup
length
dup
5 1 roll
3 -1 roll
add
array cvx
dup
3 -1 roll
0 exch
putinterval
dup
4 2 roll
putinterval
} bind def
28.346000 -28.346000 scale
-0.864800 -23.366662 translate
%%EndProlog


0.100000 slw
[] 0 sd
[] 0 sd
0 slc
0 slj
0 slc
0 slj
[] 0 sd
1.000000 1.000000 1.000000 srgb
n 16.900000 15.300000 m 20.727106 15.300000 l 20.727106 17.228527 l 19.961685 16.907106 19.578974 16.907106 18.813553 17.228527 c 18.048132 17.549948 17.665421 17.549948 16.900000 17.228527 c 16.900000 15.300000 l f
0.000000 0.000000 0.000000 srgb
n 16.900000 15.300000 m 20.727106 15.300000 l 20.727106 17.228527 l 19.961685 16.907106 19.578974 16.907106 18.813553 17.228527 c 18.048132 17.549948 17.665421 17.549948 16.900000 17.228527 c 16.900000 15.300000 l s
/Courier-latin1 ff 0.800000 scf sf
(     ) dup sw 2 div 18.813553 ex sub 16.436886 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 16.800000 19.300000 m 16.800000 20.900000 l 26.700000 20.900000 l 26.700000 19.300000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 16.800000 19.300000 m 16.800000 20.900000 l 26.700000 20.900000 l 26.700000 19.300000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Optimizing Linker) dup sw 2 div 21.600000 ex sub 20.500000 m gs 1 -1 sc sh gr
/Times-Bold-latin1 ff 1.000000 scf sf
(.) dup sw 2 div 5.700000 ex sub 19.400000 m gs 1 -1 sc sh gr
(.) dup sw 2 div 5.700000 ex sub 20.400000 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 34.300000 15.700000 m 34.300000 17.300000 l 44.700000 17.300000 l 44.700000 15.700000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 34.300000 15.700000 m 34.300000 17.300000 l 44.700000 17.300000 l 44.700000 15.700000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Runtime Optimizer) dup sw 2 div 39.600000 ex sub 16.900000 m gs 1 -1 sc sh gr
/Helvetica-latin1 ff 0.800000 scf sf
(Optimized) dup sw 2 div 42.900000 ex sub 18.500000 m gs 1 -1 sc sh gr
(Code) dup sw 2 div 42.900000 ex sub 19.300000 m gs 1 -1 sc sh gr
/Helvetica-latin1 ff 0.800000 scf sf
(Profile) dup sw 2 div 36.300000 ex sub 18.200000 m gs 1 -1 sc sh gr
(& Trace) dup sw 2 div 36.300000 ex sub 19.000000 m gs 1 -1 sc sh gr
(Info) dup sw 2 div 36.300000 ex sub 19.800000 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 34.300000 13.400000 m 34.300000 15.000000 l 44.600000 15.000000 l 44.600000 13.400000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 34.300000 13.400000 m 34.300000 15.000000 l 44.600000 15.000000 l 44.600000 13.400000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Offline Reoptimizer) dup sw 2 div 39.500000 ex sub 14.500000 m gs 1 -1 sc sh gr
/Helvetica-latin1 ff 0.800000 scf sf
(Profile) dup sw 2 div 47.600000 ex sub 15.000000 m gs 1 -1 sc sh gr
(& Trace) dup sw 2 div 47.600000 ex sub 15.800000 m gs 1 -1 sc sh gr
(Info) dup sw 2 div 47.600000 ex sub 16.600000 m gs 1 -1 sc sh gr
/Helvetica-latin1 ff 0.800000 scf sf
(LLVM) dup sw 2 div 11.400000 ex sub 22.600000 m gs 1 -1 sc sh gr
/Helvetica-latin1 ff 0.800000 scf sf
(LLVM) dup sw 2 div 11.300000 ex sub 17.700000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.000000 scf sf
(LLVM) dup sw 2 div 18.800000 ex sub 16.600000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
0 slj
0 slc
0 slj
[] 0 sd
0.815686 0.815686 0.815686 srgb
n 22.500002 15.300001 m 26.327108 15.300001 l 26.327108 17.228528 l 25.561687 16.907107 25.178976 16.907107 24.413555 17.228528 c 23.648134 17.549949 23.265423 17.549949 22.500002 17.228528 c 22.500002 15.300001 l f
0.000000 0.000000 0.000000 srgb
n 22.500002 15.300001 m 26.327108 15.300001 l 26.327108 17.228528 l 25.561687 16.907107 25.178976 16.907107 24.413555 17.228528 c 23.648134 17.549949 23.265423 17.549949 22.500002 17.228528 c 22.500002 15.300001 l s
/Courier-latin1 ff 0.800000 scf sf
(     ) dup sw 2 div 24.413555 ex sub 16.436887 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.000000 scf sf
(Native) dup sw 2 div 24.500000 ex sub 16.500000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 18.813553 17.228527 m 18.800000 19.300000 l s
0 slj
n 18.405243 18.497400 m 18.800000 19.300000 l 19.205225 18.502634 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 24.413555 17.228528 m 24.400000 19.300000 l s
0 slj
n 24.005243 18.497400 m 24.400000 19.300000 l 24.805226 18.502635 l f
/Times-Roman-latin1 ff 1.500000 scf sf
(Libraries) dup sw 2 div 22.100000 ex sub 14.900000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
0 slj
0 slc
0 slj
[] 0 sd
0.815686 0.815686 0.815686 srgb
n 36.696212 20.100002 m 42.161318 20.100002 l 42.915892 20.100002 43.527595 20.616465 43.527595 21.253555 c 43.527595 21.890645 42.915892 22.407108 42.161318 22.407108 c 36.696212 22.407108 l 35.941638 22.407108 35.329936 21.890645 35.329936 21.253555 c 35.329936 20.616465 35.941638 20.100002 36.696212 20.100002 c f
0.000000 0.000000 0.000000 srgb
n 36.696212 20.100002 m 42.161318 20.100002 l 42.915892 20.100002 43.527595 20.616465 43.527595 21.253555 c 43.527595 21.890645 42.915892 22.407108 42.161318 22.407108 c 36.696212 22.407108 l 35.941638 22.407108 35.329936 21.890645 35.329936 21.253555 c 35.329936 20.616465 35.941638 20.100002 36.696212 20.100002 c s
/Times-Roman-latin1 ff 1.500000 scf sf
(           ) dup sw 2 div 39.428765 ex sub 21.757401 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.300000 scf sf
(Host Machine) dup sw 2 div 39.429900 ex sub 21.600000 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 1.100000 17.300000 m 1.100000 18.900000 l 10.100000 18.900000 l 10.100000 17.300000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 1.100000 17.300000 m 1.100000 18.900000 l 10.100000 18.900000 l 10.100000 17.300000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Static Compiler 1) dup sw 2 div 5.700000 ex sub 18.400000 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 1.100000 20.800000 m 1.100000 22.400000 l 10.100000 22.400000 l 10.100000 20.800000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 1.100000 20.800000 m 1.100000 22.400000 l 10.100000 22.400000 l 10.100000 20.800000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Static Compiler N) dup sw 2 div 5.600000 ex sub 21.900000 m gs 1 -1 sc sh gr
0.080000 slw
0 slj
[] 0 sd
1.000000 1.000000 1.000000 srgb
n 12.033300 18.533333 m 12.033300 21.366663 l 15.366630 21.366663 l 15.366630 18.533333 l f
0.000000 0.000000 0.000000 srgb
n 12.033300 18.533333 m 12.033300 21.366663 l s
n 15.366630 18.533333 m 15.366630 21.366663 l s
1.000000 1.000000 1.000000 srgb
n 13.699965 18.533333 1.666665 0.833333 0 360 ellipse f
0.000000 0.000000 0.000000 srgb
n 13.699965 18.533333 1.666665 0.833333 0 360 ellipse cp s
1.000000 1.000000 1.000000 srgb
n 13.699965 21.366663 m 13.699965 21.366663 1.666665 0.833333 0.000000 180.000000 ellipse f
0.000000 0.000000 0.000000 srgb
n 13.699965 21.366663 1.666665 0.833333 0.000000 180.000000 ellipse s
/Helvetica-latin1 ff 0.800000 scf sf
(.o files) dup sw 2 div 13.718500 ex sub 20.700000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 10.100000 18.100000 m 12.000000 19.600000 l s
0 slj
n 11.124236 19.418238 m 12.000000 19.600000 l 11.619952 18.790331 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 10.100000 21.600000 m 12.000000 20.600000 l s
0 slj
n 11.478364 21.326564 m 12.000000 20.600000 l 11.105767 20.618630 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 15.400000 19.900000 m 16.800000 19.900000 l s
0 slj
n 16.000000 20.300000 m 16.800000 19.900000 l 16.000000 19.500000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 15.400000 20.100000 m 16.800000 20.100000 l s
0 slj
n 16.000000 20.500000 m 16.800000 20.100000 l 16.000000 19.700000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 15.400000 20.300000 m 16.800000 20.300000 l s
0 slj
n 16.000000 20.700000 m 16.800000 20.300000 l 16.000000 19.900000 l f
/Helvetica-latin1 ff 0.800000 scf sf
(LLVM) dup sw 2 div 16.500000 ex sub 19.000000 m gs 1 -1 sc sh gr
0.080000 slw
0 slj
[] 0 sd
1.000000 1.000000 1.000000 srgb
n 28.333300 18.533333 m 28.333300 21.366663 l 31.666630 21.366663 l 31.666630 18.533333 l f
0.000000 0.000000 0.000000 srgb
n 28.333300 18.533333 m 28.333300 21.366663 l s
n 31.666630 18.533333 m 31.666630 21.366663 l s
1.000000 1.000000 1.000000 srgb
n 29.999965 18.533333 1.666665 0.833333 0 360 ellipse f
0.000000 0.000000 0.000000 srgb
n 29.999965 18.533333 1.666665 0.833333 0 360 ellipse cp s
1.000000 1.000000 1.000000 srgb
n 29.999965 21.366663 m 29.999965 21.366663 1.666665 0.833333 0.000000 180.000000 ellipse f
0.000000 0.000000 0.000000 srgb
n 29.999965 21.366663 1.666665 0.833333 0.000000 180.000000 ellipse s
/Helvetica-latin1 ff 0.800000 scf sf
(.exe) dup sw 2 div 30.000000 ex sub 20.000000 m gs 1 -1 sc sh gr
(\(llvm +) dup sw 2 div 30.000000 ex sub 20.800000 m gs 1 -1 sc sh gr
(native\)) dup sw 2 div 30.000000 ex sub 21.600000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 26.700000 20.100000 m 28.300000 20.100000 l s
0 slj
n 27.500000 20.500000 m 28.300000 20.100000 l 27.500000 19.700000 l f
/Helvetica-latin1 ff 0.800000 scf sf
(.exe) dup sw 2 div 27.400000 ex sub 19.100000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 31.700000 21.300000 m 35.200000 21.253600 l s
0 slj
n 34.405373 21.664170 m 35.200000 21.253600 l 34.394768 20.864240 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 38.019200 20.100000 m 38.000000 17.300000 l s
0 slj
n 38.405476 18.097238 m 38.000000 17.300000 l 37.605495 18.102724 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 40.900000 17.300000 m 40.838400 20.100000 l s
0 slj
n 40.456093 19.291396 m 40.838400 20.100000 l 41.255899 19.308991 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0 slc
n 31.700000 20.500000 m 34.500000 20.500000 32.000000 17.700000 34.300000 16.500000 c s
0 slj
n 33.775759 17.224687 m 34.300000 16.500000 l 33.405706 16.515419 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0 slc
n 31.700000 19.700000 m 33.900000 18.300000 31.600000 15.500000 34.300000 14.200000 c s
0 slj
n 32.160179 18.933035 m 31.700000 19.700000 l 32.589679 19.607964 l f
0 slj
n 33.752725 14.907453 m 34.300000 14.200000 l 33.405672 14.186652 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0 slc
n 43.527595 21.253555 m 49.400000 21.200000 46.700000 15.200000 44.600000 14.200000 c s
0 slj
n 45.494262 14.182803 m 44.600000 14.200000 l 45.150315 14.905091 l f
showpage

%%EndDocument
 @endspecial 2268 9567 a(Figure)g(1:)52 b(LL)-17 b(VM)42
b(Compilation)g(Strate)n(gy)g(Ov)n(ervie)l(w)249 9985
y(As)i(Figure)h(1)g(illustrates,)g(the)f(LL)-17 b(VM)46
b(compilation)f(strate)n(gy)f(e)n(xactly)g(matches)f(the)i(standard)f
(compile-link-e)n(x)n(ecute)g(model)0 10204 y(of)e(program)f(de)l(v)n
(elopment,)f(with)i(the)f(addition)g(of)h(a)f(runtime)h(and)f(of)l
(\003ine)g(optimizer)-9 b(.)51 b(Unlik)n(e)42 b(a)f(traditional)h
(compiler)-7 b(,)41 b(ho)l(we)l(v)n(er)-7 b(,)0 10424
y(the)41 b Fn(.o)g Fq(\002les)g(generated)g(by)g(an)h(LL)-17
b(VM)42 b(static)f(compiler)g(do)h(not)f(contain)h(an)n(y)e(machine)h
(code)g(at)g(all)h(\226)f(the)n(y)g(contain)g(LL)-17
b(VM)43 b(code)0 10643 y(in)f(a)f(compressed)f(format.)3858
11160 y(2)p eop
%%Page: 3 3
3 2 bop 249 166 a Fq(The)39 b(LL)-17 b(VM)39 b(optimizing)g(link)n(er)g
(combines)f(LL)-17 b(VM)39 b(object)g(\002les,)f(applies)g
(interprocedural)h(optimizations,)f(generates)g(nati)l(v)n(e)0
385 y(code,)53 b(and)e(links)g(in)g(libraries)g(pro)n(vided)g(in)h
(nati)l(v)n(e)e(code)h(form.)80 b(An)51 b(interesting)g(feature)h(of)f
(the)g(e)n(x)n(ecutables)e(produced)i(by)g(the)0 604
y(optimizing)c(link)n(er)f(is)g(that)g(the)n(y)g Fp(contain)g
Fq(compressed)f(LL)-17 b(VM)47 b(bytecode)e(in)i(a)f(special)f(section)
g(of)i(the)f(e)n(x)n(ecutable)e(itself.)64 b(More)0 824
y(information)43 b(about)e(the)g(design)g(and)h(implementation)g(of)g
(the)f(optimizing)h(link)n(er)g(is)g(pro)n(vided)f(in)h(Section)f
(5.6.3.)249 1043 y(Once)k(the)h(e)n(x)n(ecutable)d(has)i(been)h
(produced,)g(the)f(de)l(v)n(elopers)g(\(or)h(end-users\))f(of)h(the)g
(application)f(be)n(gin)g(e)n(x)n(ecuting)g(the)g(pro-)0
1262 y(gram.)67 b(As)46 b(the)n(y)g(do)h(so,)g(trace)f(and)h(pro\002le)
g(information)h(generated)e(by)g(the)h(e)n(x)n(ecution)e(can)h(be)h
(optionally)g(used)f(by)h(the)f(runtime)0 1481 y(optimizer)c(to)g
(transparently)f(tune)g(the)h(generated)f(e)n(x)n(ecutable.)49
b(The)42 b(runtime)g(optimizer)g(is)f(decribed)g(in)h(Section)f(5.8.)
249 1700 y(As)j(the)g(runtime)h(optimizer)g(collects)f(pro\002le)h
(information)g(and)g(traces,)e(it)i(will)g(determine)g(that)f
(transformations)h(need)f(to)g(be)0 1919 y(performed)d(on)g(the)g
(program.)51 b(Unfortunately)41 b(some)g(transformations,)g(especially)
e(interprocedural)i(ones,)f(cannot)h(be)f(pro\002tably)0
2139 y(performed)k(at)g(runtime.)58 b(F)n(or)44 b(this)g(reason,)f(the)
h(of)l(\003ine)g(reoptimizer)g(is)f(a)m(v)l(ailable)g(to)h(mak)n(e)g
(use)f(of)h(spare)f(c)n(ycles)f(on)i(the)f(machine)0
2358 y(to)55 b(perform)g(agressi)l(v)n(e)e(reoptimization)i(of)g(the)f
(application)g(code)g Fp(in)h(the)f(\002eld)p Fq(,)k(tuning)c(it)h(to)g
(real)f(w)n(orld)i(usage)d(patterns.)90 b(Our)0 2577
y(plans)41 b(for)h(the)g(of)l(\003ine)f(reoptimizer)h(are)g(discussed)e
(in)h(Section)h(5.9.)249 2796 y(This)g(system)f(hea)m(vily)g(depends)f
(on)i(ha)m(ving)f(a)g(code)g(representation)g(with)h(the)f(follo)l
(wing)i(qualities:)249 3181 y Fo(\017)83 b Fq(The)34
b(code)e(must)i(be)f(high-le)l(v)n(el)g(and)g(e)n(xpressi)l(v)n(e)e
(enough)i(to)g(permit)h(high-le)l(v)n(el)f(analyses)f(and)h
(transformations)g(at)g(linktime)415 3401 y(and)59 b(in)g(the)g(of)l
(\003ine)g(optimizer)h(when)f(pro\002le)g(information)h(is)f(a)m(v)l
(ailable.)102 b(W)-7 b(ithout)60 b(the)f(ability)g(to)h(perform)f
(high-le)l(v)n(el)415 3620 y(transformations,)41 b(the)h
(representation)f(does)g(not)h(pro)n(vide)f(an)n(y)g(adv)l(antages)f(o)
n(v)n(er)g(optimizing)i(machine)f(code)g(directly)-11
b(.)249 3972 y Fo(\017)83 b Fq(The)41 b(code)g(must)g(ha)m(v)n(e)f(a)h
(dense)f(representation,)g(to)i(a)m(v)m(oid)e(in\003ating)i(nati)l(v)n
(e)e(e)n(x)n(ecutables.)49 b(Additionally)-11 b(,)41
b(it)h(is)f(useful)g(if)g(the)415 4191 y(representation)48
b(allo)l(ws)f(for)h(random)h(access)d(to)i(portions)g(of)g(the)g
(application)g(code,)g(allo)l(wing)g(the)g(runtime)g(optimizer)h(to)415
4410 y(a)m(v)m(oid)41 b(reading)g(the)h(entire)f(application)h(code)f
(into)h(memory)g(to)f(do)h(local)f(transformations.)249
4762 y Fo(\017)83 b Fq(The)47 b(code)f(must)g(be)h(lo)l(w-le)l(v)n(el)f
(enough)g(to)h(perform)g(lightweight)g(transformations)g(at)g(runtime)g
(without)g(too)f(much)h(o)n(v)n(er)m(-)415 4981 y(head.)84
b(If)53 b(the)f(code)g(is)g(lo)l(w-le)l(v)n(el)g(enough,)j(code)d
(runtime)h(code)f(generation)g(can)g(be)h(cheap)e(enough)i(to)f(be)h
(feasible)f(in)g(a)415 5201 y(broad)j(v)l(ariety)g(of)h(situations.)91
b(A)55 b(lo)l(w-le)l(v)n(el)f(representation)h(is)f(also)h(useful)g
(because)e(it)j(allo)l(ws)e(man)n(y)h(traditional)g(opti-)415
5420 y(mizations)41 b(to)h(be)f(implemented)h(without)g(dif)l
(\002culty)-11 b(.)249 5805 y(Section)42 b(3)f(describes)g(the)g
(attrib)m(utes)g(of)h(the)f(LL)-17 b(VM)43 b(virtual)f(instruction)g
(set)f(that)g(mak)n(e)h(it)g(suitable)f(for)h(this)f(purpose.)0
6395 y Fr(3)239 b(The)60 b(LL)-22 b(VM)60 b(V)-9 b(irtual)60
b(Instruction)f(Set)0 6786 y Fq(The)37 b(LL)-17 b(VM)38
b(virtual)g(instruction)f(set)g(is)g(designed)f(to)i(be)f(a)g
Fp(low-le)n(vel)f Fq(representation)5057 6726 y Fm(1)5163
6786 y Fq(with)i(support)f(for)h Fp(high-le)n(vel)f Fq(analyses)e(and)0
7005 y(transformations.)85 b(T)-13 b(o)53 b(meet)f(these)g(goals,)j(it)
e(pro)n(vides)f(e)n(xtensi)l(v)n(e)f(language)h(independent)g(type)h
(information)g(about)g(all)g(v)l(alues)0 7225 y(in)c(the)f(program,)i
(e)n(xposes)d(memory)i(allocation)f(directly)h(to)g(the)f(compiler)-7
b(,)51 b(and)d(is)g(speci\002cally)g(designed)g(to)g(ha)m(v)n(e)g(fe)l
(w)g(special)0 7444 y(cases.)60 b(This)45 b(section)g(\002rst)g(pro)n
(vides)f(an)h(o)n(v)n(ervie)l(w)f(of)h(the)g(LL)-17 b(VM)46
b(architecture,)f(and)g(then)g(discusses)e(the)i(major)g(features)g(of)
g(the)0 7663 y(LL)-17 b(VM)48 b(virtual)f(instruction)g(set.)67
b(The)47 b(detailed)g(syntax)g(and)f(semantics)g(of)h(each)f
(instruction)i(are)e(de\002ned)h(in)g(the)g(online)g(LL)-17
b(VM)0 7882 y(reference)41 b(manual)g([19)q(].)0 8381
y Fl(3.1)198 b(Ov)n(er)n(view)51 b(of)f(the)g(LL)-18
b(VM)50 b(ar)l(chitectur)l(e)0 8712 y Fq(The)57 b(LL)-17
b(VM)58 b(instruction)f(set)f(represents)g(a)h(virtual)g(architecture)g
(that)g(captures)f(the)h(k)n(e)n(y)f(operations)h(of)g(ordinary)h
(processors,)0 8931 y(b)m(ut)52 b(a)m(v)m(oids)e(machine)h(speci\002c)g
(constraints)g(such)h(as)f(ph)o(ysical)g(re)n(gisters,)i(pipelines,)g
(lo)l(w-le)l(v)n(el)e(calling)h(con)-7 b(v)n(entions,)53
b(or)f(traps.)0 9150 y(LL)-17 b(VM)52 b(pro)n(vides)e(an)h(in\002nite)g
(set)g(of)g(typed)g(virtual)g(re)n(gisters,)h(which)f(can)g(hold)g(v)l
(alues)f(of)h(primiti)l(v)n(e)g(types)g(\(inte)n(gral,)i(\003oating)0
9369 y(point,)i(or)e(pointer)g(v)l(alues\).)84 b(The)53
b(virtual)g(re)n(gisters)f(are)g(in)h(Static)g(Single)g(Assignment)f
(\(SSA\))i(form,)i(which)c(is)h(a)f(widely)h(used)0 9589
y(representation)e(for)h(compiler)f(optimization,)j(as)d(e)n(xplained)f
(in)i(Section)f(3.3.)80 b(The)52 b(LL)-17 b(VM)52 b(type)f(system)g(is)
g(e)n(xplained)f(in)i(more)0 9808 y(detail)41 b(in)h(Section)g(3.4.)p
0 10099 3120 7 v 181 10210 a Fk(1)239 10258 y Fj(Note)h(that)f(Ja)m(v)m
(a)h(bytecode)h(and)f(Microsoft')-7 b(s)43 b(.NET)f(bytecode)i(both)g
(represent)f(code)g(at)f(a)h(much)g(higher)h(le)m(v)n(el)e(than)h(LL)
-13 b(VM.)43 b(In)g(f)o(act,)i(the)d(current)i(LL)-13
b(VM)0 10416 y(system)43 b(could)h(be)f(used)h(to)f(compile)h(and)g
(optimize)f(the)h(virtual)f(machines)h(implementing)h(these)e(systems)f
(\(which)i(are)f(often)h(written)g(in)f(C)f(and)i(C++\),)h(rather)0
10574 y(than)40 b(Ja)m(v)m(a)e(or)i(.NET)f(applications)h(themselv)n
(es.)58 b(It)39 b(is)g(also)g(possible)g(to)g(support)h(compiling)h
(application)f(bytecode)g(to)g(LL)-13 b(VM,)39 b(which)g(w)o(ould)h
(allo)m(w)e(using)i(our)0 10732 y(optimization)35 b(capabilities)e(in)h
(the)f(conte)n(xt)h(of)g(a)f(Ja)m(v)m(a)h(static)e(compiler)-5
b(,)35 b(for)f(e)n(xample.)42 b(F)n(or)34 b(more)g(details,)f(see)g
(Section)h(5.6.)3858 11160 y Fq(3)p eop
%%Page: 4 4
4 3 bop 249 166 a Fq(LL)-17 b(VM)53 b(programs)g(transfer)f(v)l(alues)g
(between)f(virtual)i(re)n(gisters)f(and)g(memory)h(solely)f(via)g
Fn(load)f Fq(and)h Fn(store)f Fq(operations,)0 385 y(using)62
b(typed)g(pointers.)113 b(Memory)62 b(is)g(partitioned)g(into)h(a)f
(global)g(area,)k(stack,)g(and)c(heap)g(\(where)g(functions)g(in)g(the)
g(program)0 604 y(are)50 b(treated)g(as)g(global)g(objects\).)77
b(Objects)49 b(on)i(the)f(stack)f(and)h(heap)g(are)g(allocated)g(using)
g Fn(alloca)e Fq(and)i Fn(malloc)e Fq(instructions)0
824 y(respecti)l(v)n(ely)-11 b(,)33 b(and)f(are)h(accessed)d(through)j
(the)g(pointer)g(v)l(alues)f(returned)h(by)f(these)g(operations.)48
b(Stack)33 b(objects)f(are)g(allocated)g(in)h(the)0 1043
y(stack)45 b(frame)h(of)g(the)g(current)g(function,)g(and)g(are)f
(automatically)h(freed)g(when)f(control)h(lea)m(v)n(es)e(the)i
(function.)64 b(Heap)45 b(objects)g(must)0 1262 y(be)d(e)n(xplicitly)h
(freed)g(using)f(a)h Fn(free)e Fq(instruction.)55 b(The)43
b(moti)l(v)l(ation)g(and)f(implementation)h(of)g(these)f(operations)h
(are)f(e)n(xplained)g(in)0 1481 y(Section)g(3.7)f(belo)l(w)-11
b(.)249 1700 y(Note)41 b(that)f(LL)-17 b(VM)42 b(is)e(a)h(virtual)g
(instruction)g(set:)51 b(it)41 b(does)f(not)g(de\002ne)h(runtime)g(and)
g(operating)f(system)g(functions)h(such)f(as)g(I/O,)0
1919 y(memory)45 b(management)f(\(in)i(particular)-7
b(,)46 b(g)o(arbage)e(collection\),)h(signals,)g(and)f(man)n(y)h
(others.)60 b(Some)45 b(issues)f(that)h(do)f(belong)h(in)g(the)0
2139 y(instruction)50 b(set)f(and)g(may)g(be)g(added)g(in)h(the)f
(future)h(include)f(support)g(for)h(multimedia)g(instructions)g
(\(e.g.,)g(pack)n(ed)e(operations\),)0 2358 y(predicated)41
b(instructions,)g(and)g(e)n(xplicit)g(parallelism.)0
2854 y Fl(3.2)198 b(Thr)l(ee)52 b(addr)l(ess)d(code)0
3185 y Fq(Three-address)c(code)g(has)f(been)h(the)g(representation)g
(of)h(choice)e(for)i(RISC)f(architectures)g(and)g(language-independent)
g(compiler)0 3404 y(optimizations)51 b(for)h(man)n(y)e(years.)79
b(It)51 b(is)g(v)n(ery)g(close)f(in)h(spirit)g(to)h(machine)e(code,)j
(with)e(a)f(small)h(number)h(of)f(simple,)i(orthogonal)0
3623 y(operations.)e(Three-address)41 b(code)g(can)g(be)g(easily)g
(compressed,)f(allo)l(wing)h(for)h(high)g(density)f(LL)-17
b(VM)43 b(\002les.)249 3843 y(Most)j(LL)-17 b(VM)48 b(operations,)g
(including)f(all)g(arithmetic)g(and)g(logical)f(operations,)i(are)f(in)
g(3-address)f(form,)i(i.e.,)f(the)n(y)f(tak)n(e)h(one)0
4062 y(or)52 b(tw)n(o)g(operands)g(and)f(produce)h(a)f(single)h
(result.)81 b(LL)-17 b(VM)53 b(includes)e(a)h(standard)f(and)h(f)n
(airly)h(orthogonal)f(set)f(of)h(arithmetic)g(and)0 4281
y(logical)46 b(operations:)59 b Fn(add)p Fq(,)46 b Fn(sub)p
Fq(,)f Fn(mul)p Fq(,)g Fn(div)p Fq(,)g Fn(rem)p Fq(,)g
Fn(not)p Fq(,)g Fn(and)p Fq(,)h Fn(or)p Fq(,)f Fn(xor)p
Fq(,)g Fn(shl)p Fq(,)h Fn(shr)p Fq(,)f(and)g Fn(set)p
Fi(cc)p Fq(.)62 b(The)46 b(latter)g(\()p Fn(set)p Fi(cc)p
Fq(\))e(is)0 4500 y(actually)51 b(a)f(collection)h(of)g(comparison)f
(instructions)h(with)g(dif)l(ferent)h(operators)e(\(e.g.,)i
Fn(seteq)p Fq(,)f Fn(setlt)p Fq(,)g(etc.\),)h(that)f(produce)f(a)0
4719 y(boolean)36 b(result.)49 b(In)36 b(addition)h(to)f(simple)g
(binary)h(instructions,)f(some)g(instructions)g(may)g(tak)n(e)g(0,)h(3)
f(or)h(more,)g(or)f(a)g(v)l(ariable)g(number)0 4938 y(of)42
b(operands.)50 b(Important)43 b(e)n(xamples)d(include)h(call)g
(instructions)h(and)f(the)g Fn(phi)g Fq(instruction)h(used)f(to)g(put)h
(code)f(in)h(SSA)g(form.)249 5158 y(A)47 b(k)n(e)n(y)g(point)h(is)e
(that)i(LL)-17 b(VM)48 b(instructions)f(are)g(polymorphic,)i(i.e.,)e(a)
g(single)f(instruction)i(lik)n(e)g Fn(add)e Fq(can)g(operate)h(on)g(se)
l(v)n(eral)0 5377 y(dif)l(ferent)58 b(types)f(of)h(operands.)98
b(This)58 b(greatly)f(reduces)g(the)g(number)h(of)g(distinct)f
(opcodes.)98 b(In)58 b(particular)-7 b(,)62 b(we)57 b(do)g(not)h
(require)0 5596 y(dif)l(ferent)i(opcodes)f(for)h(operations)f(on)h
(signed)f(and)g(unsigned)g(inte)n(gers,)k(single)c(or)h
(double-precision)g(\003oating)f(point)h(v)l(alues,)0
5815 y(arithmetic)43 b(or)f(logical)g(shifts,)g(etc.)53
b(The)42 b(types)g(of)h(the)f(operands)f(automatically)i(de\002ne)f
(the)g(semantics)f(of)i(the)f(operation)g(and)g(the)0
6034 y(type)f(of)h(the)g(result,)f(and)g(must)g(follo)l(w)h(strict)g
(type)f(rules)h(de\002ned)f(in)h(the)f(reference)g(manual)g([19)q(].)
249 6235 y(F)n(or)h(e)n(xample,)e(here)h(are)g(some)g(simple)h(LL)-17
b(VM)42 b(operations:)628 6557 y Fh(\045X)89 b(=)g(div)g(int)f(4,)h(9)
1614 b(;)89 b(Signed)f(integer)f(division)628 6758 y(\045Y)i(=)g(div)g
(uint)f(12,)h(4)1434 b(;)89 b(Unsigned)e(integer)g(division)628
6959 y(\045cond)h(=)h(seteq)f(int)h(\045X,)f(8)1076 b(;)89
b(Produces)e(a)j(boolean)d(value)628 7160 y(br)i(bool)f(\045cond,)g
(label)g(\045True,)f(label)h(\045False)448 7361 y(True:)628
7562 y(...)0 8058 y Fl(3.3)198 b(Static)51 b(Single)f(Assignment)f(f)-5
b(orm)0 8389 y Fq(LL)-17 b(VM)44 b(uses)e(Static)h(Single)g(Assignment)
g(\(SSA\))h(form)f(as)g(its)g(primary)g(code)g(representation.)55
b(A)43 b(program)g(is)g(said)f(to)i(be)e(in)h(SSA)0 8608
y(form)34 b(if)f(each)f(of)i(its)f(v)l(ariables)f(is)h(de\002ned)g(e)n
(xactly)f(once,)h(and)g(each)f(use)h(of)g(a)g(v)l(ariable)f(is)h
(dominated)g(by)g(that)g(v)l(ariable')-9 b(s)33 b(de\002nition.)0
8827 y(SSA)49 b(form)h(greatly)e(simpli\002es)h(man)n(y)f(data\003o)l
(w)g(optimizations)h(because)e(only)i(a)g(single)f(de\002nition)h(can)f
(reach)g(a)h(particular)g(use)0 9047 y(of)44 b(a)g(v)l(alue,)f(and)h
(\002nding)g(that)g(de\002nition)g(is)g(tri)l(vial.)58
b(It)44 b(also)g(enables)f(f)n(ast)g(\003o)l(w-insensiti)l(v)n(e)g
(algorithms)h(to)g(achie)l(v)n(e)f(man)n(y)g(of)h(the)0
9266 y(bene\002ts)d(of)h(\003o)l(w-sensiti)l(v)n(e)e(algorithms)i
(\(sometimes)f(referred)h(to)g(as)f(the)g(sparseness)e(property\).)249
9485 y(One)53 b(implication)h(of)g(the)f(single)g(de\002nition)h
(property)g(is)f(that)h(each)e(instruction)i(that)g(computes)f(a)g(v)l
(alue)g(\(e.g.,)i Fn(add)98 b(int)0 9704 y(\045x,)h(\045y)p
Fq(\))45 b(implicitly)i(creates)d(a)i(ne)l(w)f(virtual)i(re)n(gister)e
(holding)h(that)g(v)l(alue.)64 b(The)46 b(v)l(alue)f(may)h(be)g(gi)l(v)
n(en)f(an)g(e)n(xplicit)h(name)f(\(e.g.,)0 9923 y Fn(\045z)99
b(=)g(add)g(...)p Fq(\);)38 b(if)h(not,)g(a)f(unique)g(name)g(is)g
(automatically)g(assigned)f(by)h(the)h(LL)-17 b(VM)39
b(parser)-9 b(.)49 b(This)39 b(property)f(enables)g(\223uses\224)0
10142 y(in)j(LL)-17 b(VM)41 b(to)g(refer)g(directly)g(to)g(the)g
(operation)g(that)g(computes)f(the)g(v)l(alue,)g(enabling)h(ef)l
(\002cient)f(tra)m(v)n(ersal)g(of)h(def-use)f(information.)249
10362 y(When)59 b(control)i(\003o)l(w)e(is)h(tak)n(en)g(into)g
(account,)j(simple)d(v)l(ariable)f(renaming)h(is)g(not)g(enough)g(for)g
(code)f(to)h(be)g(in)g(v)l(alid)f(SSA)0 10581 y(form.)87
b(T)-13 b(o)53 b(handle)g(control)h(\003o)l(w)f(mer)m(ges,)j(SSA)d
(form)h(de\002nes)f(the)g Fg(f)g Fq(function,)j(which)d(is)g(used)g(to)
g(select)f(an)h(incoming)h(v)l(alue,)0 10800 y(depending)41
b(on)f(which)h(basic)f(block)h(control)g(\003o)l(w)g(came)f(from.)51
b(LL)-17 b(VM)42 b(pro)n(vides)e(a)h Fn(phi)e Fq(instruction)i(which)g
(corresponds)f(to)h(the)3858 11160 y(4)p eop
%%Page: 5 5
5 4 bop 0 166 a Fq(SSA)42 b Fg(f)p Fq(-node.)51 b(The)41
b(syntax)g(of)h(this)g(instruction)f(is:)340 385 y Fn(<result>)97
b(=)i(phi)g(<type>)e([<val0>,)g(<label0>],)f(...)198
b(,)99 b([<valN>,)e(<labelN>])p Fq(.)0 604 y Fn(result)41
b Fq(is)j(assigned)e(the)i(v)l(alue)f Fn(val0)f Fq(if)j(control)f
(reaches)e(this)i(instruction)g(from)g(the)g(basic)f(block)h(labelled)f
Fn(label0)p Fq(,)e Fn(val1)0 824 y Fq(if)h(control)h(reaches)d(here)i
(from)h(basic)e(block)g Fn(label1)p Fq(,)f(and)h(so)h(on.)52
b(All)42 b(the)g Fn(phi)f Fq(instructions)g(in)h(a)g(basic)f(block)h
(must)g(appear)f(at)0 1043 y(the)g(be)n(ginning)h(of)f(the)h(basic)f
(block.)51 b(F)n(or)41 b(e)n(xample)g(the)g(loop)h(of)g(this)f(C)g
(function:)448 1410 y Fh(int)89 b(pow\(int)e(M,)i(unsigned)e(N\))i({)
628 1611 y(unsigned)e(i;)i(int)f(Result)g(=)h(1;)628
1812 y(for)f(\(i)h(=)h(0;)f(i)g(!=)g(N;)g(++i\))807 2012
y(Result)f(*=)h(M;)628 2213 y(return)e(Result;)448 2414
y(})249 2800 y Fq(is)41 b(translated)g(to)h(LL)-17 b(VM)42
b(as:)448 3166 y Fh(Loop:)628 3367 y(\045result)177 b(=)89
b(phi)178 b(int)89 b([)g(\045nextres,)e(\045Loop)h(],)h([)g(1,)g
(\045LoopHeader)d(])628 3568 y(\045i)627 b(=)89 b(phi)g(uint)f([)h
(\045nexti,)267 b(\045Loop)88 b(],)h([)g(0,)g(\045LoopHeader)d(])628
3769 y(\045nextres)h(=)i(mul)g(int)f(\045result,)f(\045M)1255
b(;)89 b(Result)f(*=)h(M)628 3970 y(\045nexti)267 b(=)89
b(add)g(uint)f(\045i,)h(1)1703 b(;)89 b(i)h(=)f(i)g(+)g(1)628
4171 y(\045cond)357 b(=)89 b(setne)f(uint)g(\045nexti,)g(\045N)1075
b(;)89 b(i)h(!=)e(N)628 4372 y(br)h(bool)f(\045cond2,)f(label)h
(\045Loop,)g(label)g(\045Exit)249 4757 y Fq(As)47 b(noted)g(before,)i
(the)e(virtual)h(re)n(gisters)f(in)g(LL)-17 b(VM)48 b(are)f(in)h(SSA)g
(form)g(while)g(v)l(alues)e(in)i(memory)f(are)h(not.)68
b(This)48 b(simpli\002es)0 4976 y(transformations)39
b(\(because)g(scalars)f(cannot)h(ha)m(v)n(e)e(aliases\),)i(at)g(the)g
(slight)g(e)n(xpense)f(of)h(complications)g(for)h(load)f(and)g(store)g
(motion)0 5196 y(\(reordering)j(load)g(and)f(store)g(operations)h
(still)f(requires)h(pointer)g(and)f(array)g(dependence)g(analysis\).)0
5694 y Fl(3.4)198 b(T)-15 b(ype)50 b(inf)-5 b(ormation)0
6025 y Fq(LL)-17 b(VM)53 b(is)f(a)g(strictly)g(typed)h(representation,)
h(where)d(e)l(v)n(ery)h(SSA)h(v)l(alue)e(or)i(memory)f(location)h(has)e
(an)h(associated)f(type)h(and)g(all)0 6245 y(operations)33
b(obe)n(y)g(strict)h(type)g(rules.)48 b(This)34 b(type)f(information)i
(enables)e(a)g(broad)h(class)e(of)i Fp(high-le)n(vel)f
Fq(transformations)h(on)g Fp(low-le)n(vel)0 6464 y Fq(code.)50
b(In)42 b(addition,)g(type)f(mismatches)g(can)g(be)g(used)g(to)g
(detect)g(errors)h(in)g(optimizations)f(with)h(the)g(LL)-17
b(VM)42 b(consistenc)n(y)e(check)n(er)-9 b(.)249 6683
y(The)53 b(LL)-17 b(VM)53 b(type)g(system)f(includes)g(source)g
(language)g(independent)g(primiti)l(v)n(e)h(types)f(\(v)m(oid,)k(bool,)
f(signed)d(and)g(unsigned)0 6902 y(inte)n(gers)i(from)h(8)f(to)h(64)g
(bits,)i(\003oating-point)e(v)l(alues)f(in)h(single)f(and)g(double)g
(precision,)j(and)e(opaque\))f(and)g(constructi)l(v)n(e)f(types)0
7121 y(\(pointers,)39 b(arrays,)f(structures,)g(functions\).)51
b(These)38 b(types)g(are)g(language-independent)g(data)g
(representations)g(that)g(are)h(mapped)f(to)0 7340 y(from)c(higher)m
(-le)l(v)n(el)f(language)g(types.)48 b(F)n(or)34 b(e)n(xample,)g
(classes)d(in)j(C++)f(with)g(inheritance)h(and)f(virtual)h(methods)f
(can)g(be)h(represented)0 7560 y(using)39 b(structures)g(for)g(the)h
(data)e(v)l(alues)h(and)f(a)h(typed)g(function)h(table)f(with)g
(indirect)h(function)f(calls)g(for)h(inheritance.)49
b(This)40 b(permits)0 7779 y(man)n(y)49 b(language-independent)h
(optimizations)g(and)g(e)l(v)n(en)f(some)g(high-le)l(v)n(el)h
(optimizations)g(\(e.g.,)h(virtual)f(function)h(resolution\))0
7998 y(to)42 b(be)f(performed)h(on)g(the)f(LL)-17 b(VM)42
b(code.)249 8199 y(Some)g(e)n(xamples)e(illustrating)i(the)g(types)f
(in)g(LL)-17 b(VM)43 b(are:)448 8533 y Fh(\045arrayty)87
b(=)j([2)f(x)g([3)g(x)g([4)g(x)h(uint]]])177 b(;)89 b(2x3x4)f(array)g
(of)h(unsigned)e(integer)g(values)448 8934 y(\045aptr)h(=)i([4)f(x)g
(int]*)1523 b(;)89 b(Pointer)e(to)i(array)f(of)h(four)f(int)h(values)
448 9537 y(\045funptr)f(=)h(float)f(\(int,)g(int)h(*\))g(*)448
b(;)89 b(Pointer)e(to)i(a)h(function)c(that)j(takes)f(an)h(int)f(and)h
(a)3587 9738 y(;)g(pointer)e(to)i(int,)f(returning)f(float.)448
10140 y(\045strty)h(=)h({)h(float,)d(\045funptr)h(})717
b(;)89 b(A)g(structure,)e(where)g(the)i(first)f(element)f(is)i(a)3587
10341 y(;)g(float)f(and)h(the)f(second)g(element)f(is)i(the)g
(\045funptr)3587 10542 y(;)g(pointer)e(to)i(function)e(type)h(defined)g
(previously)3858 11160 y Fq(5)p eop
%%Page: 6 6
6 5 bop 249 166 a Fq(All)53 b(LL)-17 b(VM)53 b(instructions)f(are)g
(strictly)h(typed,)i(and)d(all)h(ha)m(v)n(e)e(restrictions)h(on)g
(their)h(operands)f(to)h(simplify)g(transformations)0
385 y(and)e(preserv)n(e)g(type)g(correctness)g(\(Additionally)-11
b(,)54 b(these)d(restrictions)h(mak)n(e)f(the)h(LL)-17
b(VM)52 b(code)f(more)h(compact,)h(as)e(e)n(xplained)g(in)0
604 y(Section)h(3.2\).)82 b(F)n(or)52 b(e)n(xample,)h(the)f
Fn(add)f Fq(instruction)h(requires)g(that)g(both)g(operands)f(are)h(of)
g(the)g(same)f(type,)j(which)e(must)g(be)f(an)0 824 y(arithmetic)46
b(\(i.e.,)g(inte)n(gral)f(or)i(\003oating-point\))g(type,)f(and)g(it)g
(produces)f(a)h(v)l(alue)f(of)h(that)g(type.)64 b(The)46
b Fn(load)e Fq(instruction)j(requires)e(a)0 1043 y(pointer)i(operand)g
(to)g(load)g(from.)69 b(The)47 b Fn(store)e Fq(instruction)i(requires)g
(a)g(v)l(alue)f(of)i(some)e(type)h(\(say)-11 b(,)48 b
Fg(t)p Fq(\))f(to)g(store)g(and)g(a)f(pointer)i(to)0
1262 y(store)41 b(into,)h(which)f(must)g(be)h(a)f(pointer)h(to)g(that)f
(type)h(\()p Fg(t)p Fq(*\).)51 b(Some)42 b(e)n(xamples)e(of)i
(malformed)g(code)f(are:)448 1629 y Fh(uint)89 b(\045testfunc\(\))d({)
628 1830 y(\045v)j(=)g(load)f(int)h(4)1345 b(;)89 b(Must)f(load)h
(through)e(a)i(pointer)628 2031 y(store)f(int)g(42,)h(float*)f
(\045fptr)357 b(;)89 b(Cannot)f(store)g(int)g(through)f(float)h
(pointer)628 2232 y(\045Val)g(=)h(add)g(int)g(\045Val,)f(0)717
b(;)89 b(Definition)d(does)j(not)f(dominate)f(use)628
2433 y(ret)h(int*)h(null)1523 b(;)89 b(Cannot)f(return)f(int*)h(from)h
(function)e(returning)f(uint)448 2633 y(})249 3019 y
Fq(T)-13 b(ype)55 b(information)i(enables)d(high-le)l(v)n(el)h
(information)h(to)g(be)f(easily)g(e)n(xtracted)f(from)i(the)f(lo)l
(w-le)l(v)n(el)g(code,)j(enabling)d(no)n(v)n(el)0 3238
y(transformations)64 b(at)g(link)g(time.)119 b(T)-13
b(o)64 b(do)g(this,)69 b(ho)l(we)l(v)n(er)-7 b(,)69 b(it)64
b(must)g(be)f(possible)h(to)g(allo)l(w)g(type-safe)f(access)f(to)i
(\002elds)g(of)g(data)0 3457 y(in)56 b(memory)-11 b(.)93
b(F)n(or)55 b(this)h(reason,)h(a)e(critical)h(instruction)f(in)h(LL)-17
b(VM)56 b(\(for)g(maintaining)g(type-safety\))f(is)h(the)f
Fn(getelementptr)0 3676 y Fq(instruction.)0 4175 y Fl(3.5)198
b(T)-15 b(ype-safe)50 b(pointer)h(arithmetic:)65 b(the)50
b Fu(getelementptr)44 b Fl(instruction)0 4506 y Fq(The)59
b Fn(getelementptr)54 b Fq(instruction)59 b(is)f(used)g(to)h(calculate)
e(the)i(address)f(of)g(a)h(subelement)f(of)h(an)f(aggre)n(g)o(ate)g
(data)g(structure)0 4725 y(in)d(a)g(type-safe)f(manner)-9
b(.)92 b(Gi)l(v)n(en)54 b(a)h(pointer)g(to)g(a)g(structure)g(and)g(a)f
(\002eld)h(number)-7 b(,)59 b(the)c Fn(getelementptr)50
b Fq(instruction)55 b(yields)0 4944 y(a)k(pointer)h(to)g(the)g
(\002eld.)105 b(Gi)l(v)n(en)59 b(a)g(pointer)h(to)g(an)f(array)h(and)f
(an)g(element)h(number)-7 b(,)64 b(the)59 b(instruction)h(returns)g(a)f
(pointer)h(to)g(the)0 5164 y(speci\002ed)50 b(element.)79
b(In)51 b(addition)g(to)g(singular)g(inde)n(xing,)h(multiple)f(inde)n
(x)n(es)e(can)i(be)f(performed)i(at)e(the)h(same)f(time)h(by)g(a)f
(single)0 5383 y Fn(getelementptr)37 b Fq(instruction.)249
5602 y(The)49 b(e)n(xample)f(belo)l(w)h(is)g(a)f(comple)n(x)h(C)f
(testcase,)h(designed)f(to)i(be)e(a)h(concise)f(illustration)h(of)h
(the)f(LL)-17 b(VM)49 b(le)n(xical)g(structure,)0 5821
y(type)62 b(system,)j(and)d(the)f Fn(getelementptr)c
Fq(instruction.)112 b(The)62 b(testcase)e(de\002nes)i(tw)n(o)g
(structure)g(types)f(and)g(a)h(function)g(that)0 6040
y(performs)42 b(comple)n(x)f(inde)n(xing:)448 6407 y
Fh(struct)88 b(RT)h({)538 b(/*)89 b(Structure)d(with)j(complex)e(types)
h(*/)628 6608 y(char)g(A;)628 6809 y(int)g(B[10][20];)628
7010 y(char)g(C;)448 7211 y(};)448 7412 y(struct)g(ST)h({)628
7613 y(int)f(X;)628 7814 y(double)f(Y;)628 8015 y(struct)g(RT)i(Z;)269
b(/*)89 b(ST)g(contains)e(an)i(instance)e(of)i(RT)g(embedded)d(in)j(it)
g(*/)448 8215 y(};)448 8617 y(int)g(*foo\(struct)d(ST)j(*s\))g({)628
8818 y(return)e(&s[1].Z.B[5][13];)448 9019 y(})249 9404
y Fq(The)42 b(LL)-17 b(VM)42 b(code)f(belo)l(w)g(is)h(a)f(v)n(ersion)g
(of)g(the)h(code)f(generated)g(by)g(our)h(C)f(front-end,)h(with)g(LL)
-17 b(VM)42 b(comments)f(added:)448 9771 y Fh(\045RT)89
b(=)g(type)g({)g(sbyte,)f([10)g(x)i([20)e(x)i(int]],)d(sbyte)h(})448
9972 y(\045ST)h(=)g(type)g({)g(int,)f(double,)g(\045RT)g(})448
10374 y(;)i(Define)d(function)g('foo',)h(returning)f(an)i('int*',)e
(taking)g(an)i('ST*':)448 10575 y(int*)g(\045foo\(\045ST*)d(\045s\))j
({)628 10776 y(;)g(Perform)e(the)i(indexing...)3858 11160
y Fq(6)p eop
%%Page: 7 7
7 6 bop 628 166 a Fh(\045tmp)88 b(=)h(getelementptr)d(\045ST*)i(\045s,)
h(uint)f(1,)h(ubyte)f(2,)h(ubyte)f(1,)h(uint)f(5,)h(uint)f(13)628
367 y(ret)g(int*)h(\045tmp)805 b(;)90 b(Return)d(the)i(computed)e
(value)448 568 y(})249 940 y Fq(This)60 b(LL)-17 b(VM)61
b(code)f(illustrates)g(that)g(LL)-17 b(VM)60 b(identi\002ers)h(\(type)f
(and)g(v)l(alue)f(names\))h(start)g(with)g(a)g Fn(\045)g
Fq(character)f(\(to)i(pre)l(v)n(ent)0 1160 y(namespace)43
b(collisions)h(with)g(reserv)n(ed)f(w)n(ords\),)i(sho)l(ws)e(some)h(e)n
(xamples)f(of)i(complicated)e(nested)h(types,)g(and)g(sho)l(ws)f(an)h
(LL)-17 b(VM)0 1379 y(function)43 b(de\002nition.)54
b(Additionally)-11 b(,)43 b(it)f(sho)l(ws)f(ho)l(w)i(useful)f(named)g
(types)g(are)g(for)h(hand)f(inspection)g(of)g(code)g(\(without)h
(symbolic)0 1598 y(names)e(pro)n(vided)g(by)h(the)f(C)g(compiler)-7
b(,)42 b(the)f(types)g(w)n(ould)h(all)g(be)f(e)n(xpanded)f(out)i
(inline,)f(making)h(them)g(less)e(manag)o(able\).)0 2094
y Fl(3.6)198 b(Distinguishing)49 b(safe)h(and)f(unsafe)g(code:)63
b(the)50 b Fu(cast)e Fl(instruction)0 2425 y Fq(There)h(are)g(tw)n(o)h
(broad)f(reasons)f(wh)o(y)h(type)g(con)-7 b(v)n(ersions)48
b(may)h(be)g(required)h(in)f(programs:)67 b(\(a\))49
b(e)n(xplicit)g(con)-7 b(v)n(ersions)48 b(of)i(a)f(v)l(alue)0
2645 y(from)k(one)f(type)h(to)g(another)-7 b(,)55 b(which)d(may)g(or)h
(may)f(require)h(manipulating)g(the)f(data)g(\(e.g.,)i(inte)n(ger)e(to)
h(\003oating)g(point)g(or)f(signed)0 2864 y(inte)n(ger)42
b(to)g(unsigned\),)g(and)g(\(b\))h(reinterpreting)f(data)g(of)h(one)f
(type)g(as)f(data)h(of)h(another)f(type)g(\(e.g.,)f(treating)h(data)g
(in)g(memory)h(as)e(a)0 3083 y(linear)h(sequence)e(of)h(bytes)g
(instead)g(of)h(an)f(array)h(of)g(inte)n(gers\).)249
3302 y(In)52 b(LL)-17 b(VM,)52 b(type)g(con)-7 b(v)n(ersions)51
b(can)g(only)h(happen)f(in)h(one)g(carefully)f(controlled)i(w)n(ay:)72
b(the)51 b Fn(cast)g Fq(instruction.)82 b(The)51 b Fn(cast)0
3521 y Fq(instruction)42 b(con)-7 b(v)n(erts)41 b(a)g(v)l(alue)g(from)h
(one)g(type)f(to)h(another)-9 b(.)51 b(Some)41 b(e)n(xamples)f(are:)628
3876 y Fh(\045Y)89 b(=)g(cast)f(int)h(\045X)g(to)g(double)805
b(;)89 b(requires)e(data)h(conversion)628 4076 y(\045J)h(=)g(cast)f
(int)h(\045I)g(to)g(long)985 b(;)89 b(may)g(require)e(data)h
(conversion)628 4277 y(\045J)h(=)g(cast)f(int)h(\045I)g(to)g(uint)985
b(;)89 b(no)g(data)g(conversion)d(needed)628 4478 y(\045q)j(=)g(cast)f
(int)268 b(\045pd)89 b(to)g(double*)446 b(;)89 b(no)g(data)g
(conversion)d(needed;)h(may)i(be)g(unsafe)628 4679 y(\045r)g(=)g(cast)f
(void*)g(\045pi)h(to)g(QItem*)536 b(;)89 b(no)g(data)g(conversion)d
(needed;)h(may)i(be)g(unsafe)249 5052 y Fq(The)43 b(cast)f(instruction)
i(tak)n(es)e(the)h(place)g(of)g(typical)g(sign)g(e)n(xtension)f
(instructions)h(\(signed)g(and)f(unsigned)h(types)f(are)h(distinct\),)0
5271 y(as)k(well)g(as)g(inte)n(ger/\003oating)h(point)g(con)-7
b(v)n(ersion)47 b(instructions.)69 b(The)48 b(cast)f(is)g(also)g(used)g
(for)h(operations)g(that)f(do)h(not)g(alter)f(data)h(as)0
5490 y(well,)41 b(such)g(as)g(con)-7 b(v)n(erting)41
b(a)g(signed)g(inte)n(ger)h(to)f(an)h(unsigned)f(inte)n(ger)g(of)h(the)
f(same)g(size.)249 5709 y(Because)46 b(LL)-17 b(VM)48
b(is)f(intended)g(as)g(a)g(general-purpose)g(lo)l(w-le)l(v)n(el)g
(instruction)g(set,)h(it)g(must)f(represent)g(both)h(\223type-safe\224)
e(and)0 5928 y(\223type-unsafe')61 b(programs)h(for)h(arbitrary)f
(high-le)l(v)n(el)f(languages)3936 5868 y Fm(2)4005 5928
y Fq(.)112 b(Ne)l(v)n(ertheless,)64 b(distinguishing)e(between)f(safe)g
(and)h(unsafe)0 6148 y(operations)41 b(is)h(important)g(because)e(man)n
(y)h(memory-oriented)h(optimizations)g(may)f(only)h(be)f(le)n(g)o(al)g
(for)h(safe)f(programs.)249 6367 y(W)-13 b(e)53 b(consider)h(an)g(LL)
-17 b(VM)55 b(program)g(to)f(be)g Fp(type-safe)g Fq(if)g(no)h
Fn(cast)d Fq(instruction)j(con)-7 b(v)n(erts)53 b(a)h(non-pointer)h
(type)f(to)h(a)f(pointer)0 6586 y(type)49 b(or)g(a)f(pointer)h(of)g
(one)f(type)h(to)g(a)f(pointer)h(of)g(another)g(type)f(\(in)h(other)g
(w)n(ords,)h(no)f(casts)e Fp(to)i Fq(a)g(pointer)g(type)f(are)g(allo)l
(wed\).)73 b(In)0 6805 y(the)42 b(e)n(xample)f(abo)n(v)n(e,)e(the)j
(last)f(tw)n(o)i(cast)e(instructions)g(are)h(unsafe.)51
b(Such)42 b(pointer)g(casts)f(are)g Fp(the)h(only)f(way)h
Fq(that)g(operations)f(of)h(the)0 7024 y(second)f(type)g(abo)n(v)n(e)f
(\(that)i(reintepret)g(data)f(in)h(memory\))g(can)f(be)g(encoded)g(in)g
(LL)-17 b(VM.)249 7243 y(Some)46 b(unsafe)g(programs)g(by)h(this)f
(de\002nition)g(are)g(truly)h(unsafe:)60 b(their)47 b(results)f(depend)
f(on)i(the)f(speci\002c)f(layout)h(of)h(their)f(data)0
7463 y(structures)39 b(in)h(memory)-11 b(.)51 b(Unfortunately)-11
b(,)41 b(there)e(is)h(one)f(common)h(class)f(of)h(programs)g(where)f
(this)h(de\002nition)g(is)g(too)f(conserv)l(ati)l(v)n(e:)0
7682 y(man)n(y)64 b(languages)f(implement)i(container)f(types)g
(\(e.g.,)69 b(a)64 b(hashtable)g(in)g(C\))h(with)g(generic)f(reference)
g(types)g(\(e.g.,)k Fn(void*)63 b Fq(in)0 7901 y(C\),)57
b(which)g(need)f(to)h(be)g(cast)g(to)g(the)g(actual)f(reference)h(type)
g(as)f(the)n(y)h(are)g(accessed.)95 b(Such)57 b(programs)h(may)f(be)g
(quite)g(safe)f(b)m(ut)0 8120 y(requires)c(more)g(analysis)f(to)h(pro)n
(v)n(e)f(as)g(safe.)82 b(W)-7 b(ithout)52 b(such)g(an)f(analysis,)i
(the)f(cast)f(operations)h(cannot)g(be)f(eliminated)h(and)g(the)0
8339 y(program)f(must)g(be)f(treated)h(as)f(unsafe.)77
b(W)-13 b(e)50 b(ha)m(v)n(e)f(a)i(future)g(project)g(planned)f(to)h(e)n
(xtend)f(the)g(LL)-17 b(VM)52 b(type)e(system)g(to)h(eliminate)0
8559 y(this)41 b(de\002cienc)n(y)-11 b(.)249 8778 y(If)59
b(a)e(program)i(is)f(type-safe)f(by)h(the)g(abo)n(v)n(e)e
(de\002nition,)63 b(type)58 b(information)h(can)e(be)h(e)n(xploited)f
(during)i(important)f(analyses)0 8997 y(such)49 b(as)g(alias)f
(analysis,)i(and)g(data)f(structure)g(reor)m(g)o(anization)h
(transformations)g(can)f(be)g(safely)g(applied)g(to)h(it)6607
8937 y Fm(3)6677 8997 y Fq(.)75 b(If)50 b(a)f(program)h(is)0
9216 y(completely)55 b(type-safe,)i(its)e(LL)-17 b(VM)56
b(code)e(can)g(use)h(the)f Fn(getelementptr)d Fq(instruction)k(for)g
(all)g(pointer)h(arithmetic,)i(without)p 0 9531 3120
7 v 181 9642 a Fk(2)239 9690 y Fj(This)38 b(is)f(one)h(of)h(the)f(w)o
(ays)f(LL)-13 b(VM)38 b(dif)m(fers)f(from)i(T)-11 b(yped)40
b(Assembly)e(Language[21)r(],)i(which)e(focuses)g(on)g(program)i
(safety)e(and)g(therefore)h(does)f(not)g(support)0 9848
y(type-unsafe)d(programs,)g(whereas)e(LL)-13 b(VM)34
b(is)e(aimed)i(at)f(both)i(optimization)g(performance)g(and)f(program)h
(safety)-9 b(.)181 9963 y Fk(3)239 10011 y Fj(Note)34
b(that)f(programs)i(which)f(ha)m(v)n(e)h(\223unde\002ned)g(beha)m
(vior\224,)h(e.g.,)e(by)h(accessing)e(memory)i(that)f(has)f(been)h
Ff(free)p Fj(')-7 b(d)34 b(or)g(using)g(out-of-range)i(array)e
(subscripts,)0 10169 y(are)f(still)e(be)i(considered)h
(\223type-safe\224)f(by)g(our)h(de\002nition.)42 b(This)33
b(is)f(appropriate)i(because)f(such)g(beha)m(vior)h(does)f(not)g
(preclude)h(transformations:)42 b(the)33 b(compiler)h(can)0
10327 y(le)n(g)o(ally)d(change)g(the)f(beha)m(vior)j(of)d(such)h
(programs,)h(without)f(ha)m(ving)h(to)f(detect)f(an)n(y)h(correctness)f
(violations)h(that)f(result)h(from)g(unde\002ned)h(beha)m(vior)-7
b(.)42 b(In)30 b(a)g(language)0 10485 y(with)37 b(stricter)h(safety)f
(requirements,)j(such)e(as)f(Ja)m(v)m(a)g(or)h(F)n(ortran)g(90,)i(the)d
(additional)i(\223type-safety\224)f(checks)g(required)h(by)f(the)f
(language)i(should)g(be)e(implemented)0 10642 y(with)d(e)n(xplicit)g
(LL)-13 b(VM)33 b(code)i(\(for)f(e)n(xample,)h(conditional)g(branches)g
(on)f(the)g(bounds)i(of)e(the)g(array\))g(and)h(then)f(optimized,)h
(just)f(as)f(the)n(y)h(w)o(ould)g(be)g(in)g(the)g(lo)m(w-le)m(v)n(el)0
10800 y(representations)g(within)g(standard)g(static)f(compilers.)3858
11160 y Fq(7)p eop
%%Page: 8 8
8 7 bop 0 166 a Fq(requiring)48 b(an)n(y)e(unsafe)h(casts.)67
b(F)n(or)47 b(e)n(xample,)g(gi)l(v)n(en)g(a)g(language)f(with)i
(pointer)f(arithmetic,)i(nai)l(v)n(e)d(compilation)h(can)g(cause)f
(type)0 385 y(violations.)51 b(F)n(or)42 b(e)n(xample,)e(consider)h
(this)g(C)h(code:)448 752 y Fh(int)89 b(*A)g(=)g(...,)g(*P)g(=)g(A;)448
953 y(while)f(\(P)h(!=)g(A+Size\))f({)628 1154 y(*P)h(=)g(*P)g(+)g(1;)
628 1355 y(++P;)1164 b(/*)89 b(Pointer)e(arithmetic!)f(*/)448
1556 y(})249 1941 y Fq(The)42 b(pointer)g(arithmetic)f(in)h(the)g(last)
f(statement)g(could)g(be)g(compiled)h(initially)g(into)g(this)f
(snippet)h(of)f(LL)-17 b(VM)43 b(code:)448 2308 y Fh(\045tmp)178
b(=)90 b(cast)e(int*)g(\045P1)h(to)g(long)895 b(;)90
b(Convert)d(pointer)g(to)i(integral)e(type)h(for)h(add)448
2509 y(\045tmp2)f(=)i(add)178 b(long)88 b(\045tmp,)g(4)1255
b(;)90 b(Add)e(offset)g(to)h(integral)e(value)448 2710
y(\045P2)268 b(=)90 b(cast)e(long)g(\045tmp2)g(to)h(int*)716
b(;)90 b(Convert)d(result)g(back)i(to)g(pointer)e(\(unsafe!\))249
3095 y Fq(The)51 b Fn(\045P2)f Fq(cast)g(is)g(not)h(type-safe)g
(because)e(an)i(arbitrary)g(v)l(alue)g(is)f(being)h(cast)f(to)h(a)g
(pointer)-7 b(,)53 b(and)e(although)g(in)g(this)f(case)g(the)0
3314 y(result)41 b(happens)f(to)h(be)g(a)g(v)l(alid)g(inte)n(ger)f
(pointer)-7 b(,)42 b(the)f(compiler)g(cannot)g(kno)l(w)g(that)g
(without)g(further)h(analysis.)50 b(In)41 b(the)g(case)f(abo)n(v)n(e,)0
3533 y(ho)l(we)l(v)n(er)-7 b(,)43 b(simple)g(induction)g(v)l(ariable)h
(analysis)e(can)h(con)-7 b(v)n(ert)43 b(the)g(code)g(to)h(use)e(array)i
(subscripting,)f(or)h(the)f Fn(getelementptr)0 3753 y
Fq(instruction)f(could)f(be)h(used)e(to)i(directly)g(na)m(vig)o(ate)f
(the)g(array)h(in)f(a)h(type-safe)4548 3692 y Fm(4)4658
3753 y Fq(manner:)448 4120 y Fh(\045P2)89 b(=)g(getelementptr)d(int*)i
(\045P1,)g(uint)h(1)268 b(;)90 b(Get)e(pointer)f(to)i(next)g(integer)
249 4505 y Fq(In)61 b(practice,)k(man)n(y)60 b(C)h(programs)g(are)f
(completely)h(or)g(mostly)g(type-safe)f(according)h(to)g(the)f(abo)n(v)
n(e)g(de\002nition,)65 b(and)c(most)0 4724 y(unsafe)d(cast)f
(operations)h(can)g(be)g(eliminated)h(from)g(such)f(programs)g(through)
h(simple)f(transformations.)102 b(Ne)l(v)n(ertheless,)60
b(there)0 4943 y(are)52 b(some)g(programs)h(that)f(intrinsically)h
(must)f(use)g(unsafe)g(operations)g(\(such)g(as)g(casting)g(a)g
(speci\002c)f(inte)n(ger)-7 b(,)55 b(representing)d(the)0
5162 y(address)36 b(of)i(a)f(memory-mapped)h(hardw)n(are)f(de)l(vice,)g
(to)h(a)f(pointer\),)h(which)f(cannot)g(be)g(con)-7 b(v)n(erted)37
b(to)h(use)f(the)g Fn(getelementptr)0 5382 y Fq(instruction.)82
b(In)52 b(these)f(cases,)h(the)g Fn(cast)e Fq(instruction)i(in)g(LL)-17
b(VM)53 b(gi)l(v)n(es)d(critical)i(information)h(about)f
Fp(when)f Fq(the)h(type)f(system)g(is)0 5601 y(being)36
b(violated,)g(impro)n(ving)h(analyses)d(and)i(allo)l(wing)g(for)g
(straightforw)n(ard)h(determination)f(of)g(whether)g(a)g
(transformation)g(is)g Fp(safe)p Fq(.)0 6099 y Fl(3.7)198
b(Explicit)51 b(Memory)g(Allocation)0 6430 y Fq(Some)57
b(of)f(the)h(hardest)e(programs)i(to)g(adequately)e(optimize)i(are)f
(memory)h(bound)f(programs)h(that)f(mak)n(e)g(e)n(xtensi)l(v)n(e)f(use)
g(of)i(the)0 6650 y(heap)43 b(and)g(comple)n(x)f(data)h(structures.)56
b(T)-13 b(o)43 b(better)g(e)n(xpose)f(memory)i(allocation)f(patterns)g
(to)g(the)g(compiler)-7 b(,)44 b(we)e(ha)m(v)n(e)g(added)h(typed)0
6869 y(memory)53 b(allocation)g(instructions)g(to)g(the)g(instruction)g
(set.)85 b(The)53 b Fn(malloc)e Fq(instruction)i(allocates)f(one)g(or)i
(more)f(elements)f(of)h(a)0 7088 y(speci\002c)c(type)h(on)f(the)h
(heap,)h(returning)f(a)g(typed)f(pointer)h(to)g(the)g(ne)l(w)f(memory)
-11 b(.)76 b(The)50 b Fn(free)f Fq(instruction)h(releases)e(the)i
(memory)0 7307 y(allocated)j(through)i(the)f Fn(malloc)d
Fq(instruction)2842 7247 y Fm(5)2912 7307 y Fq(.)88 b(The)55
b Fn(alloca)c Fq(instruction)j(is)g(similar)g(to)g Fn(malloc)e
Fq(e)n(xcept)h(that)h(it)g(allocates)0 7526 y(memory)c(in)f(the)g
(stack)g(frame)g(of)g(the)h(current)f(function)h(instead)e(of)i(the)f
(heap,)h(and)f(the)g(memory)h(is)f(automatically)g(deallocated)0
7746 y(on)42 b(return)g(from)g(the)f(function.)249 7965
y(These)59 b(instructions)h(are)f(essential)f(for)i(preserving)g(the)f
(type-safety)g(of)h(our)g(representation)f(\(the)h(normal)g(C)f
Fn(malloc\(\))0 8184 y Fq(function)47 b(returns)f(an)g(untyped)g
(pointer)h(that)f(must)g(be)g(cast)g(to)g(the)g(appropriate)g(type\),)i
(and)e(ha)m(v)n(e)e(enabled)i(ne)l(w)g(transformations)0
8403 y(that)34 b(w)n(ould)h(be)f(v)n(ery)g(dif)l(\002cult)h(without)g
(them)g(\(for)g(e)n(xample,)f Fp(safe)g Fq(automatic)g(pool)h
(allocation)f(and)g(data)g(structure)h(reor)m(g)o(anization)0
8622 y(for)42 b(C)f(programs)h([20]\).)0 9121 y Fl(3.8)198
b(Function)50 b(calls)g(and)f(exceptions)0 9452 y Fq(LL)-17
b(VM)37 b(pro)n(vides)e(tw)n(o)h(function)g(call)g(instructions,)g
(which)g(abstract)f(a)n(w)n(ay)g(the)h(calling)g(con)-7
b(v)n(entions)35 b(of)h(the)g(underlying)g(machine,)0
9671 y(simplify)47 b(program)f(analysis,)g(and)g(pro)n(vide)g(support)g
(for)h(e)n(xception)e(handling.)65 b(The)46 b(simple)g
Fn(call)f Fq(instruction)h(tak)n(es)g(a)g(pointer)0 9890
y(to)e(a)g(function)h(to)f(call,)g(as)g(well)g(as)f(the)h(ar)m(guments)
g(to)g(pass)g(in)g(\(which)g(are)g(passed)f(by)h(v)l(alue\).)59
b(Although)44 b(all)g Fn(call)f Fq(instructions)p 0 10215
3120 7 v 181 10326 a Fk(4)239 10375 y Fj(This)33 b(e)n(xample)i(also)e
(sho)m(ws)g(an)h(instance)f(where)h(out)g(of)g(range)g(array)g(access)e
(w)o(ould)i(not)g(and)g(could)h(not)f(be)f(trapped.)181
10490 y Fk(5)239 10538 y Fj(When)k(nati)m(v)n(e)f(code)g(is)f
(generated)i(for)g(a)e(program,)k Ff(malloc)34 b Fj(and)i
Ff(free)e Fj(instructions)j(are)f(con)-5 b(v)n(erted)37
b(to)f(the)g(appropriate)h(nati)m(v)n(e)f(function)i(calls,)d(allo)m
(wing)0 10696 y(custom)f(memory)h(allocators)f(to)f(be)h(used.)3858
11160 y Fq(8)p eop
%%Page: 9 9
9 8 bop 0 166 a Fq(tak)n(e)60 b(a)g(function)g(pointer)g(to)g(in)-7
b(v)m(ok)n(e)61 b(\(and)f(are)f(thus)h(seemingly)g(indirect)g(calls\),)
k(for)c(direct)g(calls,)k(the)59 b(ar)m(gument)i(is)e(a)h(global)0
385 y(constant)43 b(\(the)h(address)f(of)h(a)f(function\).)58
b(This)44 b(common)g(case)e(can)h(easily)g(be)h(identi\002ed)g(simply)f
(by)h(checking)f(if)h(the)g(pointer)g(is)f(a)0 604 y(global)d
(constant.)49 b(The)40 b(second)e(function)i(call)f(instruction)h(pro)n
(vided)f(by)h(LL)-17 b(VM)40 b(is)f(the)g Fn(invoke)f
Fq(instruction,)h(which)g(is)h(used)e(for)0 824 y(languages)j(with)g(e)
n(xception)g(handling.)249 1043 y(LL)-17 b(VM)32 b(implements)g(a)f
(stack)g(unwinding)h([24])g(mechanism)f(for)h(\223zero)f(cost\224)g(e)n
(xception)f(handling.)48 b(A)32 b(\223zero)f(cost\224)f(e)n(xception-)0
1262 y(handling)52 b(model)f(indicates)g(that)g(the)h(presence)e(of)i
(e)n(xception)e(handling)i(causes)e(no)h(e)n(xtra)g(instructions)g(to)h
(be)f(e)n(x)n(ecuted)f(by)h(the)0 1481 y(program)h(if)g(no)f(e)n
(xceptions)f(are)h(thro)l(wn.)81 b(When)50 b(an)h(e)n(xception)g(is)g
(thro)l(wn,)i(the)e(stack)g(is)g(unw)n(ound,)j(stepping)d(through)g
(the)h(re-)0 1700 y(turn)46 b(addresses)e(of)j(function)f(calls)f(on)h
(the)g(stack.)63 b(The)46 b(LL)-17 b(VM)47 b(runtime)f(k)n(eeps)f(a)h
(static)f(map)h(of)g(return)h(addresses)d(to)i(e)n(xception)0
1919 y(handler)41 b(blocks)h(that)f(is)g(used)g(to)h(in)-7
b(v)m(ok)n(e)42 b(handlers)f(when)g(unwinding.)249 2139
y(In)60 b(order)h(to)f(b)m(uild)g(this)g(static)f(map)h(of)g(handler)g
(information,)65 b(LL)-17 b(VM)61 b(pro)n(vides)e(an)h
Fn(invoke)e Fq(instruction)i(that)g(tak)n(es)f(an)0 2358
y(e)n(xception)j(handler)h(label)g(in)h(addition)f(to)g(the)h(function)
f(pointer)h(and)f(ar)m(gument)g(operands)g(of)g(a)g(normal)g
Fn(call)f Fq(instruction.)0 2577 y(When)c(code)g(generation)g(occurs,)k
(the)c(return)h(address)e(of)i(an)f(in)-7 b(v)m(ok)n(e)59
b(instruction)g(is)f(associated)f(with)h(the)h(e)n(xception)e(handler)0
2796 y(label)41 b(speci\002ed,)g(allo)l(wing)g(the)h(e)n(xception)e
(handling/cleanup)h(routine)h(to)g(be)f(in)-7 b(v)m(ok)n(ed)42
b(when)f(the)h(stack)e(frame)i(is)f(unw)n(ound.)249 3015
y(The)k Fn(invoke)e Fq(instruction)i(is)g(capable)f(of)i(representing)e
(high-le)l(v)n(el)h(e)n(xceptions)f(directly)h(in)g(LL)-17
b(VM,)46 b(using)e(only)i(lo)l(w-le)l(v)n(el)0 3235 y(concepts)58
b(\(return)h(address)f(to)h(handler)g(map\).)103 b(This)59
b(also)g(mak)n(es)f(LL)-17 b(VM)60 b(independent)e(of)h(the)g(source)f
(languages)g(e)n(xception)0 3454 y(handling)40 b(semantics.)49
b(In)40 b(this)g(representation,)f(e)n(xception)g(edges)g(are)g
(directly)h(speci\002ed)g(and)f(visible)h(to)g(the)f(LL)-17
b(VM)41 b(frame)l(w)n(ork,)0 3673 y(pre)l(v)n(enting)60
b(unnecessary)e(pessimization)i(of)g(optimizations)h(when)e(e)n
(xceptions)g(are)h(possible.)107 b(This)60 b(e)n(xample)f(illustrates)h
(the)0 3892 y Fn(invoke)39 b Fq(instruction)j(in)g(the)f(conte)n(xt)g
(of)h(C++:)628 4259 y Fh(...)628 4460 y(Class)88 b(Object;)446
b(//)89 b(Has)f(a)i(destructor)628 4661 y(func\(\);)984
b(//)89 b(Could)f(throw)628 4862 y(...)249 5247 y Fq(The)45
b(k)n(e)n(y)f(thing)g(to)h(note)f(with)h(this)f(v)n(ery)g(simple)g(e)n
(xample)f(is)i(that)f(C++)f(guarantees)h(that)g(the)g(destructors)g(of)
h(stack)f(allocated)0 5466 y(objects)62 b(will)h(be)f(in)-7
b(v)m(ok)n(ed)63 b(if)g(an)f(e)n(xception)f(is)i(propog)o(ated)f
(through)h(the)g(current)f(stack)g(frame.)114 b(T)-6
b(ranslated)63 b(to)f(LL)-17 b(VM,)63 b(this)0 5685 y(becomes:)628
6052 y Fh(...)628 6253 y(\045Object)87 b(=)i(alloca)f(\045Class)536
b(;)89 b(Stack)f(allocate)f(object)628 6454 y(;)i(...)g(call)f
(constructor)e(on)j(\045Object)e(...)628 6655 y(invoke)g(void)i
(\045func\(\))1255 6856 y(to)g(label)f(\045Ok)h(except)f(label)g
(\045Exception)0 7057 y(Ok:)628 7258 y(;)h(...)g(execution)d
(continues...)0 7459 y(Exception:)628 7660 y(;)j(...)g(call)f
(destructor)e(on)j(\045Object)f(...)628 7861 y(call)g(void)g
(\045rethrow\(\))1342 b(;)89 b(Rethrow)f(current)f(exception)249
8246 y Fq(The)41 b Fn(invoke)e Fq(instruction)i(associates)e(an)h(e)n
(xception)g(handler)h(to)g(call)f(if)i(an)e(e)n(xception)g(is)h(propog)
o(ated)g(through)g(the)g(in)-7 b(v)m(ok)n(ed)0 8465 y(function.)76
b(In)50 b(this)f(e)n(xample,)h(this)g(is)f(used)g(to)h(in)-7
b(v)m(ok)n(e)50 b(the)f(destructor)h(of)g(a)f(local)h(object.)75
b(In)50 b(the)f(conte)n(xt)g(of)h(the)f(Ja)m(v)l(a)g(language)0
8684 y(\(which)j(does)g(not)g(ha)m(v)n(e)f(to)h(call)g(destructors)g
(when)f(unwinding\),)k(the)d Fn(invoke)e Fq(instruction)j(is)f(used)f
(to)h(unlock)g(locks)g(that)g(are)0 8903 y(aquired)c(through)g
(synchronized)f(blocks)g(or)h(methods.)69 b(In)48 b(an)n(y)f(language,)
h(a)f Fn(catch)f Fq(clause)g(w)n(ould)i(be)g(implemented)f(in)h(terms)0
9123 y(of)42 b(an)f(e)n(xception)g(destination.)249 9342
y(Although)d(we)f(currently)h(do)f(not)h(ha)m(v)n(e)e(a)h(front-end)i
(that)e(uses)g(the)g(e)n(xception)g(handling)g(support)h(b)m(uilt)g
(into)g(LL)-17 b(VM,)37 b(all)h(of)g(our)0 9561 y(optimizations)e(and)f
(transformations)h(are)g(a)n(w)n(are)f(of)h(the)g(e)n(xceptional)e
(control)j(\003o)l(w)e(edges,)h(and)g(our)g(unit)g(tests)f(w)n(ork)h
(as)f(designed.)0 10059 y Fl(3.9)198 b(F)-5 b(ew)50 b(special)h(cases)0
10391 y Fq(Being)g(able)g(to)g(design)g(our)h(representation)f(without)
g(concern)g(for)h(le)n(g)o(ac)n(y)e(compiler)h(code)g(has)g(gi)l(v)n
(en)f(us)h(the)g(ability)h(to)f(design)0 10610 y(a)56
b(simple)h(orthogonal)g(instruction)g(set)g(with)f(fe)l(w)h(special)f
(cases)f(to)i(consider)-9 b(.)96 b(Special)56 b(cases)g(in)g
(representations)g(complicate)3858 11160 y(9)p eop
%%Page: 10 10
10 9 bop 0 166 a Fq(transformations)55 b(in)g(subtle)f(w)n(ays)h(that)g
(mak)n(e)f(them)h(dif)l(\002cult)h(to)f(write,)i(and)e(subject)f(to)h
(nef)n(arious)g(b)m(ugs.)90 b(Some)55 b(e)n(xamples)f(of)0
385 y(special-case)40 b(features)h(that)g(are)h(unnecessary)d(in)j(LL)
-17 b(VM)42 b(are)g(an)f(\223address-of)9 b(\224)41 b(operator)g(and)h
(an)f(\223indirect)g(call\224)g(instruction.)249 604
y(In)j(LL)-17 b(VM,)43 b(all)g(addressable)f(objects)h(\(stack)f
(allocated)h(locals,)f(global)i(v)l(ariables,)e(functions,)h
(dynamically)g(allocated)g(mem-)0 824 y(ory\))38 b(are)f(all)g(e)n
(xplicitly)g(allocated.)49 b(Stack)37 b(allocated)g(locals)f(are)h(all)
h(e)n(xplicitly)f(allocated)f(using)h(the)g Fn(alloca)e
Fq(instruction)j(\(which)0 1043 y(is)50 b(the)g(analog)g(of)g
Fn(malloc)e Fq(that)i(allocates)g(memory)g(from)h(the)f(stack)g
(instead)f(of)i(the)f(heap\).)76 b(Functions)51 b(and)e(global)i(v)l
(ariables)0 1262 y(\(collecti)l(v)n(ely)h(referred)i(to)f(as)f
(\223global)h(v)l(alues\224\))f(declare)h(re)n(gions)f(of)i(statically)
e(allocated)h(memory)g(that)g(are)g(accessed)e(though)0
1481 y(the)i(address)g(of)h(the)f(object)h(\(the)f(name)g(of)h(the)g
(global)f(v)l(alue)g(refers)h(to)g(the)f(address\).)86
b(Heap)53 b(allocated)g(memory)h(is)f(ob)n(viously)0
1700 y(allocated)44 b(with)g(the)g Fn(malloc)e Fq(instruction.)59
b(Because)43 b(memory)h(objects)g(are)g(al)n(w)n(ays)g(refered)g(to)g
(by)g(their)h(address,)e(an)h(\223address-)0 1919 y(of)9
b(\224)42 b(operator)g(is)f(simply)h(unneccesary)-11
b(.)50 b(This)42 b(representation)g(also)f(simpli\002es)g(memory)h
(access)e(analysis,)g(since)h(there)h(cannot)f(be)0 2139
y(implicit)h(accesses)d(to)j(memory)-11 b(.)51 b(All)42
b(memory)g(traf)l(\002c)g(occurs)f(when)g(\223load\224)g(and)g
(\223store\224)g(instructions)g(e)n(x)n(ecute.)249 2358
y(As)55 b(mentioned)h(in)g(Section)g(3.8,)i(LL)-17 b(VM)56
b(also)g(does)f(not)h(ha)m(v)n(e)e(an)h(\223indirect)h(call\224)f
(instruction)h(in)g(addition)g(to)g(the)g(normal)0 2577
y Fn(call)44 b Fq(instruction.)62 b(This)46 b(is)f(because)e(the)j
(standard)e Fn(call)g Fq(instruction)i(tak)n(es)e(a)h(pointer)h(to)f
(function)h(ar)m(gument)f(along)h(with)f(the)0 2796 y(rest)g(of)g(the)g
(ar)m(guments)f(to)i(pass)d(to)i(the)g(function,)h(instead)e(of)i(a)e
(function)i(as)e(a)g(special)g(part)i(of)f(the)g(instruction.)61
b(Ef)l(fecti)l(v)n(ely)45 b(this)0 3015 y(means)39 b(that)g(all)h
(function)g(calls)f(are)g(represented)g(as)f(indirect)i(calls,)f
(although)h(most)f(of)h(them)f(ha)m(v)n(e)g(a)g(function)h(address)e(e)
n(xplicitly)0 3235 y(passed)i(in)i(as)f(the)g(\002rst)h(ar)m(gument.)
249 3454 y(W)-13 b(e)40 b(chose)g(to)h(mak)n(e)f(the)h(def)n(ault)g
(capabilities)f(of)h(the)g Fn(call)e Fq(instruction)i(allo)l(w)f(for)i
(indirect)f(calls,)e(to)i(reduce)g(the)f(size)g(of)h(the)0
3673 y(instruction)g(set)f(\(we)h(w)n(ould)g(ha)m(v)n(e)e(to)i(add)g
(an)f(\223indirect)h(call\224)f(as)g(well)h(as)f(an)g(\223indirect)h
(in)-7 b(v)m(ok)n(e\224)41 b(instruction)g(to)g(allo)l(w)f(for)h
(generic)0 3892 y(indirect)53 b(calls)e(in)i(the)f(nai)l(v)n(e)f
(manner\),)k(and)d(encourage)g(transformations)g(to)h(implement)f(the)g
(general)g(case)f(before)i(the)f(special)0 4111 y(case)e(\(which)h
(remains)g(easy)f(to)h(support\).)80 b(This)52 b(e)n(xample)e(sho)l(ws)
g(ho)l(w)h(global)g(v)l(alues)f(\(in)i(this)f(case)f(functions\))h(are)
g(treated)g(as)0 4330 y(pointers)41 b(to)h(their)g(declared)f(type:)448
4697 y Fh(void)89 b(\045func\(int\))d({)j(...)g(})448
5099 y(void)g(\045calltest\(void)c(\(int\)*)i(\045FuncPtr,)g(int)i
(\045Val\))f({)628 5300 y(;)h(Call)f(the)h("func")f(function)f
(directly,)f(passing)i(in)h(Val)f(as)h(its)g(argument...)628
5501 y(call)f(void)g(\(int\)*)g(\045func\(int)f(\045Val\))628
5903 y(;)i(Call)f(the)h(function)e(pointer,)g(passing)g(in)i(Val)g(as)g
(its)f(argument...)628 6104 y(call)g(void)g(\(int\)*)g
(\045FuncPtr\(int)e(\045Val\))628 6305 y(ret)i(void)448
6506 y(})448 6907 y(int)h(\045main\(\))e({)717 7108 y(;)j(Invoke)d(the)
i("calltest")d(function,)h(passing)g(in)i("func")f(as)h(a)g(function)e
(pointer...)717 7309 y(call)i(void)f(\(void\(int\)*,)e(int\)*)i
(\045calltest\(void)d(\(int\)*)i(\045func,)h(int)g(42\))717
7510 y(ret)h(int)g(0)448 7711 y(})249 8096 y Fq(Man)n(y)55
b(other)i(small)f(features)g(such)f(as)h(the)g(tw)n(o)h(abo)n(v)n(e)e
(combine)h(together)g(to)h(mak)n(e)f(it)h(signi\002cally)f(simpler)g
(to)h(write)f(and)0 8316 y(maintain)43 b(analyses)f(and)h
(transformations)g(for)h(a)e(v)l(ariety)i(of)f(purposes.)55
b(Because)41 b(of)j(this,)e(our)i(compiler)f(infrastructure)h(is)f
(easily)0 8535 y(e)n(xtended)d(and)i(has)f(de)l(v)n(eloped)f(po)l
(werful)i(features)f(v)n(ery)g(rapidly)-11 b(.)0 9125
y Fr(4)239 b(LL)-22 b(VM)60 b(T)-18 b(ransf)-6 b(ormations)0
9516 y Fq(LL)-17 b(VM)47 b(is)g(a)f(rapidly)h(maturing)h
(infrastructure)f(for)g(compiler)g(de)l(v)n(elopment)f(and)g(research.)
66 b(Man)n(y)46 b(LL)-17 b(VM-to-LL)g(VM)49 b(transfor)m(-)0
9735 y(mations)38 b(ha)m(v)n(e)e(been)i(implemented)g(so)f(f)n(ar)i
(\(in)f(v)n(ery)f(little)i(time\),)f(sho)l(wing)g(that)g(the)g(LL)-17
b(VM)38 b(infrastructure)h(is)e(po)l(werful)h(and)g(easy)0
9954 y(to)54 b(use.)89 b(This)55 b(section)e(describes)h(some)f(of)i
(the)f(more)h(interesting)f(transformations)h(that)f(are)g(a)m(v)l
(ailable)f(as)h(part)g(of)h(the)f(LL)-17 b(VM)0 10174
y(infrastructure.)3817 11160 y(10)p eop
%%Page: 11 11
11 10 bop 0 166 a Fl(4.1)198 b(T)-15 b(raditional)51
b(Data)e(Flo)n(w)g(T)-15 b(ransf)-5 b(ormations)0 497
y Fq(LL)-17 b(VM)60 b(pro)n(vides)e(man)n(y)g(traditional)h(data)g
(\003o)l(w)f(transformations)h(in)g(addition)g(to)g(the)g(more)g
(aggressi)l(v)n(e)e(transformations)i(de-)0 716 y(scribed)51
b(belo)l(w)-11 b(.)81 b(The)52 b(SSA)g(properties)f(and)h(simple)f
(three)h(address)e(form)i(of)g(LL)-17 b(VM)53 b(mak)n(e)e(it)h(v)n(ery)
f(straightforw)n(ard)i(to)e(imple-)0 936 y(ment)56 b(simple)f
(optimizations)h(lik)n(e)g(Dead)f(Code)g(Elimination,)60
b(Constant)55 b(Propag)o(ation,)60 b(and)55 b(Expression)h
(Reassociation.)92 b(The)0 1155 y(SSA)49 b(representation)g(also)f
(enables)g(classical)f(SSA)i(scalar)f(transformations)h(such)g(as)f
(Sparse)g(Conditional)h(Constant)f(Propag)o(a-)0 1374
y(tion)42 b(and)f(Aggressi)l(v)n(e)f(Dead)h(Code)g(Elimination)i(to)e
(run)h(ef)l(\002ciently)-11 b(.)249 1593 y(Through)41
b(the)f(use)f(of)h(the)g(control)g(\003o)l(w)g(graph)g(\(CFG\))g(for)h
(a)e(function,)h(the)g(LL)-17 b(VM)41 b(infrastructure)f(can)f
(calculate)g(dominance)0 1812 y(information)51 b(of)g(v)l(arious)f
(sorts,)i(natural)e(loop)h(nesting)f(information,)j(and)d(e)l(v)n(en)f
(interv)l(al)h(information)i(for)f(a)f(transformation)h(as)0
2032 y(desired.)80 b(This)52 b(information)g(mak)n(es)f(code)g(motion)h
(transformations)g(such)e(as)h(Global)g(Common)h(Sube)n(xpression)e
(Elimination,)0 2251 y(Loop)65 b(In)-7 b(v)l(ariant)66
b(Code)e(Motion,)70 b(and)65 b(induction)g(v)l(ariable)g
(transformations)g(simple)f(to)h(implement)h(by)e(b)m(uilding)i(on)e(a)
h(solid)0 2470 y(analysis)57 b(foundation.)100 b(LL)-17
b(VM)59 b(also)e(pro)n(vides)h(a)f(pass)g(that)h(simpli\002es)g(the)f
(CFG)h(for)h(the)e(function,)62 b(remo)n(ving)c(tri)l(vially)h(dead)0
2689 y(blocks,)41 b(mer)m(ging)h(blocks)f(if)h(possible,)e(and)h
(performing)i(other)e(cleanup)g(acti)l(vities.)249 2908
y(There)46 b(are)g(se)l(v)n(eral)f(reasons)g(that)h(we)f(ha)m(v)n(e)g
(reimplemented)h(these)f(common)i(and)e(well)h(kno)l(wn)g
(transformations)g(in)h(LL)-17 b(VM.)0 3127 y(First,)63
b(writing)d(transformations)f(is)f(instructi)l(v)n(e)h(and)f(tests)g
(the)h(generality)g(of)g(the)g(infrastructure)g(being)g(de)l(v)n
(eloped.)102 b(Second,)0 3347 y(these)50 b(transformations)g(are)g
(useful)h(for)g(cleaning)f(up)g(the)g(result)h(of)g(running)f(some)g
(of)h(our)g(aggressi)l(v)n(e)e(transformations)h(which)0
3566 y(concentrate)41 b(on)g(lar)m(ge)h(scalar)f(restructuring,)g
(often)h(lea)m(ving)f(little)h(details)f(to)h(be)f(cleaned)f(up)i(by)f
(these)g(passes.)249 3785 y(Finally)-11 b(,)36 b(we)e(ha)m(v)n(e)g
(found)h(that)f(our)h(implementation)g(of)g(these)f(passes)f(is)h(much)
h(more)f(ef)l(\002cient)h(and)f(ef)l(fecti)l(v)n(e)g(than)g(the)h
(similar)0 4004 y(passes)51 b(in)i(the)g(GCC)f(compiler)h(we)f(ha)m(v)n
(e)g(retar)m(geted)g(to)h(LL)-17 b(VM)54 b(\(See)e(Section)h(5.6)g(for)
g(more)g(information\).)86 b(By)52 b(using)h(sparse)0
4223 y(optimizations)46 b(on)g(SSA)h(form,)g(these)e(transformations)i
(are)f(much)g(more)g(ef)l(\002cient,)g(while)g(also)g(ha)m(ving)g
(global)g(ef)l(fects.)64 b(Se)l(v)n(eral)0 4443 y(of)42
b(the)f(transformations)h(in)g(GCC)f(operate)g(on)g(e)n(xtended)g
(basic)f(blocks,)h(limiting)i(their)e(scope)g(for)h(impro)n(v)n(ement.)
0 4941 y Fl(4.2)198 b(The)50 b(Le)m(v)n(el)h(Raising)e(P)n(ass)0
5272 y Fq(Man)n(y)57 b(e)n(xisting)h(compilers)g(do)g(not)g(retain)h
(type)f(information)h(for)g(the)f(program)g(once)g(the)n(y)g(con)-7
b(v)n(ert)58 b(from)h(a)f(high-le)l(v)n(el)g(code)0 5492
y(representation)42 b(\(e.g.,)g(an)h(Abstract)f(Syntax)h(T)-6
b(ree)43 b(or)g(AST\))h(to)f(a)f(lo)l(wer)m(-le)l(v)n(el)g
(representation)g(used)h(for)g(optimizations.)55 b(Because)0
5711 y(retar)m(geting)39 b(e)n(xisting)f(compilers)g(is)g(an)h
(important)g(part)g(of)f(the)h(o)n(v)n(erall)e(LL)-17
b(VM)40 b(strate)n(gy)-11 b(,)38 b(we)g(de)l(v)n(eloped)f(the)i(\223le)
l(v)n(el)e(raising\224)h(pass)0 5930 y(to)j(assist)f(with)i
(reconstructing)f(this)g(type)g(information.)52 b(W)-7
b(ith)42 b(the)f(le)l(v)n(el)f(raising)i(pass,)d(compiler)j(front-ends)
f(can)g(be)g(modi\002ed)h(to)0 6149 y(simply)35 b(generate)f
Fp(le)-7 b(gal)35 b Fq(LL)-17 b(VM)35 b(code)f(that)g(is)h(simple)f(b)m
(ut)g(lo)l(w-le)l(v)n(el)g(and)h(not)f(type-safe)g(\(e.g.,)h(using)f(e)
n(xplicit)g(byte)h(addressing)e(for)0 6368 y(structure)38
b(\002eld)g(accesses\).)47 b(The)39 b(back)n(end)e(can)g(use)h(the)f
(le)l(v)n(el)g(raising)h(pass)f(to)h(reco)n(v)n(er)f(type)h
(information)h(\(e.g.,)e(direct)h(references)0 6587 y(to)48
b(structure)g(\002elds\))g(through)g(program)h(analysis.)68
b(In)49 b(this)e(w)n(ay)-11 b(,)49 b(the)f(program)h(analysis)d
(required)j(to)f(reco)n(v)n(er)e(type)i(information)0
6807 y(can)e(be)g(shared)g(by)h(man)n(y)f(pree)n(xisting)g(compiler)h
(frontends)g(without)g(an)n(y)f(inte)n(gration)h(problems:)61
b(it)47 b(is)g(simply)g(another)f(LL)-17 b(VM)0 7026
y(to)42 b(LL)-17 b(VM)42 b(transformation.)249 7245 y(The)e(\223le)l(v)
n(el)f(raising\224)h(pass)f(operates)g(by)i(eliminating)f
Fn(cast)f Fq(instructions)h(from)h(the)f(LL)-17 b(VM)41
b(code)e(through)i(se)l(v)n(eral)d(dif)l(ferent)0 7464
y(strate)n(gies.)51 b(It)42 b(assumes)e(that)i(the)g(prototypes)g(for)g
(the)g(functions)g(are)f(correct,)h(and)g(proceeds)e(by)i(eliminating)h
Fn(cast)d Fq(instructions)0 7683 y(until)58 b(its)g(analysis)f(cannot)h
(pro)n(v)n(e)f(the)h(remaining)g Fn(cast)f Fq(instructions)h(a)n(w)n
(ay)-11 b(.)99 b(In)59 b(our)f(current)g(front-end,)63
b(the)57 b(prototypes)h(for)0 7902 y(functions)36 b(are)g(easily)f
(accessable)f(from)j(the)f(deb)m(ug)g(information)h(maintained)f(by)g
(the)g(compiler)-9 b(.)49 b(On)36 b(the)g(other)g(hand,)h(the)f
(internal)0 8122 y(representation)46 b(of)h(the)g(function)g(itself)f
(may)h(be)f(arbitrarily)i(modi\002ed)f(by)f(optimizations)h(in)g(the)f
(compiler)-7 b(,)48 b(making)f(instruction)0 8341 y(le)l(v)n(el)36
b(type)h(information)i(virtually)f(impossible)e(to)i(reconstruct.)49
b(Here)37 b(is)g(an)g(e)n(xample)f(of)h(the)g(transformations)h(made)f
(by)g(the)g(le)l(v)n(el)0 8560 y(raising)k(pass:)448
8927 y Fh(struct)88 b(S1)h({)3765 b(/*)89 b(pair)g(of)g(integers)e(*/)
628 9128 y(int)h(i,)h(j;)448 9329 y(};)448 9731 y(unsigned)e
(foo\(struct)g(S1)i(*s\))f({)628 9932 y(return)f(s->i*4)h(+)h(s->j;)
2688 b(/*)89 b(access)f(the)h(two)f(fields)g(*/)448 10132
y(})249 10518 y Fq(From)50 b(this)g(C)f(snippet,)i(our)e(GCC)g
(front-end)i(outputs)e(the)g(follo)l(wing)h(correct,)h(b)m(ut)f
(suboptimal)f(LL)-17 b(VM)50 b(code)f(\(the)h(strength)0
10737 y(reduction)42 b(of)f(the)h(multiply)g(w)n(as)f(done)h(by)f(GCC)g
(optimizations,)g(not)h(by)f(LL)-17 b(VM\):)3817 11160
y(11)p eop
%%Page: 12 12
12 11 bop 448 166 a Fh(\045S1)89 b(=)g(type)g({)g(int,)f(int)h(})2689
b(;)90 b(typedef)d(information)448 568 y(;)j(Function)d(prototype)f
(information)g(preserved)h(from)h("debug")f(information)448
769 y(uint)i("foo"\(\045S1*)d(\045s\))j({)628 970 y(\045cast215)e(=)i
(cast)f(\045S1*)h(\045s)g(to)g(int*)1791 b(;)90 b(cast215)d(=)i(&s->i)
628 1171 y(\045reg109)e(=)i(load)g(int*)f(\045cast215)2059
b(;)90 b(Load)e(the)h(s->i)f(field)628 1372 y(\045reg111)f(=)i(shl)g
(int)g(\045reg109,)e(ubyte)h(2)1523 b(;)90 b(Multiply)d(by)i(4)628
1572 y(\045cast214)e(=)i(cast)f(\045S1*)h(\045s)g(to)g(ulong)1701
b(;)90 b(Low-level)c(structure)628 1773 y(\045reg213)h(=)i(add)g(ulong)
f(4,)h(\045cast216)1790 b(;)269 b(addressing)86 b(arithmetic)628
1974 y(\045cast217)h(=)i(cast)f(ulong)g(\045reg213)g(to)h(int*)1253
b(;)90 b(cast217)d(=)i(&s->j)628 2175 y(\045reg112)e(=)i(load)g(int*)f
(\045cast217)2059 b(;)90 b(Load)e(the)h(s->j)f(field)628
2376 y(\045reg108)f(=)i(add)g(int)g(\045reg111,)e(\045reg112)1521
b(;)90 b(Add)e(the)h(fields)628 2577 y(ret)f(int)h(\045reg108)3225
b(;)90 b(Return)d(result)448 2778 y(})249 3163 y Fq(First,)35
b(the)f(le)l(v)n(el)e(raise)h(pass)g(notices)g(that)g
Fn(\045cast215)e Fq(casts)h(a)h(structure)h(pointer)g(to)f(a)h(pointer)
g(to)f(the)h(type)f(of)h(the)f(\002rst)h(element)0 3382
y(of)49 b(the)f(structure.)71 b(This)49 b Fn(cast)d Fq(can)i(be)g
(eliminated)h(by)f(simply)g(con)-7 b(v)n(erting)49 b(the)f
Fn(cast)f Fq(instruction)h(into)h(a)f Fn(getelementptr)0
3602 y Fq(instruction)60 b(of)h(the)f(\002rst)g(\002eld.)107
b(Similarly)-11 b(,)66 b Fn(\045s+4)59 b Fq(is)h(found)g(equal)g(to)g
Fn(&s->j)p Fq(,)j(so)c Fn(cast217)f Fq(can)i(be)f(raised)h(to)g(use)g
(a)g(safe)0 3821 y Fn(getelementptr)37 b Fq(instruction.)51
b(The)42 b(\002nal)f(code)g(produced)h(by)f(le)l(v)n(el)g(raising)g
(pass)g(is:)448 4188 y Fh(\045S1)89 b(=)g(type)g({)g(int,)f(int)h(})
2689 b(;)90 b(typedef)d(information)448 4589 y(int)i("foo"\(\045S1*)d
(\045s\))j({)628 4790 y(\045cast215)e(=)i(getelementptr)c(\045S1*)k
(\045s,)f(uint)h(0,)g(ubyte)f(0)178 b(;)90 b(cast215)d(=)i(&s->i)628
4991 y(\045reg109)e(=)i(load)g(int*)f(\045cast215)2059
b(;)90 b(Load)e(the)h(s->i)f(field)628 5192 y(\045reg111)f(=)i(shl)g
(int)g(\045reg109,)e(ubyte)h(2)1523 b(;)90 b(Multiply)d(by)i(4)628
5393 y(\045cast217)e(=)i(getelementptr)c(\045S1*)k(\045s,)f(uint)h(0,)g
(ubyte)f(1)178 b(;)90 b(cast217)d(=)i(&s->j)628 5594
y(\045reg1121)e(=)i(load)f(int*)h(\045cast217)1969 b(;)90
b(Load)e(the)h(s->j)f(field)628 5795 y(\045reg108)f(=)i(add)g(int)g
(\045reg111,)e(\045reg1121)1431 b(;)90 b(Add)e(the)h(fields)628
5996 y(ret)f(int)h(\045reg108)3225 b(;)90 b(Return)d(result)448
6197 y(})249 6582 y Fq(...which)40 b(is)h(no)l(w)g(type-safe.)0
7081 y Fl(4.3)198 b(Simple)51 b(Memory)f(T)-15 b(ransf)-5
b(ormations)0 7412 y Fq(One)56 b(of)g(the)g(focuses)f(of)h(LL)-17
b(VM)57 b(from)g(the)f(be)n(ginning)g(has)f(been)h(to)g(enable)f(and)h
(simplify)h(memory)f(access)e(transformations,)0 7631
y(because)39 b(memory)i(is)g(one)f(of)h(the)g(main)f(bottlenecks)g(for)
i(both)f(architectures)f(and)g(compiler)h(analysis.)50
b(T)-13 b(w)n(o)41 b(e)n(xamples)e(of)i(simple)0 7850
y(memory)58 b(optimizations)g(that)g(ha)m(v)n(e)f(been)g(implemented)i
(in)f(LL)-17 b(VM)58 b(are)g(the)g Fn(mem2reg)d Fq(and)j(v)l(arious)g
(structure)g(permutation)0 8069 y(passes.)249 8289 y(The)49
b Fn(mem2reg)e Fq(pass)h(promotes)h(stack)f(allocated)h(memory)g
(objects)g(to)g(li)l(v)n(e)f(in)i(SSA)f(re)n(gisters.)73
b(The)49 b(implementation)h(\002rst)0 8508 y(analyzes)40
b(the)h(stack)f(allocated)g(objects)h(in)g(a)g(function)g(to)h(see)e
(if)h(the)n(y)g(are)f(safe)h(to)g(promote)h(\(i.e.)50
b(their)41 b(address)f(is)h(not)h(required)f(to)0 8727
y(e)n(xist\),)h(then)g(performs)h(a)f(slightly)g(simpli\002ed)h(SSA)g
(construction)f(pass)g(to)g(place)g Fg(f)p Fq(-nodes)g(in)g(the)g
(function.)54 b(Once)42 b(in)h(SSA)g(form,)0 8946 y Fn(load)52
b Fq(and)h Fn(store)f Fq(instructions)h(are)h(re)l(written)f(to)h(be)f
(re)n(gister)g(copies.)87 b(This)53 b(transformation)h(illustrates)g
(the)f(importance)h(of)0 9165 y(type)37 b(information)i(in)e(our)h
(representation.)49 b(W)-7 b(ithout)38 b(type)f(information,)i(this)e
(transformation)h(w)n(ould)f(be)g(impossible)g(to)h(perform,)0
9384 y(because)i(in)i(general,)e(stack)h(allocated)g(objects)g(can)g
(be)g(arbitrarily)i(comple)n(x)e(\(comple)n(x)g(nested)f(structures,)h
(for)h(e)n(xample\).)249 9604 y(LL)-17 b(VM)38 b(also)f(contains)g(v)l
(arious)g(structure)h(permutation)g(transformations)f(which)g(can)g(be)
h(used)e(to)i(impro)n(v)n(e)f(the)g(cache)g(beha)m(v-)0
9823 y(ior)51 b(of)g(the)g(program.)79 b(These)50 b(transformations)h
(\002rst)g(analyze)f(the)h(usage)f(of)h(data)f(structures)g(to)h
(ensure)f(the)n(y)g(are)h(accessed)d(in)j(a)0 10042 y(type-safe)44
b(manner)-9 b(.)60 b(If)45 b(it)f(is)g(safe)g(to)h(do)f(so,)h
(structure)f(de\002nitions)h(are)f(modi\002ed,)h(and)f(the)g(program)h
(is)g(transformed)f(to)h(load)f(and)0 10261 y(store)e(from)i(the)e
(\002elds)h(of)f(the)h(transformed)g(structure)f(de\002nitions.)55
b(Using)42 b(the)h(type)f(information)i(a)m(v)l(ailable)d(to)i(the)f
(LL)-17 b(VM)44 b(com-)0 10480 y(piler)-7 b(,)39 b(and)e(the)g
(type-safety)h(information)g(made)g(e)n(xplicit)f(through)h(the)f
Fn(cast)f Fq(instruction,)j(these)d(aggressi)l(v)n(e)g(transformations)
i(on)0 10700 y(C)j(programs)h(are)f(straightforw)n(ard)i(to)e
(implement.)3817 11160 y(12)p eop
%%Page: 13 13
13 12 bop 0 166 a Fl(4.4)198 b(Aggr)l(essi)n(v)n(e)50
b(Data)f(Structur)l(e)k(T)-15 b(ransf)-5 b(ormations)0
497 y Fq(A)39 b(recent)f(research)g(result)h(of)g(the)f(LL)-17
b(VM)40 b(project)f(has)f(been)g(a)h(frame)l(w)n(ork)g(for)h(aggressi)l
(v)n(e)d(data)h(structure)h(transformations)g([20].)0
716 y(Using)h(information)h(about)g(memory)f(allocation)h(and)f(typed)g
(memory)h(operations,)f(we)g(describe)f(ho)l(w)h(to)h(b)m(uild)f(a)g
(\223data)g(structure)0 936 y(analysis)k(graph\224.)63
b(This)45 b(graph)h(describes)e(the)h(logical,)h Fp(disjoint)p
Fq(,)g(data)f(structures)g(\(hash)g(table,)g(AST)-12
b(,)45 b(binary)h(tree,)g(graph,)g(etc...\))0 1155 y(that)c(are)f(used)
g(by)g(the)h(program,)f(and)h(whether)f(or)h(not)f(those)g(data)h
(structures)f(are)g(accessed)e(in)j(a)f(type-safe)g(manner)-9
b(.)249 1374 y(Gi)l(v)n(en)43 b(this)g(graph,)h(it)g(is)f(possible)g
(to)h(perform)g(a)f Fp(fully)h(automatic)g Fq(pool)f(allocation)h
(transformation)g(on)g(the)f(program,)h(which)0 1593
y(con)-7 b(v)n(erts)55 b(the)h(program)h(from)g(using)f(general)f(heap)
h(allocation)g(to)g(use)f(a)h(carefully)g(controlled)g(pool)h
(allocation)e(library)-11 b(.)96 b(This)0 1812 y(transformation)59
b(is)e(nontri)l(vial)i(because)d(the)i(source)g(language)f(is)h(C,)f
(the)h(data)f(structures)h(are)g(hea)m(vily)f(recursi)l(v)n(e,)k(and)c
(we)h(do)0 2032 y(a)53 b(precise,)h(data)f(structure)g(based)f(pool)i
(allocation.)85 b(Because)52 b(the)g(transformation)i(is)f(precise,)i
(indicating)e(that)g(e)n(xact)f(analysis)0 2251 y(is)i(used)g(instead)g
(of)g(heuristics)g(to)g(allocate)g(nodes)g(to)g(pools,)j(the)e(pool)f
(allocation)g(can)g(be)g(used)g(as)g(the)g(basis)f(for)i(other)-7
b(,)58 b(more)0 2470 y(aggressi)l(v)n(e)40 b(data)h(structure)g
(transformations.)249 2689 y(Applications)h(of)h(automatic)f(pool)h
(allocation)f(are)g(v)l(aried:)54 b(e)l(v)n(erything)42
b(from)h(data)f(structure)g(based)g(dead-\002eld-elimination,)0
2908 y(to)d(virtually)h(free)g(allocation)f(order)g(prefetching,)h(to)f
(a)g(technique)g(we)g(refer)h(to)f(as)g Fp(pointer)g(compr)-6
b(ession)p Fq(.)48 b(Although)40 b(applications)0 3127
y(of)65 b(automatic)g(pool)g(allocation)g(are)f(still)i(being)e(in)-7
b(v)n(estig)o(ated,)70 b(the)65 b(ability)g(to)g(perform)h
Fp(macr)-7 b(oscopic)63 b Fq(data-structure-centric)0
3347 y(transformations)42 b(on)f(a)h(program)g(at)f Fp(link-time)h
Fq(is)f(a)g(single)g(e)n(xample)g(of)h(the)f(possibilities)g(that)h
(the)f(LL)-17 b(VM)43 b(system)d(enables.)0 3842 y Fl(4.5)198
b(Instrumentation)0 4173 y Fq(LL)-17 b(VM)34 b(pro)n(vides)f(tw)n(o)h
(main)g(\223instrumentation\224)f(passes.)47 b(The)34
b(\002rst)g(is)f(primarily)i(a)e(deb)m(ugging)g(aid)h(for)g(the)f(nati)
l(v)n(e)g(code)g(generator)0 4392 y(\()p Fn(llc)p Fq(\).)62
b(This)45 b(pass)f(inserts)h(code)g(into)g(the)g(LL)-17
b(VM)46 b(program)g(that)f(causes)f(it)i(to)f(print)h(out)f(the)g
(intermediate)h(v)l(alues)e(produced)h(by)0 4612 y(indi)l(vidual)57
b(instructions)f(or)g(indi)l(vidual)h(function)g(calls)e(in)i(the)f
(program.)95 b Fn(llc)56 b Fq(in)-7 b(v)m(ok)n(es)56
b(this)g(pass)f(to)i(instrument)f(the)g(\223\002nal\224)0
4831 y(LL)-17 b(VM)47 b(code,)g(just)f(before)h(be)n(ginning)f(nati)l
(v)n(e)f(code)h(generation,)h(and)g(outputs)f(a)g(cop)n(y)h(of)g(the)f
(instrumented)g(LL)-17 b(VM)48 b(code.)65 b(The)0 5050
y(output)51 b(of)f(the)g(instrumented)h(program)g(when)f(run)g(in)h
Fn(lli)e Fq(should)h(match)g(the)g(output)h(of)g(the)f(nati)l(v)n(e)f
(code)h(generated)g(by)g Fn(llc)0 5269 y Fq(e)n(xactly)-11
b(.)58 b(This)44 b(instrumentation)h(pass)e(features)g(a)h
(deterministic)g(pointer)g(hashing)g(scheme)f(that)h(allo)l(ws)g(it)g
(to)g(print)h(out)f(identical)0 5488 y(v)l(alues)60 b(for)h(pointer)f
(v)l(ariables)g(in)h Fn(lli)e Fq(and)h(an)n(y)g(machine)g(on)h(which)f
(the)g(code)g(might)h(be)f(e)n(x)n(ecuted.)106 b(If)61
b(the)g(nati)l(v)n(e)e(code)h(is)0 5708 y(incorrect,)38
b(the)g(tw)n(o)h(outputs)f(can)f(be)h(used)f(to)i(identify)f(the)g
(\002rst)h(fe)l(w)e(instructions)h(that)g(produced)g(a)g(dif)l(ferent)h
(v)l(alue)e(in)h(the)g(LL)-17 b(VM)0 5927 y(code)41 b(and)g(the)h(nati)
l(v)n(e)e(code.)51 b(This)42 b(can)f(greatly)g(simplify)h(deb)m(ugging)
f(the)h(generated)f(nati)l(v)n(e)f(code.)249 6146 y(The)47
b(other)h(important)f(instrumentation)h(pass)e(is)g(used)h(to)g(add)g
(code)f(to)h(collect)g(\223path)g(pro\002ling\224)h([6])f(information)h
(from)g(the)0 6365 y(program.)99 b(P)n(ath)58 b(pro\002ling)g(is)f
(intended)h(to)f(be)g(used)g(by)h(the)f(runtime)h(and)f(of)l(\003ine)h
(optimizers)g(\(see)e(Sections)h(5.8)g(and)h(5.9)f(re-)0
6584 y(specti)l(v)n(ely\))45 b(to)h(identify)g(hot)g(traces)f(of)h(the)
g(program)g(e)n(x)n(ecution.)63 b(Although)46 b(more)g(e)n(xpensi)l(v)n
(e)d(to)j(compute)g(than)g(edge)f(pro\002ling)0 6803
y(information,)e(path)f(pro\002ling)i(pro)n(vides)d(important)i
(information)h(about)e(the)g(frequenc)n(y)g(of)g(e)n(x)n(ecution)f(of)i
(traces)e(of)i(the)f(program,)0 7023 y(rather)i(than)h(simple)f(e)n(x)n
(ecution)f(counts)h(for)g(basic)g(blocks.)59 b(Using)44
b(LL)-17 b(VM)45 b(as)e(the)i(tar)m(get)f(\(instead)g(of)h(machine)e
(code\))h(for)h(the)g(in-)0 7242 y(strumentation)39 b(simpli\002es)g
(the)g(implementation)g(tremendously)g(\(there)h(is)e(no)h(need)g(to)g
(w)n(orry)h(about)f(the)g(a)m(v)l(ailablity)f(of)h(re)n(gisters,)0
7461 y(for)j(e)n(xample\),)e(and)i(also)f(allo)l(ws)g(the)g
(pro\002ling)i(code)e(to)g(be)h(optimized)f(with)h(the)f(rest)h(of)f
(the)h(program)g(in)g(LL)-17 b(VM)42 b(form.)0 8048 y
Fr(5)239 b(The)60 b(LL)-22 b(VM)60 b(T)-22 b(ool)60 b(Chain)0
8439 y Fq(In)i(addition)f(to)h(pro)n(viding)g(a)f(suite)g(of)h
(tranformations,)k(the)c(LL)-17 b(VM)62 b(infrastructure)g(also)f(pro)n
(vides)f(a)i(number)f(of)h(e)n(x)n(ecutable)0 8658 y(\223tools\224)45
b(that)h(are)g(useful)f(for)i(interacting)e(with)h(the)g(LL)-17
b(VM)47 b(system.)63 b(One)45 b(of)h(the)g(k)n(e)n(y)f(design)h(goals)f
(of)h(the)g(LL)-17 b(VM)46 b(project)g(is)g(to)0 8877
y(mak)n(e)51 b(LL)-17 b(VM)51 b(completely)f(transparent)h(to)g(the)f
(end)g(user)h(\(a)f(programmer)i(compiling)f(with)f(LL)-17
b(VM\).)52 b(As)e(such,)h(most)g(of)g(these)0 9097 y(tools)45
b(are)h(for)g(de)l(v)n(eloping)f(or)h(deb)m(ugging)f(LL)-17
b(VM)46 b(transformations,)g(and)g(are)f(therefore)h(LL)-17
b(VM)46 b(de)l(v)n(eloper)f(tools.)63 b(This)46 b(section)0
9316 y(describes)40 b(the)i(design)f(of)h(the)f(main)h(components)f(of)
g(our)h(infrastructure)g(and)g(their)f(current)h(implementation)g
(status.)0 9811 y Fl(5.1)198 b(The)50 b(LL)-18 b(VM)50
b(Assembler)g(and)f(Disassembler)0 10142 y Fq(One)63
b(critical,)68 b(b)m(ut)63 b(often)h(o)n(v)n(erlook)n(ed,)j(aspect)62
b(of)i(a)f(code)g(representation)g(is)g(the)g(form)h(that)f(the)g
(representation)g(tak)n(es.)116 b(The)0 10362 y(LL)-17
b(VM)49 b(virtual)h(instruction)f(set)f(is)g(itself)h(a)f(\002rst)h
(class)f(language,)h(complete)g(with)f(a)h(te)n(xtual)f(format)h(\(e)n
(xamples)f(of)h(which)f(ha)m(v)n(e)0 10581 y(been)57
b(included)h(in)g(this)g(document\))g(that)g(is)f(equi)l(v)l(alent)h
(to)g(the)g(in)g(memory)g(and)f(\223bytecode\224)g(\(high-density\))i
(representation.)0 10800 y(This)45 b(allo)l(ws)e(for)i(straightforw)n
(ard)h(deb)m(ugging,)e(as)g(well)g(as)g(a)g(simple)g(unit)h(test)f
(frame)l(w)n(ork)h(\(because)e(test-cases)g(can)g(be)i(written)3817
11160 y(13)p eop
%%Page: 14 14
14 13 bop 0 166 a Fq(directly)44 b(in)g(LL)-17 b(VM)44
b(instead)f(of)h(C\).)f(Although)h(the)g(code)f(stays)g(in)h(the)f
(bytecode)g(representation)h(most)f(of)h(the)g(time,)g(it)g(is)f(easy)g
(to)0 385 y(use)e(the)g(disassembler)g(to)g(con)-7 b(v)n(ert)42
b(the)f(code)g(to)h(LL)-17 b(VM)42 b(assembly)f(and)g(back,)f
(losslessly)-11 b(.)249 604 y(In)64 b(order)g(to)f(support)h(the)f(te)n
(xtual)g(form)h(of)g(LL)-17 b(VM,)64 b(we)f(ha)m(v)n(e)f(simple)h
(assembler)g(\()p Fn(as)p Fq(\))g(and)g(disassembler)f(\()p
Fn(dis)p Fq(\))h(tools)0 824 y(that)47 b(con)-7 b(v)n(ert)47
b(to)h(and)f(from)h(the)f(compressed)f(LL)-17 b(VM)48
b(bytecode)f(representation)g(and)g(te)n(xtual)f(forms.)69
b(The)47 b(disassembler)g(is)g(also)0 1043 y(capable)32
b(of)i(con)-7 b(v)n(erting)33 b(the)g(LL)-17 b(VM)34
b(code)f(to)g(C,)f(which)h(is)g(useful)g(for)h(people)f(f)n
(amiliarizing)h(themselv)n(es)e(with)h(the)g(LL)-17 b(VM)34
b(system,)0 1262 y(and)41 b(for)h(tar)m(geting)g(systems)f(we)g(do)g
(not)h(ha)m(v)n(e)e(a)h(code)g(generator)h(for)-9 b(.)0
1760 y Fl(5.2)198 b(LL)-18 b(VM)50 b(Inter)n(pr)l(eter/Deb)l(ugger/Pr)l
(o\002ler:)67 b Fu(lli)0 2092 y Fq(The)54 b(LL)-17 b(VM)54
b(interpreter)-7 b(,)57 b Fn(lli)p Fq(,)d(is)f(a)h(general)f(purpose)g
(LL)-17 b(VM)54 b(e)n(x)n(ecution)e(tool.)87 b(It)54
b(is)f(capable)f(of)i(directly)g(interpreting)g(com-)0
2311 y(pressed)43 b(LL)-17 b(VM)45 b(code)f(without)h(a)f(code)g
(generation)g(pass)f(\(and)i(emulates)f(se)l(v)n(eral)e(common)j
(system)f(calls)f(to)i(support)f(I/O\).)h(The)0 2530
y(LL)-17 b(VM)45 b(interpreter)f(has)g(a)g(b)m(uilt)g(in)g(deb)m
(ugging)g(mode,)g(allo)l(wing)g(for)h(instruction-by-instruction)g
(stepping)f(through)g(the)g(LL)-17 b(VM)0 2749 y(instruction)50
b(stream,)g(stack-traces,)f(and)g(other)h(features)e(e)n(xpected)g
(from)i(a)f(deb)m(ugger)-9 b(.)73 b(The)50 b(pro\002ler)g(mode)f(of)h
Fn(lli)e Fq(can)g(collect)0 2968 y(statistics)40 b(about)h(the)g
(dynamic)g(number)g(of)h(instructions)f(e)n(x)n(ecuted)e(by)i(a)g
(program,)g(and)g(the)g(dynamic)g(count)g(of)h(certain)e(program)0
3188 y(e)l(v)n(ents.)249 3407 y Fn(lli)50 b Fq(is)g(v)n(ery)h(slo)l(w)f
(\(approximately)i(1000)e(times)h(slo)l(wer)f(than)h(nati)l(v)n(e)f(e)n
(x)n(ecution\),)i(because)d(it)i(is)g(designed)f(for)i(\003e)n
(xibility)0 3626 y(and)j(ease)e(of)i(implementation,)k(not)c
(performance.)91 b(In)55 b(practice,)i(we)e(use)f Fn(lli)g
Fq(to)h(pinpoint)g(the)g(location)g(of)g(problems)g(in)g(the)0
3845 y(LL)-17 b(VM)42 b(system:)50 b(If)42 b(the)f(code)g(e)n(x)n
(ecutes)d(properly)k(in)f Fn(lli)p Fq(,)f(b)m(ut)h(not)g(after)g(nati)l
(v)n(e)f(code-generation,)g(then)h(the)g(b)m(ug)g(must)g(be)g(in)g(the)
0 4064 y(back-end,)f(otherwise)g(it')-9 b(s)40 b(in)h(an)f
(optimization)h(transformation.)51 b(Because)39 b Fn(lli)g
Fq(is)h(used)g(infrequently)-11 b(,)41 b(its)g(performance)f(has)g(not)
0 4284 y(been)h(a)g(problem)h(in)g(practice.)0 4782 y
Fl(5.3)198 b(LL)-18 b(VM)50 b(Modular)f(Optimizer:)65
b Fu(opt)0 5113 y Fq(The)40 b(modular)g(optimizer)-7
b(,)41 b Fn(opt)p Fq(,)d(is)i(the)f(centerpiece)g(of)h(de)l(v)n
(elopment)f(and)h(de)l(v)n(eloper)f(interaction)h(in)g(the)f(LL)-17
b(VM)41 b(infrastructure.)0 5333 y(It)36 b(e)n(xposes)d(all)i
(optimizations)g(to)h(the)f(user)f(through)i(a)f(simple)g(command)g
(line)g(interf)n(ace)g(which)g(can)g(e)n(x)n(ecute)e(arbitrary)j
(sequences)0 5552 y(of)44 b(transformations)g(on)g(a)f(program.)59
b(This)44 b(is)f(critical)h(for)h(deb)m(ugging)e(a)g(transformation,)i
(so)e(that)h(the)g(programmer)g(can)g(\002nd)g(out)0
5771 y(what)h(changes)e(her)i(pass)f(is)g(making)h(without)g(ha)m(ving)
g(to)g(w)n(orry)g(about)g(what)g(all)f(of)h(the)g(other)g
(transformations)g(in)g(the)g(compiler)0 5990 y(are)d(doing.)55
b(In)42 b(addition)h(to)g(simply)g(running)g(transformations,)f(the)h
(modular)g(optimizer)g(uses)e(the)i(LL)-17 b(VM)43 b(v)n(eri\002er)f
(to)h(check)f(that)0 6209 y(output)d(code)e(from)i(a)f(transformation)h
(is)f(still)h(well)f(formed)h(\(the)f(v)n(eri\002er)h(can,)f(for)g(e)n
(xample,)g(detect)g(type)g(violations,)g(malformed)0
6428 y(SSA)i(code,)e(etc\).)51 b(Once)38 b(a)h(transformation)h(has)e
(been)h(completed)g(and)g(deb)m(ugged,)g(it)g(can)g(be)g(easily)f(inte)
n(grated)h(into)h(the)f(compiler)0 6648 y(proper)-9 b(.)249
6867 y(The)64 b Fn(opt)f Fq(tool)h(e)n(xposes)d(man)n(y)j
(transformations)g(a)m(v)l(ailable)e(in)i(LL)-17 b(VM.)64
b(Man)n(y)f(of)h(them)f(\(such)h(as)f Fn(DCE)p Fq(,)f
Fn(constprop)p Fq(,)0 7086 y Fn(gcse)p Fq(,)55 b Fn(licm)p
Fq(,)h Fn(inline)p Fq(,)e Fn(simplifycfg)p Fq(,)f Fn(indvars)p
Fq(,)h Fn(sccp)p Fq(,)i Fn(adce)p Fq(,)f(and)f Fn(reassociate)p
Fq(\))c(are)k(traditional)h(mid-le)l(v)n(el)0 7305 y(optimizations.)71
b(In)49 b(addition)f(to)h(traditional)f(optimizations,)i(the)e(LL)-17
b(VM)49 b(system)f(also)f(pro)n(vides)h(a)g(v)l(ariety)g(of)h(other)f
(interesting)0 7524 y(transformations,)41 b(some)g(of)h(which)f(are)h
(described)e(belo)l(w)-11 b(.)0 8023 y Fl(5.4)198 b(T)-18
b(esting)50 b(framew)n(ork)0 8354 y Fq(Gi)l(v)n(en)j(a)g(modular)g
(optimizer)h(and)f(man)n(y)g(transformations,)j(a)d(natural)h(e)n
(xtension)e(is)h(to)g(de)l(v)n(elop)g(a)g(suite)g(of)h(test)e(cases)g
(for)i(the)0 8573 y(transformations.)48 b(W)-13 b(e)32
b(ha)m(v)n(e)g(de)l(v)n(eloped)g(a)h(suite)f(of)h(unit)h(tests)e(\(to)h
(determine)g(whether)g(an)g(optimization)g(does)f(what)h(it)g(is)g
(supposed)0 8792 y(to\),)41 b(re)n(gression)e(tests)g(\(to)i(ensure)f
(b)m(ugs)f(stay)h(\002x)n(ed\),)g(and)g(whole)g(system)g(tests.)50
b(These)40 b(whole)g(system)f(tests)h(are)g(designed)g(to)g(tak)n(e)0
9012 y(v)l(arious)f(programs)h(\(benchmarks,)e(programs)i(tak)n(en)f
(from)h(the)g(Internet,)f(and)g(other)h(interesting)f(programs\),)h
(compile)f(them)h(with)0 9231 y(the)35 b(LL)-17 b(VM)36
b(compiler)g(\(for)g(direct)g(use)e(with)i(the)f(LL)-17
b(VM)36 b(interpreter\),)h(to)f(nati)l(v)n(e)e(code)h(with)g(one)h(of)f
(the)g(LL)-17 b(VM)37 b(back-ends,)e(and)g(to)0 9450
y(nati)l(v)n(e)i(code)h(with)h(the)f(platform)h(nati)l(v)n(e)f
(compiler)-7 b(,)39 b(e)n(x)n(ecuting)e(the)h(results)g(and)g(')p
Fn(diff)p Fq('ing)f(the)h(output.)51 b(This)38 b(testing)g(frame)l(w)n
(ork)0 9669 y(helps)55 b(us)h(track)f(do)l(wn)h(re)n(gressions)e
(quickly)i(and)g(ef)l(fecti)l(v)n(ely)-11 b(,)58 b(allo)l(wing)e(us)g
(to)g(test)f(ne)l(w)g(transformations)h(thoroughly)h(before)0
9888 y(the)n(y)41 b(are)g(added)g(to)h(the)f(compiler)h(proper)-7
b(,)42 b(and)f(ensuring)h(that)f(the)g(mainline)h(compiler)g(w)n(orks)g
(well)f(on)h(a)f(v)l(ariety)g(of)h(codes.)3817 11160
y(14)p eop
%%Page: 15 15
15 14 bop 0 166 a Fl(5.5)198 b(The)50 b(LL)-18 b(VM)50
b(Optimizing)h(Link)n(er)0 497 y Fq(The)37 b(structure)f(of)h(the)g(LL)
-17 b(VM)37 b(optimizing)g(link)n(er)g(is)g(sho)l(wn)f(in)g(Figure)h(2)
g(\(When)f(in)-7 b(v)m(ok)n(ed)37 b(from)h(GCC,)d(this)i(link)n(er)g
(is)f(in)-7 b(v)m(ok)n(ed)37 b(via)0 716 y(the)43 b(name)g
Fn(gccld)e Fq(as)i(e)n(xplained)f(in)h(Section)g(5.6.3,)g(b)m(ut)g(is)g
(entirely)g(independent)g(of)g(GCC\).)g(The)g(link)n(er)h(links)f
(together)g(LL)-17 b(VM)0 936 y(object)46 b(\002les,)g(b)m(ut)g(can)f
(also)g(perform)i(aggressi)l(v)n(e)d(interprocedural)i(post-link)h
(optimizations.)64 b(The)46 b(link-time)g(optimizer)h(is)e(fully)0
1155 y(operational)50 b(and)h(has)f(already)g(been)g(the)g(host)g(of)h
(some)f(interesting)g(research,)i(including)f(the)f(data)g(structure)g
(analysis)g(and)g(the)0 1374 y(automatic)41 b(pool)h(allocation)f(and)h
(pointer)g(compression)f(transformations)g(described)g(in)h(Section)f
(4.4.)900 3247 y @beginspecial 0 @llx 0 @lly 1015 @urx
277 @ury 3600 @rwi @setspecial
%%BeginDocument: LLVMDiagram2.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: /home/sabre/LLVMDiagram2.dia
%%Creator: Dia v0.88.1
%%CreationDate: Fri May 17 21:41:13 2002
%%For: sabre
%%Magnification: 1.0000
%%Orientation: Portrait
%%BoundingBox: 0 0 1015 277
%%Pages: 1
%%BeginSetup
%%EndSetup
%%EndComments
%%BeginProlog
[ /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright
/parenleft /parenright /asterisk /plus /comma /hyphen /period /slash /zero /one
/two /three /four /five /six /seven /eight /nine /colon /semicolon
/less /equal /greater /question /at /A /B /C /D /E
/F /G /H /I /J /K /L /M /N /O
/P /Q /R /S /T /U /V /W /X /Y
/Z /bracketleft /backslash /bracketright /asciicircum /underscore /quoteleft /a /b /c
/d /e /f /g /h /i /j /k /l /m
/n /o /p /q /r /s /t /u /v /w
/x /y /z /braceleft /bar /braceright /asciitilde /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/space /exclamdown /cent /sterling /currency /yen /brokenbar /section /dieresis /copyright
/ordfeminine /guillemotleft /logicalnot /hyphen /registered /macron /degree /plusminus /twosuperior /threesuperior
/acute /mu /paragraph /periodcentered /cedilla /onesuperior /ordmasculine /guillemotright /onequarter /onehalf
/threequarters /questiondown /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
/Egrave /Eacute /Ecircumflex /Edieresis /Igrave /Iacute /Icircumflex /Idieresis /Eth /Ntilde
/Ograve /Oacute /Ocircumflex /Otilde /Odieresis /multiply /Oslash /Ugrave /Uacute /Ucircumflex
/Udieresis /Yacute /Thorn /germandbls /agrave /aacute /acircumflex /atilde /adieresis /aring
/ae /ccedilla /egrave /eacute /ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis
/eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /divide /oslash /ugrave
/uacute /ucircumflex /udieresis /yacute /thorn /ydieresis] /isolatin1encoding exch def
/Times-Roman-latin1
    /Times-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-Italic-latin1
    /Times-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-Bold-latin1
    /Times-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-BoldItalic-latin1
    /Times-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-Book-latin1
    /AvantGarde-Book findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-BookOblique-latin1
    /AvantGarde-BookOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-Demi-latin1
    /AvantGarde-Demi findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-DemiOblique-latin1
    /AvantGarde-DemiOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-Light-latin1
    /Bookman-Light findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-LightItalic-latin1
    /Bookman-LightItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-Demi-latin1
    /Bookman-Demi findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-DemiItalic-latin1
    /Bookman-DemiItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-latin1
    /Courier findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-Oblique-latin1
    /Courier-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-Bold-latin1
    /Courier-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-BoldOblique-latin1
    /Courier-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-latin1
    /Helvetica findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Oblique-latin1
    /Helvetica-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Bold-latin1
    /Helvetica-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-BoldOblique-latin1
    /Helvetica-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-latin1
    /Helvetica-Narrow findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-Oblique-latin1
    /Helvetica-Narrow-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-Bold-latin1
    /Helvetica-Narrow-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-BoldOblique-latin1
    /Helvetica-Narrow-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Roman-latin1
    /NewCenturySchoolbook-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Italic-latin1
    /NewCenturySchoolbook-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Bold-latin1
    /NewCenturySchoolbook-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-BoldItalic-latin1
    /NewCenturySchoolbook-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Roman-latin1
    /Palatino-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Italic-latin1
    /Palatino-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Bold-latin1
    /Palatino-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-BoldItalic-latin1
    /Palatino-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Symbol-latin1
    /Symbol findfont
definefont pop
/ZapfChancery-MediumItalic-latin1
    /ZapfChancery-MediumItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/ZapfDingbats-latin1
    /ZapfDingbats findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/cp {closepath} bind def
/c {curveto} bind def
/f {fill} bind def
/a {arc} bind def
/ef {eofill} bind def
/ex {exch} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth pop} bind def
/tr {translate} bind def

/ellipsedict 8 dict def
ellipsedict /mtrx matrix put
/ellipse
{ ellipsedict begin
   /endangle exch def
   /startangle exch def
   /yrad exch def
   /xrad exch def
   /y exch def
   /x exch def   /savematrix mtrx currentmatrix def
   x y tr xrad yrad sc
   0 0 1 startangle endangle arc
   savematrix setmatrix
   end
} def

/mergeprocs {
dup length
3 -1 roll
dup
length
dup
5 1 roll
3 -1 roll
add
array cvx
dup
3 -1 roll
0 exch
putinterval
dup
4 2 roll
putinterval
} bind def
28.346000 -28.346000 scale
-3.560000 -13.670000 translate
%%EndProlog


0.080000 slw
0 slj
[] 0 sd
1.000000 1.000000 1.000000 srgb
n 3.600000 8.660000 m 3.600000 11.550000 l 7.000000 11.550000 l 7.000000 8.660000 l f
0.000000 0.000000 0.000000 srgb
n 3.600000 8.660000 m 3.600000 11.550000 l s
n 7.000000 8.660000 m 7.000000 11.550000 l s
1.000000 1.000000 1.000000 srgb
n 5.300000 8.660000 1.700000 0.850000 0 360 ellipse f
0.000000 0.000000 0.000000 srgb
n 5.300000 8.660000 1.700000 0.850000 0 360 ellipse cp s
1.000000 1.000000 1.000000 srgb
n 5.300000 11.550000 m 5.300000 11.550000 1.700000 0.850000 0.000000 180.000000 ellipse f
0.000000 0.000000 0.000000 srgb
n 5.300000 11.550000 1.700000 0.850000 0.000000 180.000000 ellipse s
0.100000 slw
[0.200000] 0 sd
[0.200000] 0 sd
0 slj
n 8.425000 8.125000 m 8.425000 12.925000 l 27.125000 12.925000 l 27.125000 8.125000 l cp s
0.819608 0.819608 0.819608 srgb
n 31.788600 9.425000 m 31.788600 11.025000 l 33.688600 11.025000 l 33.688600 9.425000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 31.788600 9.425000 m 31.788600 11.025000 l 33.688600 11.025000 l 33.688600 9.425000 l cp s
1.000000 1.000000 1.000000 srgb
n 9.725000 9.425000 m 9.725000 11.025000 l 14.025000 11.025000 l 14.025000 9.425000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 9.725000 9.425000 m 9.725000 11.025000 l 14.025000 11.025000 l 14.025000 9.425000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Linker) dup sw 2 div 11.825000 ex sub 10.625000 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 15.925000 9.425000 m 15.925000 11.025000 l 18.725000 11.025000 l 18.725000 9.425000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 15.925000 9.425000 m 15.925000 11.025000 l 18.725000 11.025000 l 18.725000 9.425000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(IPO) dup sw 2 div 17.425000 ex sub 10.625000 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 20.625000 9.425000 m 20.625000 11.025000 l 26.325000 11.025000 l 26.325000 9.425000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 20.625000 9.425000 m 20.625000 11.025000 l 26.325000 11.025000 l 26.325000 9.425000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(CodeGen) dup sw 2 div 23.425000 ex sub 10.625000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 14.025000 10.225000 m 15.925000 10.225000 l s
0 slj
n 15.125000 10.625000 m 15.925000 10.225000 l 15.125000 9.825000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 18.725000 10.225000 m 20.625000 10.225000 l s
0 slj
n 19.825000 10.625000 m 20.625000 10.225000 l 19.825000 9.825000 l f
0.819608 0.819608 0.819608 srgb
n 28.225000 9.425000 m 28.225000 11.025000 l 30.125000 11.025000 l 30.125000 9.425000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 28.225000 9.425000 m 28.225000 11.025000 l 30.125000 11.025000 l 30.125000 9.425000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(as) dup sw 2 div 29.125000 ex sub 10.625000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 26.325000 10.225000 m 28.225000 10.225000 l s
0 slj
n 27.425000 10.625000 m 28.225000 10.225000 l 27.425000 9.825000 l f
/Helvetica-latin1 ff 0.800000 scf sf
(LLVM) dup sw 2 div 14.925000 ex sub 9.225000 m gs 1 -1 sc sh gr
/Helvetica-latin1 ff 0.800000 scf sf
(LLVM) dup sw 2 div 19.625000 ex sub 9.225000 m gs 1 -1 sc sh gr
/Helvetica-latin1 ff 0.800000 scf sf
(Native .s) dup sw 2 div 27.225000 ex sub 9.125000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.200000 scf sf
(.o / .a) dup sw 2 div 5.400000 ex sub 10.500000 m gs 1 -1 sc sh gr
(files) dup sw 2 div 5.400000 ex sub 11.700000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 7.025000 10.225000 m 9.725000 10.225000 l s
0 slj
n 8.925000 10.625000 m 9.725000 10.225000 l 8.925000 9.825000 l f
/Helvetica-latin1 ff 0.800000 scf sf
(LLVM) dup sw 2 div 8.700000 ex sub 9.300000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.200000 scf sf
(Optimizing Linker) dup sw 2 div 17.725000 ex sub 12.425000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 33.688600 10.225000 m 35.825000 10.225000 l s
0 slj
n 35.025000 10.625000 m 35.825000 10.225000 l 35.025000 9.825000 l f
/Helvetica-latin1 ff 0.800000 scf sf
(.exe) dup sw 2 div 34.725000 ex sub 9.525000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.200000 scf sf
(ld) dup sw 2 div 32.825000 ex sub 10.625000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 30.125000 10.225000 m 31.788600 10.225000 l s
0 slj
n 30.988600 10.625000 m 31.788600 10.225000 l 30.988600 9.825000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
0 slj
0 slc
0 slj
[] 0 sd
0.815686 0.815686 0.815686 srgb
n 30.825002 4.425001 m 34.652108 4.425001 l 34.652108 7.313528 l 33.886687 6.832107 33.503976 6.832107 32.738555 7.313528 c 31.973134 7.794949 31.590423 7.794949 30.825002 7.313528 c 30.825002 4.425001 l f
0.000000 0.000000 0.000000 srgb
n 30.825002 4.425001 m 34.652108 4.425001 l 34.652108 7.313528 l 33.886687 6.832107 33.503976 6.832107 32.738555 7.313528 c 31.973134 7.794949 31.590423 7.794949 30.825002 7.313528 c 30.825002 4.425001 l s
/Courier-latin1 ff 0.800000 scf sf
() dup sw 2 div 32.738555 ex sub 5.561887 m gs 1 -1 sc sh gr
(     ) dup sw 2 div 32.738555 ex sub 6.361887 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.000000 scf sf
(Native) dup sw 2 div 32.725000 ex sub 5.625000 m gs 1 -1 sc sh gr
(libraries) dup sw 2 div 32.725000 ex sub 6.625000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 32.738600 7.313530 m 32.738600 9.425000 l s
0 slj
n 32.338600 8.625000 m 32.738600 9.425000 l 33.138600 8.625000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
0 slj
0 slc
0 slj
[] 0 sd
1.000000 1.000000 1.000000 srgb
n 9.925002 4.425001 m 13.752108 4.425001 l 13.752108 7.313528 l 12.986687 6.832107 12.603976 6.832107 11.838555 7.313528 c 11.073134 7.794949 10.690423 7.794949 9.925002 7.313528 c 9.925002 4.425001 l f
0.000000 0.000000 0.000000 srgb
n 9.925002 4.425001 m 13.752108 4.425001 l 13.752108 7.313528 l 12.986687 6.832107 12.603976 6.832107 11.838555 7.313528 c 11.073134 7.794949 10.690423 7.794949 9.925002 7.313528 c 9.925002 4.425001 l s
/Courier-latin1 ff 0.800000 scf sf
(     ) dup sw 2 div 11.838555 ex sub 5.561887 m gs 1 -1 sc sh gr
( ) dup sw 2 div 11.838555 ex sub 6.361887 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.000000 scf sf
(LLVM) dup sw 2 div 11.825000 ex sub 5.525000 m gs 1 -1 sc sh gr
(libraries) dup sw 2 div 11.825000 ex sub 6.525000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 11.838600 7.313530 m 11.875000 9.425000 l s
0 slj
n 11.461270 8.632013 m 11.875000 9.425000 l 12.261151 8.618224 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 7.025000 10.525000 m 9.725000 10.525000 l s
0 slj
n 8.925000 10.925000 m 9.725000 10.525000 l 8.925000 10.125000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 7.025000 9.925000 m 9.725000 9.925000 l s
0 slj
n 8.925000 10.325000 m 9.725000 9.925000 l 8.925000 9.525000 l f
/Helvetica-latin1 ff 0.800000 scf sf
(Native .o) dup sw 2 div 31.225000 ex sub 11.825000 m gs 1 -1 sc sh gr
0.080000 slw
0 slj
[] 0 sd
1.000000 1.000000 1.000000 srgb
n 35.900000 8.760000 m 35.900000 11.650000 l 39.300000 11.650000 l 39.300000 8.760000 l f
0.000000 0.000000 0.000000 srgb
n 35.900000 8.760000 m 35.900000 11.650000 l s
n 39.300000 8.760000 m 39.300000 11.650000 l s
1.000000 1.000000 1.000000 srgb
n 37.600000 8.760000 1.700000 0.850000 0 360 ellipse f
0.000000 0.000000 0.000000 srgb
n 37.600000 8.760000 1.700000 0.850000 0 360 ellipse cp s
1.000000 1.000000 1.000000 srgb
n 37.600000 11.650000 m 37.600000 11.650000 1.700000 0.850000 0.000000 180.000000 ellipse f
0.000000 0.000000 0.000000 srgb
n 37.600000 11.650000 1.700000 0.850000 0.000000 180.000000 ellipse s
/Helvetica-latin1 ff 0.800000 scf sf
(.exe) dup sw 2 div 37.525000 ex sub 10.325000 m gs 1 -1 sc sh gr
(\(llvm +) dup sw 2 div 37.525000 ex sub 11.125000 m gs 1 -1 sc sh gr
(native\)) dup sw 2 div 37.525000 ex sub 11.925000 m gs 1 -1 sc sh gr
showpage

%%EndDocument
 @endspecial 2705 3612 a(Figure)h(2:)52 b(LL)-17 b(VM)42
b(Optimizing)g(Link)n(er)249 4030 y(It)i(is)e(important)i(to)g(note)f
(that)g(man)n(y)f(standard)h(intraprocedural)h(optimizations)f(need)f
(only)i(be)e(performed)i(on)f(indi)l(vidual)h Fn(.o)0
4250 y Fq(\002les)d(when)h(the)f(corresponding)h(source)f(\002les)g
(are)h(modi\002ed.)52 b(Such)42 b(optimizations)f(can)h(be)f(in)-7
b(v)m(ok)n(ed)42 b(either)g(by)f(the)h(\002nal)g(phase)f(of)0
4469 y(the)g(retar)m(geted)h(front-end)g(compiler)g(\(e.g.,)e
Fn(gccas)p Fq(\))g(or)i(by)f(the)h(optimizing)g(link)n(er)g
Fp(befor)-6 b(e)41 b Fq(the)g(linking)h(pass.)249 4688
y(Because)e(the)i(optimizing)h(link)n(er)f(can)g(perform)g
(transformations)h(at)e(post-link)i(time,)f(when)f(the)h(entire)g
(program)g(is)g(a)m(v)l(ailable)0 4907 y(for)f(analysis)f(and)h
(transformation,)g(it)g(mak)n(es)f(interprocedural)h(transformations)g
(relati)l(v)n(ely)f(simple)h(to)g(implement.)51 b(Because)39
b(the)0 5126 y(LL)-17 b(VM)47 b(transformations)f(are)g(modular)-7
b(,)48 b(we)e(can)f(use)h(the)g(traditional)h(scalar)e(optimizations)h
(described)g(in)g(Section)h(4.1)e(to)i(clean)0 5345 y(up)57
b(an)n(y)f(inef)l(\002ciencies)h(introduced)g(by)g(the)g
(interprocedural)g(transformations,)k(pro)n(viding)c(all)g(of)h(the)f
(normal)g(bene\002ts)g(of)g(the)0 5565 y(\223separation)37
b(of)h(concerns\224)e(approach)h(to)h(compiler)g(design)f([2].)50
b(The)38 b(current)g(LL)-17 b(VM)38 b(infrastructure)g(sho)l(wn)f(in)h
(Figure)g(2)f(re\003ects)0 5784 y(this)k(strate)n(gy)-11
b(.)249 6003 y(A)33 b(more)g(sophisticated)g(interprocedural)g(strate)n
(gy)f(is)h(to)g(perform)h(the)f(initial)h(intraprocedural)g
(information-g)o(athering)g(phases)0 6222 y(on)i(a)f(per)m
(-translation-unit)i(basis)e(\(similar)h(to)g(the)f(intraprocedural)h
(optimizations)g(described)f(abo)n(v)n(e\),)h(and)f(use)g(these)g(as)g
(the)h(start-)0 6441 y(ing)46 b(point)g(for)g(interprocedural)h
(optimizations)e(during)i(the)e(IPO)i(phase.)62 b(A)46
b(persistent)f(program)i(database)d(w)n(ould)i(be)g(needed)f(to)0
6661 y(record)f(the)h(results)f(of)g(the)h(initial)g(intraprocedural)f
(analyses.)59 b(This)44 b(ensures)g(that)g(the)g(initial)h(per)m
(-module)g(analyses)e(w)n(ould)i(only)0 6880 y(ha)m(v)n(e)f(to)h(be)g
(performed)h(on)f(modules)g(that)g(ha)m(v)n(e)e(been)i(recompiled,)h(b)
m(ut)f(it)g(adds)f(some)h(comple)n(xity)g(to)g(the)g(compiler)g
(infrastruc-)0 7099 y(ture.)50 b(\(Note,)38 b(ho)l(we)l(v)n(er)-7
b(,)38 b(that)g(this)f(approach)h(w)n(ould)g(still)g(be)g(completely)g
(compatible)g(with)g(e)n(xisting)f(b)m(uild)h(en)-7 b(vironments,)39
b(unlik)n(e)0 7318 y(source-le)l(v)n(el)h(interprocedural)h(systems\).)
50 b(The)42 b(current)f(LL)-17 b(VM)42 b(infrastructure)f(only)h
(implements)f(the)g(simpler)g(strate)n(gy)-11 b(,)40
b(b)m(ut)h(the)0 7537 y(more)h(sophisticated)e(strate)n(gy)h(may)g(be)h
(added)f(in)g(the)h(future.)0 8036 y Fl(5.6)198 b(GCC)50
b(based)f(C)h(Static)g(Compiler)0 8367 y Fq(The)37 b(\002rst)h(pre-e)n
(xisting)e(compiler)i(that)f(we)f(ha)m(v)n(e)g(retar)m(geted)h(to)g
(generate)f(LL)-17 b(VM)38 b(code)f(is)f(the)h(GCC)g(3.0)f(\(the)i(Gnu)
e(Compiler)i(Col-)0 8586 y(lection\))e(C)g(compiler)1280
8526 y Fm(6)1350 8586 y Fq(.)50 b(This)36 b(gi)l(v)n(es)f(us)h(e)n
(xcellent)f(support)i(for)f(man)n(y)g(pre-ANSI)h(as)f(well)g(as)f
(ANSI-compatible)i(benchmarks,)f(the)0 8805 y(broad)45
b(range)g(of)h(GNU)f(e)n(xtensions,)f(as)g(well)i(as)e(compatibility)i
(with)g(pre-e)n(xisting)e(mak)n(e\002les.)62 b(In)46
b(particular)-7 b(,)46 b(we)f(automatically)0 9025 y(support)c(the)g
(GCC)g(command-line)g(options,)g(thus)g(making)g(the)g(e)n(xistence)e
(of)j(LL)-17 b(VM)41 b(transparent)g(to)h(an)e(ordinary)i(user)f(of)g
(GCC.)0 9244 y(Ho)l(we)l(v)n(er)-7 b(,)58 b(we)e(do)g(ha)m(v)n(e)e(one)
i(limitation:)82 b(we)55 b(do)h(not)g(currently)h(generate)e
(symbol-table)h(information)h(for)g(use)e(by)h(deb)m(uggers)0
9463 y(such)41 b(as)g(GDB.)f(The)i(or)m(g)o(anization)g(of)g(the)f(LL)
-17 b(VM)42 b(GCC)f(front-end)h(is)g(sho)l(wn)f(in)g(Figure)h(3.)249
9682 y(As)50 b(with)g(man)n(y)g(compilers,)i(the)f Fn(gcc)e
Fq(command)h(is)g(actually)g(a)g(dri)l(v)n(er)h(program)f(that)h(does)f
(not)g(do)h(an)n(y)e(compilation.)78 b(De-)0 9901 y(pending)61
b(on)g(the)g(command-line)g(options)g(pro)n(vided,)k(it)c(may)g
Fn(fork)f Fq(and)h Fn(exec)e Fq(v)l(arious)i(subcomponents)f(of)h(the)g
(compiler)-7 b(,)p 0 10226 3120 7 v 181 10337 a Fk(6)239
10385 y Fj(W)c(e)31 b(are)e(planning)j(to)e(add)h(support)g(for)f(C++)g
(is)f(soon,)i(and)g(Ja)m(v)m(a)f(support)h(will)e(be)h(added)h(as)f
(time)g(allo)m(ws.)39 b(The)31 b(most)f(comple)n(x)h(part)f(of)h
(enabling)g(Ja)m(v)m(a)e(support)0 10543 y(is)k(w)o(orking)h(out)g(the)
g(runtime)g(issues.)3817 11160 y Fq(15)p eop
%%Page: 16 16
16 15 bop 1140 884 a @beginspecial 0 @llx 0 @lly 1030
@urx 165 @ury 3312 @rwi @setspecial
%%BeginDocument: LLVMDiagram1.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: LLVMDiagram1.dia
%%Creator: Dia v0.88.1
%%CreationDate: Sat May 18 14:58:43 2002
%%For: sabre
%%Magnification: 1.0000
%%Orientation: Portrait
%%BoundingBox: 0 0 1030 165
%%Pages: 1
%%BeginSetup
%%EndSetup
%%EndComments
%%BeginProlog
[ /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /space /exclam /quotedbl /numbersign /dollar /percent /ampersand /quoteright
/parenleft /parenright /asterisk /plus /comma /hyphen /period /slash /zero /one
/two /three /four /five /six /seven /eight /nine /colon /semicolon
/less /equal /greater /question /at /A /B /C /D /E
/F /G /H /I /J /K /L /M /N /O
/P /Q /R /S /T /U /V /W /X /Y
/Z /bracketleft /backslash /bracketright /asciicircum /underscore /quoteleft /a /b /c
/d /e /f /g /h /i /j /k /l /m
/n /o /p /q /r /s /t /u /v /w
/x /y /z /braceleft /bar /braceright /asciitilde /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/space /exclamdown /cent /sterling /currency /yen /brokenbar /section /dieresis /copyright
/ordfeminine /guillemotleft /logicalnot /hyphen /registered /macron /degree /plusminus /twosuperior /threesuperior
/acute /mu /paragraph /periodcentered /cedilla /onesuperior /ordmasculine /guillemotright /onequarter /onehalf
/threequarters /questiondown /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
/Egrave /Eacute /Ecircumflex /Edieresis /Igrave /Iacute /Icircumflex /Idieresis /Eth /Ntilde
/Ograve /Oacute /Ocircumflex /Otilde /Odieresis /multiply /Oslash /Ugrave /Uacute /Ucircumflex
/Udieresis /Yacute /Thorn /germandbls /agrave /aacute /acircumflex /atilde /adieresis /aring
/ae /ccedilla /egrave /eacute /ecircumflex /edieresis /igrave /iacute /icircumflex /idieresis
/eth /ntilde /ograve /oacute /ocircumflex /otilde /odieresis /divide /oslash /ugrave
/uacute /ucircumflex /udieresis /yacute /thorn /ydieresis] /isolatin1encoding exch def
/Times-Roman-latin1
    /Times-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-Italic-latin1
    /Times-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-Bold-latin1
    /Times-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Times-BoldItalic-latin1
    /Times-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-Book-latin1
    /AvantGarde-Book findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-BookOblique-latin1
    /AvantGarde-BookOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-Demi-latin1
    /AvantGarde-Demi findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/AvantGarde-DemiOblique-latin1
    /AvantGarde-DemiOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-Light-latin1
    /Bookman-Light findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-LightItalic-latin1
    /Bookman-LightItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-Demi-latin1
    /Bookman-Demi findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Bookman-DemiItalic-latin1
    /Bookman-DemiItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-latin1
    /Courier findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-Oblique-latin1
    /Courier-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-Bold-latin1
    /Courier-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Courier-BoldOblique-latin1
    /Courier-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-latin1
    /Helvetica findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Oblique-latin1
    /Helvetica-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Bold-latin1
    /Helvetica-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-BoldOblique-latin1
    /Helvetica-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-latin1
    /Helvetica-Narrow findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-Oblique-latin1
    /Helvetica-Narrow-Oblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-Bold-latin1
    /Helvetica-Narrow-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Helvetica-Narrow-BoldOblique-latin1
    /Helvetica-Narrow-BoldOblique findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Roman-latin1
    /NewCenturySchoolbook-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Italic-latin1
    /NewCenturySchoolbook-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-Bold-latin1
    /NewCenturySchoolbook-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/NewCenturySchoolbook-BoldItalic-latin1
    /NewCenturySchoolbook-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Roman-latin1
    /Palatino-Roman findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Italic-latin1
    /Palatino-Italic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-Bold-latin1
    /Palatino-Bold findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Palatino-BoldItalic-latin1
    /Palatino-BoldItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/Symbol-latin1
    /Symbol findfont
definefont pop
/ZapfChancery-MediumItalic-latin1
    /ZapfChancery-MediumItalic findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/ZapfDingbats-latin1
    /ZapfDingbats findfont
    dup length dict begin
	{1 index /FID ne {def} {pop pop} ifelse} forall
	/Encoding isolatin1encoding def
    currentdict end
definefont pop
/cp {closepath} bind def
/c {curveto} bind def
/f {fill} bind def
/a {arc} bind def
/ef {eofill} bind def
/ex {exch} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth pop} bind def
/tr {translate} bind def

/ellipsedict 8 dict def
ellipsedict /mtrx matrix put
/ellipse
{ ellipsedict begin
   /endangle exch def
   /startangle exch def
   /yrad exch def
   /xrad exch def
   /y exch def
   /x exch def   /savematrix mtrx currentmatrix def
   x y tr xrad yrad sc
   0 0 1 startangle endangle arc
   savematrix setmatrix
   end
} def

/mergeprocs {
dup length
3 -1 roll
dup
length
dup
5 1 roll
3 -1 roll
add
array cvx
dup
3 -1 roll
0 exch
putinterval
dup
4 2 roll
putinterval
} bind def
28.346000 -28.346000 scale
6.500000 -10.245000 translate
%%EndProlog


/Helvetica-latin1 ff 0.800000 scf sf
0.000000 0.000000 0.000000 srgb
(LLVM) dup sw 2 div 15.500000 ex sub 5.400000 m gs 1 -1 sc sh gr
(.s File) dup sw 2 div 15.500000 ex sub 6.200000 m gs 1 -1 sc sh gr
1.000000 1.000000 1.000000 srgb
n 16.825000 5.425000 m 16.825000 8.325000 l 24.025000 8.325000 l 24.025000 5.425000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 16.825000 5.425000 m 16.825000 8.325000 l 24.025000 8.325000 l 24.025000 5.425000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Per-module) dup sw 2 div 20.425000 ex sub 6.625000 m gs 1 -1 sc sh gr
(Optimization) dup sw 2 div 20.425000 ex sub 7.825000 m gs 1 -1 sc sh gr
0.080000 slw
0 slj
[] 0 sd
1.000000 1.000000 1.000000 srgb
n 26.375000 5.335000 m 26.375000 8.225000 l 29.775000 8.225000 l 29.775000 5.335000 l f
0.000000 0.000000 0.000000 srgb
n 26.375000 5.335000 m 26.375000 8.225000 l s
n 29.775000 5.335000 m 29.775000 8.225000 l s
1.000000 1.000000 1.000000 srgb
n 28.075000 5.335000 1.700000 0.850000 0 360 ellipse f
0.000000 0.000000 0.000000 srgb
n 28.075000 5.335000 1.700000 0.850000 0 360 ellipse cp s
1.000000 1.000000 1.000000 srgb
n 28.075000 8.225000 m 28.075000 8.225000 1.700000 0.850000 0.000000 180.000000 ellipse f
0.000000 0.000000 0.000000 srgb
n 28.075000 8.225000 1.700000 0.850000 0.000000 180.000000 ellipse s
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 24.025000 6.875000 m 26.400000 6.900000 l s
0 slj
n 25.595834 7.291557 m 26.400000 6.900000 l 25.604255 6.491602 l f
/Helvetica-latin1 ff 0.800000 scf sf
(LLVM) dup sw 2 div 25.200000 ex sub 6.400000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.200000 scf sf
(.o) dup sw 2 div 28.000000 ex sub 6.900000 m gs 1 -1 sc sh gr
(files) dup sw 2 div 28.000000 ex sub 8.100000 m gs 1 -1 sc sh gr
0.819608 0.819608 0.819608 srgb
n 1.700000 5.500000 m 1.700000 8.300000 l 8.600000 8.300000 l 8.600000 5.500000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 1.700000 5.500000 m 1.700000 8.300000 l 8.600000 8.300000 l 8.600000 5.500000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(Integrated) dup sw 2 div 5.100000 ex sub 6.700000 m gs 1 -1 sc sh gr
(Preprocessor) dup sw 2 div 5.100000 ex sub 7.900000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.200000 scf sf
(Source File) dup sw 2 div -2.900000 ex sub 6.500000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.200000 scf sf
(Header Files) dup sw 2 div -3.100000 ex sub 7.900000 m gs 1 -1 sc sh gr
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 0.100000 6.200000 m 1.700000 6.200000 l s
0 slj
n 0.900000 6.600000 m 1.700000 6.200000 l 0.900000 5.800000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 0.100000 7.600000 m 1.700000 7.600000 l s
0 slj
n 0.900000 8.000000 m 1.700000 7.600000 l 0.900000 7.200000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slc
n 14.500000 6.900000 m 16.825000 6.875000 l s
0 slj
n 16.029347 7.283579 m 16.825000 6.875000 l 16.020745 6.483625 l f
0.820000 0.820000 0.820000 srgb
n 8.600000 5.500000 m 8.600000 8.300000 l 14.500000 8.300000 l 14.500000 5.500000 l f
0.100000 slw
[] 0 sd
[] 0 sd
0 slj
0.000000 0.000000 0.000000 srgb
n 8.600000 5.500000 m 8.600000 8.300000 l 14.500000 8.300000 l 14.500000 5.500000 l cp s
/Times-Roman-latin1 ff 1.200000 scf sf
(cc1) dup sw 2 div 9.800000 ex sub 6.700000 m gs 1 -1 sc sh gr
/Times-Roman-latin1 ff 1.200000 scf sf
(rtl2llvm) dup sw 2 div 12.300000 ex sub 7.900000 m gs 1 -1 sc sh gr
showpage

%%EndDocument
 @endspecial 2190 1250 a Fq(Figure)42 b(3:)52 b(GCC)41
b(C)g(Front-end)i(Compiler)e(Or)m(g)o(anization)0 1784
y(which)53 b(include)h(the)f(preprocessor)g(\(which)h(is)f(actually)h
(inte)n(grated)f(in)h(with)g(the)f(C)h(front-end)g(in)g(this)f(release)
g(of)h(GCC\),)f(the)g(C)0 2003 y(front-end,)42 b(the)f(assembler)-7
b(,)41 b(and)g(the)g(link)n(er)-9 b(.)249 2222 y(Our)55
b(port)g(required)g(modifying)g(the)g(GCC)f(compiler)h(back-end)f
(\(which)h(is)f(part)h(of)g(the)f Fn(cc1)g Fq(e)n(x)n(ecutable\))f(to)h
(emit)h(LL)-17 b(VM)0 2441 y(code)37 b(\(described)g(in)h(Section)g
(5.6.1\),)f(implementing)h(an)g(assembler)e(for)j(GCC)e(to)g(in)-7
b(v)m(ok)n(e)38 b(\()p Fn(gccas)p Fq(,)f(described)g(in)g(Section)h
(5.6.2\),)0 2660 y(and)h(implementing)h(a)f(link)n(er)h(for)g(GCC)f(to)
h(in)-7 b(v)m(ok)n(e)39 b(\()p Fn(gccld)p Fq(,)f(described)h(in)g
(Section)h(5.6.3\).)49 b(As)39 b(e)n(xpected,)f(the)i(preprocessor)e
(and)0 2880 y(C)j(parser)g(were)h(not)f(modi\002ed.)0
3342 y Fe(5.6.1)165 b(Modi\002cations)42 b(to)g(the)g(GCC)f(back-end:)
53 b Fn(cc1)0 3673 y Fq(Normally)-11 b(,)43 b(GCC)f(uses)f(tw)n(o)i
(intermediate)g(representations)f(for)h(its)g(internal)f(compilation)h
(processes,)e(the)h(\223tree\224)g(representation)0 3892
y(\(an)58 b(Abstract)g(Syntax)h(T)-6 b(ree\),)63 b(and)58
b(the)g(Re)n(gister)g(T)-6 b(ransfer)59 b(Language)f(\(a)g(lo)l(w-le)l
(v)n(el,)k(untyped,)g(machine)c(independent)g(repre-)0
4111 y(sentation\).)100 b(GCC)58 b(compiles)f(a)h(function)g(at)g(a)g
(time)g(into)g(the)g(tree)g(representation,)j(performs)e(optimization)f
(on)g(it)g(\(including)0 4330 y(source)45 b(language)g(speci\002c)g
(optimizations\),)i(then)f(uses)e(a)i(tar)m(get-dependent)f(machine)h
(description)f(\002le)h(to)g(transform)g(tree-code)0
4550 y(into)j(tar)m(get-speci\002c)f(R)-10 b(TL)49 b(code.)71
b(Once)48 b(in)g(R)-10 b(TL)49 b(form,)i(traditional)e(scalar)e
(optimizations)i(are)f(used)g(to)g(optimize)h(the)f(program,)0
4769 y(including)42 b(an)f(e)n(xperimental)g(SSA)h(based)f(dead)g(code)
g(elimination)h(pass.)249 4988 y(F)n(or)e(our)h(port,)f(we)g(w)n(anted)
g(to)g(be)g(as)f(minimally)i(in)-7 b(v)l(asi)l(v)n(e)39
b(in)i(the)f(GCC)f(source-base)g(as)g(possible,)h(while)g(being)g(able)
f(to)i(reuse)0 5207 y(most)57 b(of)g(the)f(GCC)h(infrastructure.)97
b(As)56 b(such,)j(we)e(decided)f(that)h(it)g(w)n(ould)g(be)g(most)f
(appropriate)h(to)g(con)-7 b(v)n(ert)57 b(R)-10 b(TL)57
b(to)g(LL)-17 b(VM)0 5426 y(code)41 b(instead)f(of)i(the)f(tree)g
(representation,)f(allo)l(wing)h(us)g(to)g(mak)n(e)h(use)e(of)i(the)f
(scalar)f(optimizations)h(already)g(in)h(GCC.)e(W)-13
b(e)40 b(wrote)0 5645 y(a)60 b(simple)g(machine)g(description)g
(\002le,)k(describing)c(a)g(simple)g(orthogonal)h(machine)e(free)i(of)f
(peculiarities)g(that)g(w)n(ould)h(unduly)0 5865 y(complicate)44
b(the)h(generated)f(R)-10 b(TL.)45 b(Because)e(LL)-17
b(VM)46 b(is)f(unlik)n(e)g(normal)g(tar)m(gets)g(\(it)g(is)g(SSA)g
(based,)f(and)h(doesn')m(t)f(require)i(re)n(gister)0
6084 y(allocation\),)41 b(we)g(changed)g(the)g(compiler)h(to)g(emit)g
(LL)-17 b(VM)42 b(code)f(after)h(SSA)g(based)e(dead-code)h
(elimination.)249 6303 y(One)h(disadv)l(antage)f(of)i(con)-7
b(v)n(erting)43 b(R)-10 b(TL)43 b(to)f(LL)-17 b(VM)43
b(\(as)f(opposed)g(to)h(the)f(tree)h(representation\),)f(is)g(the)g(R)
-10 b(TL)43 b(is)g(untyped.)53 b(Be-)0 6522 y(cause)41
b(of)h(this,)f(we)g(only)h(kno)l(w)g(the)g(size)e(of)j(inte)n(gral)e
(data-types,)g(not)h(their)g(sign.)52 b(Additionally)-11
b(,)42 b(we)f(ha)m(v)n(e)f(no)i(information)h(about)0
6741 y(what)f(type)g(a)g(pointer)h(refers)f(to,)g(and)g(all)h(pointer)g
(arithmetic)f(has)g(been)g(lo)l(wered)f(to)i(e)n(xplicit)f(arithmetic.)
54 b(W)-13 b(e)41 b(do,)h(ho)l(we)l(v)n(er)-7 b(,)41
b(ha)m(v)n(e)0 6960 y(access)g(to)j(type)f(information)i(for)e
(function)h(ar)m(guments,)f(global)h(v)l(ariables,)e(and)h(typedef)h
(information)g(\(by)g(adding)f(\223deb)m(ugging\224)0
7180 y(hooks)c(to)h(GCC\),)f(and)g(some)g(information)i(that)e(w)n(as)g
(implicitly)i(encoded)e(into)g(the)h(instructions)f(of)h(the)g(R)-10
b(TL)40 b(code)f(\(for)h(e)n(xample,)0 7399 y(information)j(about)e
(sign)g(is)h(encoded)e(into)i(the)g(choice)f(of)g(a)h(signed)f(or)g
(unsigned)h(di)l(vide)f(instruction\).)249 7618 y(Due)63
b(to)g(these)f(limitations,)69 b(almost)63 b(all)g(pointers)g(in)h(the)
f(program)g(compiled)g(by)h(the)f(LL)-17 b(VM)64 b(GCC)e(front-end)i
(are)f(plain)0 7837 y(byte)g(pointers,)68 b(completely)63
b(lacking)g(high)g(le)l(v)n(el)f(information.)117 b(W)-13
b(e)62 b(suspect)g(that)h(other)g(retar)m(geted)g(compilers)g(w)n(ould)
g(ha)m(v)n(e)0 8056 y(similar)56 b(problems,)i(because)c(most)h
(optimization)g(happens)g(on)g(lo)l(w-le)l(v)n(el)g(representations.)91
b(T)-13 b(o)56 b(compensate)e(for)i(this)f(lack)g(of)0
8276 y(information,)47 b(the)e(GCC)g(front-end)h(encodes)e(as)h(much)g
(type)g(information)i(as)d(possible)h(by)g(inserting)h(casts)e(where)h
(it)g(kno)l(ws)g(that)0 8495 y(something)56 b(is)g(signed)g(or)g
(unsigned,)j(and)d(by)h(emitting)g(accurate)e(function)i(prototypes)f
(and)g(global)g(v)l(ariable)g(declarations.)95 b(It)0
8714 y(depends)41 b(on)g(the)h(optimizing)g(assembler)e(to)i(clean)f
(up)g(the)h(rest)f(of)h(the)f(type)h(information.)0 9176
y Fe(5.6.2)165 b(The)41 b(Optimizing)j(Assembler:)50
b Fn(gccas)0 9507 y Fq(The)38 b(assembler)f(is)g(in)-7
b(v)m(ok)n(ed)38 b(by)g(GCC)f(to)h(turn)g(a)g(te)n(xtual)f(LL)-17
b(VM)38 b(program)h(into)f(an)f(LL)-17 b(VM)39 b(object)e(\002le)h
(\(which)g(is)f(the)h(compressed)0 9726 y(bytecode)46
b(representation\).)67 b(This)47 b(in)-7 b(v)m(olv)n(es)47
b(more)g(tasks)f(than)g(the)h(standard)g(LL)-17 b(VM)47
b Fn(as)f Fq(utility)i(mentioned)f(in)g(Section)g(5.1,)g(for)0
9946 y(se)l(v)n(eral)37 b(reasons.)49 b(The)39 b(tw)n(o)g(reasons)e
(for)i Fn(gccas)e Fq(to)h(be)g(distinct)h(from)g Fn(as)f
Fq(w)n(as)g(that)g(the)h(GCC)f(dri)l(v)n(er)g(e)n(xpected)f(the)h
(assembler)g(to)0 10165 y(pro)n(vide)43 b(command)h(line)f(ar)m
(guments)g(dif)l(ferent)h(than)g(the)f(ar)m(guments)g(e)n(xpected)f(by)
i Fn(as)p Fq(,)f(and)g(the)g(f)n(act)h(that)g(we)f(w)n(anted)g(to)h(in)
-7 b(v)m(ok)n(e)0 10384 y(LL)-17 b(VM)41 b(infrastructure)g(passes)e
(on)i(the)g(code)f(generated)g(by)g(GCC)g(\(for)i(e)n(xample,)d(the)i
(\223le)l(v)n(el)e(raising\224)h(transformation)i(described)0
10603 y(in)g(Section)f(4.2\).)3817 11160 y(16)p eop
%%Page: 17 17
17 16 bop 249 166 a Fq(W)-13 b(e)35 b(also)h(found)h(that)f(man)n(y)g
(of)g(the)g(scalar)g(optimizations)g(implemented)g(directly)h(in)f(LL)
-17 b(VM)37 b(are)f(f)n(aster)g(or)h(are)f(more)g(ef)l(fecti)l(v)n(e)0
385 y(than)50 b(those)g(b)m(uilt)g(into)h(GCC)f(\(because)f(we)h
(perform)h(all)f(of)h(our)f(optimizations)h(in)f(a)g(sparse)g(manner)g
(on)g(SSA)h(form)g(instead)f(of)0 604 y(using)g(dense)f(data-\003o)l(w)
h(analysis,)h(and)f(because)f(the)n(y)g(are)h(all)g(global)h
(transformations,)h(whereas)d(some)g(of)i(GCC')-9 b(s)49
b(operate)h(on)0 824 y(e)n(xtended)c(basic)f(blocks\).)66
b(Thus)47 b(we)f(ha)m(v)n(e)f(been)i(able)f(to)h(reduce)f(compilation)h
(time)f(by)h(disabling)f(them)h(in)g(GCC)f(and)g(enabling)0
1043 y(the)38 b(equi)l(v)l(alent)g(transformation)g(in)h
Fn(gccas)p Fq(.)48 b(In)38 b(addition,)h(se)l(v)n(eral)e(LL)-17
b(VM)39 b(passes)d(ha)m(v)n(e)h(no)h(analog)g(in)g(the)g(GCC)g
(compiler)g(\(such)0 1262 y(as)56 b(our)h(generalized)f
Fn(mem2reg)e Fq(pass,)k(described)e(in)h(Section)g(4.3\),)i(b)m(ut)e
(we)f(w)n(ould)h(lik)n(e)g(to)g(use)f(then)g(for)h(their)g(general)g
(code)0 1481 y(impro)n(v)n(ement)41 b(capabilities.)249
1700 y(Note)46 b(that)h(when)e(porting)i(a)f(dif)l(ferent)h(compiler)g
(with)f(more)h(aggressi)l(v)n(e)d(optimizations)j(to)f(LL)-17
b(VM,)47 b(it)f(w)n(ould)h(be)f(important)0 1919 y(to)e(re)l(visit)f
(the)g(decision)g(of)g(which)h(optimizations)f(to)g(mo)n(v)n(e)g(to)g
(the)h(equi)l(v)l(alent)e(of)i Fn(gccas)d Fq(for)j(that)g(compiler)-9
b(.)56 b(Because)42 b Fn(gccas)0 2139 y Fq(is)e(implemented)g(by)g
(simply)h(in)-7 b(v)m(oking)40 b(transformations)h(from)g(a)f(common)g
(library)h(of)f(transformations)h(a)m(v)l(ailable)e(in)h(the)g(LL)-17
b(VM)0 2358 y(infrastructure,)37 b(it)g(should)f(be)h(a)f(simple)g
(matter)h(of)f(selecting)g(the)g(transformations)h(to)g(run)f(and)g
(writing)i(the)e(command)g(line)h(option)0 2577 y(processing)k(code)g
(to)g(match)h(the)f(desired)g(interf)n(ace.)0 3039 y
Fe(5.6.3)165 b(The)41 b(Optimizing)j(Link)n(er:)52 b
Fn(gccld)0 3370 y Fq(Lik)n(e)g Fn(gccas)p Fq(,)f Fn(gccld)f
Fq(is)h(in)-7 b(v)m(ok)n(ed)51 b(by)g(the)h(GCC)e(compiler)i(dri)l(v)n
(er)-7 b(,)53 b(in)e(this)h(case,)f(to)h(link)f Fn(.o)g
Fq(\002les)g(together)g(into)h(a)f(library)h(or)0 3589
y(application.)d(T)-13 b(o)35 b(ease)f(inte)n(gration)h(with)g(GCC,)f
Fn(gccld)f Fq(pro)n(vides)i(a)g(set)f(of)i(command-line)f(options)g
(compatible)g(with)g(traditional)0 3809 y(link)n(ers)53
b(\(such)f(as)h(the)f Fn(-llibrary)p Fq(,)g Fn(-Lpath)p
Fq(,)h(and)f Fn(-s)g Fq(options\).)85 b(It)53 b(links)g(together)g(the)
g(LL)-17 b(VM)53 b(object)g(\002les,)i(b)m(ut)d(can)h(also)0
4028 y(perform)k(aggressi)l(v)n(e)d(post-link)j(optimizations)f(as)g
(sho)l(wn)f(in)i(Figure)f(2.)95 b(The)57 b(optimizing)f(link)n(er)h(w)n
(as)f(described)f(in)i(detail)f(in)0 4247 y(Section)42
b(5.5.)0 4746 y Fl(5.7)198 b(Nati)n(v)n(e)50 b(Code)g(Generator)h(f)-5
b(or)50 b(Spar)l(c)h(v9)0 5077 y Fq(Our)j(\002rst)h(nati)l(v)n(e)e
(code)g(generator)h(tar)m(gets)g(the)g(64-bit)g(Sparc)g(v9)g
(architecture.)89 b(It)54 b(includes)f(an)h(instruction)h(selector)e
(based)g(on)0 5296 y(B)n(URG)37 b([15],)i(a)e(graph-coloring)h(re)n
(gister)f(allocator)-7 b(,)38 b(and)f(a)h(resource-unit-based)e(local)i
(instruction)f(scheduler)-9 b(.)49 b(All)38 b(three)f(phases)0
5515 y(ha)m(v)n(e)j(been)h(designed)g(to)h(relati)l(v)n(ely)f(easy)f
(to)i(retar)m(get,)f(as)g(discussed)f(at)h(the)h(end)f(of)h(this)f
(subsection)g(belo)l(w)-11 b(.)249 5734 y(B)n(URG)41
b(operates)h(on)f(a)h(tree)g(representation)f(of)h(a)g(procedure)f(and)
h(uses)f(machine-dependent)g(patterns)g(and)h(associated)e(costs)0
5954 y(to)k(select)f(optimal)h(instruction)h(sequences)d(via)h(dynamic)
h(programming.)59 b(The)44 b(instruction)g(selection)g(phase)f(in)h(LL)
-17 b(VM)44 b(uses)f(the)0 6173 y(SSA)d(graph)f(to)h(construct)f(B)n
(URG)g(trees.)50 b(A)39 b(B)n(URG)g(tree)h(is)f(a)g(tree)g(of)h
(instructions,)g(where)f(the)g(children)h(of)f(an)g(instruction,)h
Fp(I)9 b Fq(,)39 b(are)0 6392 y(those)47 b(that)g(compute)g(the)g
(operands)g(of)g Fp(I)9 b Fq(,)48 b(and)f(the)g(parent)g(\(if)h(an)n
(y\))f(is)g(some)g(instruction)g(that)g(uses)f(the)h(result)h(of)f
Fp(I)9 b Fq(.)68 b(In)47 b(the)g(SSA)0 6611 y(graph)37
b(and)f(in)h(real)g(code,)f(ho)l(we)l(v)n(er)-7 b(,)37
b(an)f(instruction)h(may)g(ha)m(v)n(e)e(multiple)i(users,)f(and)h(at)f
(most)h(one)f(user)h(can)f(be)g(represented)g(in)h(the)0
6830 y(tree)i(\(This)g(need)f(for)i(trees)e(in)h(pattern-matching)g
(rather)g(than)g(D)-7 b(A)g(Gs)38 b(is)h(one)f(of)h(the)g(major)g
(limitations)h(of)f(the)f(B)n(URG)h(approach\).)249 7049
y(W)-13 b(e)37 b(con)-7 b(v)n(ert)38 b(the)g(graph)g(to)g(a)g(tree)g
(based)f(on)h(the)g(follo)l(wing)g(observ)l(ation:)50
b(The)38 b(fundamental)g(optimization)h(that)f(e)n(xploits)f(tree)0
7269 y(edges)42 b(is)h(to)h(produce)f(the)g(lo)l(west)g(cost)g
(sequence)e(for)j(tw)n(o)g(\(or)g(more\))g(instructions)f(that)g
(produce)g(and)g(then)g(consume)g(a)g(v)l(alue)g(or)0
7488 y(a)48 b(sequence)e(of)i(v)l(alues.)69 b(The)48
b(most)g(common)g(e)n(xample)f(is)g(folding)i(tw)n(o)f(such)f
(instructions)h(into)g(a)f(single)h(machine)f(instruction.)0
7707 y(If)58 b(the)g(result)f(of)h(instruction)g Fp(I)67
b Fq(is)57 b(used)g(by)h(multiple)g(instructions,)k(it)57
b(cannot)h(be)f(folded)h(with)g(an)n(y)f(of)h(them.)100
b(Therefore,)61 b(we)0 7926 y(do)46 b(not)g(connect)g(such)f(an)h
(instruction)g(to)g(its)g(users.)63 b(It)47 b(is)f(also)f(dif)l
(\002cult)i(to)f(fold)g(tw)n(o)h(instructions)f(from)g(dif)l(ferent)h
(basic)e(blocks.)0 8145 y(Therefore,)35 b(we)f(b)m(uild)g(B)n(URG)f
(trees)g(and)h(perform)h(instruction)f(selection)f(separately)g(for)h
(each)f(basic)g(block.)49 b(The)34 b(B)n(URG)f(patterns)0
8365 y(and)41 b(costs)g(are)g(based)g(on)g(cost)g(estimates)g(for)h
(the)f(Ultra-SP)-15 b(ARC)42 b(IIi)g(processor)f([27].)249
8584 y(The)52 b(local)g(instruction)h(scheduling)e(phase)h(uses)f(a)h
(forw)n(ard)h(list)f(scheduling)f(algorithm)i(on)f(indi)l(vidual)h
(basic)e(blocks)h([22].)0 8803 y(The)33 b(algorithm)h(assumes)d(a)i
(statically)f(scheduled)g(super)m(-scalar)g(architecture)h(and)f(uses)g
(a)h(greedy)f(grouping)i(of)f(instructions)g(in)g(the)0
9022 y(slots)42 b(for)g(each)g(c)n(ycle.)51 b(The)43
b(algorithm)g(b)m(uilds)e(a)h(dependence)f(graph)h(for)h(the)f(machine)
g(instructions)g(generated)f(by)i(the)f(selection)0 9241
y(phase,)e(using)g(SSA)i(information)g(to)f(greatly)g(speed)f(up)h(the)
g(detection)f(of)i(most)f(dependences)e(\(since)h(re)n(gister)h
(allocation)g(has)f(not)0 9460 y(yet)h(been)g(performed,)h(instruction)
g(operands)f(are)g(still)h(in)f(near)m(-SSA)h(form\).)52
b(Both)42 b(the)f(scheduling)g(heuristics)g(and)g(the)g(grouping)0
9680 y(are)48 b(based)f(on)h(an)g(e)n(xtensi)l(v)n(e)e(parametric)i
(description)g(of)g(the)g(instruction)h(costs,)f(pipeline)g(resources,)
g(and)g(issue)f(constraints)h(of)0 9899 y(the)h(tar)m(get)g(processor)
-9 b(.)72 b(This)49 b(allo)l(ws)f(the)h(compiler)g(code)f(itself)h(to)g
(be)g(entirely)g(tar)m(get-independent.)73 b(The)49 b(algorithm)h
(considers)0 10118 y(detailed)44 b(issue)g(constraints)g(including)h
(restrictions)g(on)f(issue)g(slots,)h(grouping)g(of)g(instructions,)g
(pipeline)g(b)m(ubbles)e(produced)i(by)0 10337 y(indi)l(vidual)57
b(opcodes,)i(and)d(minimum)i(inter)m(-instruction)f(issue)e(delays)h
(\(i.e.,)j(when)d(a)h(certain)f(number)h(of)g(c)n(ycles)e(must)h
(elapse)0 10556 y(between)41 b(issuing)g(one)g(opcode)g(and)g
(another\).)3817 11160 y(17)p eop
%%Page: 18 18
18 17 bop 249 166 a Fq(Finally)-11 b(,)41 b(the)f(re)n(gister)f
(allocation)h(phase)f(is)h(a)g(straightforw)n(ard)h(implementation)f
(of)g(Chaitin')-9 b(s)40 b(algorithm)h(for)f(graph)h(coloring)0
385 y(re)n(gister)50 b(allocation)g([9])g(as)g(modi\002ed)g(by)g
(Briggs)g(et)g(al)g(\(particularly)h(for)g(deferred)f(spilling\))h
([7].)77 b(W)-13 b(e)49 b(use)h(a)f(separate)h(iterati)l(v)n(e)0
604 y(data-\003o)l(w)63 b(analysis)f(to)i(compute)f(the)g(li)l(v)n
(eness)e(for)j(virtual)g(re)n(gisters.)115 b(Once)62
b(this)h(is)g(a)m(v)l(ailable,)k(the)c(SSA)h(representation)f(in)0
824 y(LL)-17 b(VM)40 b(mak)n(es)g(it)g(straightforw)n(ard)g(to)g(b)m
(uild)g(the)f(interference)h(graph.)50 b(W)-13 b(e)39
b(use)g(a)g(set)g(of)h(parameters)f(to)h(describe)f(re)n(gister)g
(classes)0 1043 y(of)44 b(the)g(tar)m(get)g(machine,)g(to)g(k)n(eep)g
(most)g(of)h(the)f(allocation)g(algorithm)g(machine-independent)g
(\(Some)h(machine-speci\002c)e(code)g(is)0 1262 y(necessary)48
b(as)h(described)g(belo)l(w\).)75 b(W)-13 b(e)49 b(use)g(assignment)g
(hints)g(for)i(speci\002c)e(v)l(alues)f(such)h(as)g(procedure)h(ar)m
(guments)f(and)g(return)0 1481 y(v)l(alues)41 b(to)g(guide)h(re)n
(gister)f(allocation)g(and)g(assignment)g(and)g(reduce)g(the)h(need)f
(for)h(copies.)249 1700 y(T)-13 b(w)n(o)44 b(k)n(e)n(y)e(missing)h
(pieces)f(in)h(the)g(current)g(code)g(generator)g(are)g(a)f(peephole)h
(optimizer)g(and)g(a)g(global)g(instruction)g(scheduler)-9
b(.)0 1919 y(W)c(e)34 b(are)h(currently)h(de)l(v)n(eloping)e(a)h
(global)h(scheduler)e(based)g(on)h(the)h(Swing)f(algorithm)h(for)g
(modulo)g(scheduling)e([18].)50 b(Because)33 b(the)0
2139 y(global)40 b(scheduler)f(must)h(mo)n(v)n(e)e(code)i(across)e
(basic)h(blocks,)h(a)f(k)n(e)n(y)g(design)h(goal)f(is)h(to)g(perform)h
(global)e(scheduling)h(on)g(the)f(LL)-17 b(VM)0 2358
y(code,)45 b(using)g(cost)g(information)h(for)g(the)f(tar)m(get)g
(machine)3463 2298 y Fm(7)3533 2358 y Fq(.)62 b(This)46
b(is)f(important)g(for)h(a)f(no)n(v)n(el)f(runtime)i(optimization)g
(strate)n(gy)e(we)0 2577 y(are)53 b(e)n(xploring,)i(as)e(discussed)e
(brie\003y)j(in)f(Section)h(5.8.)85 b(A)53 b(tar)m(get-dependent)g
(peephole)f(optimizer)i(will)f(be)g(added)g(in)g(the)g(near)0
2796 y(future.)249 3015 y(W)-13 b(e)60 b(belie)l(v)n(e)f(the)h(code)g
(generator)g(should)h(be)f(relati)l(v)n(ely)g(easy)f(to)i(re-tar)m(get)
g(to)f(other)h(similar)f(architectures.)107 b(The)61
b(use)f(of)0 3235 y(B)n(URG)f(for)h(instruction)g(selection)f(mak)n(es)
g(this)g(phase)g(conceptually)g(simple)g(to)h(retar)m(get,)k(b)m(ut)59
b(this)g(phase)g(still)h(has)f(the)g(most)0 3454 y(machine-dependent)c
(code.)91 b(Porting)56 b(this)f(phase)g(to)g(a)g(ne)l(w)g(architecture)
g(requires)g(modifying)h(the)f(B)n(URG)g(pattern)g(rules)g(and)0
3673 y(costs,)36 b(and)g(re)l(writing)i(the)e(machine)g(speci\002c)g
(code)g(that)g(synthesizes)f(speci\002c)h(opcodes)g(from)h(LL)-17
b(VM)37 b(instructions.)50 b(The)36 b(detailed)0 3892
y(parameterized)50 b(resource)g(model)h(used)f(for)i(scheduling)e
(should)g(be)h(simple)f(to)h(re-tar)m(get)h(for)f(other)g(similar)g
(architectures.)78 b(The)0 4111 y(re)n(gister)44 b(allocator)g(uses)g
(a)g(collection)g(of)h(tar)m(get-speci\002c)f(instances)g(of)g(generic)
g(classes)f(\(which)i(ha)m(v)n(e)e(a)h(tar)m(get-independent)h(in-)0
4330 y(terf)n(ace\))36 b(to)g(manage)g(machine)f(speci\002c)h(details)f
(such)h(as)f(pro)n(viding)h(re)n(gister)g(assignment)f(hints)h(and)g
(to)g(generate)f(code)h(sequences)0 4550 y(for)42 b(cop)n(ying)g(and)f
(spilling.)0 5048 y Fl(5.8)198 b(Runtime)51 b(Re-optimizer)0
5379 y Fq(One)f(of)g(the)h(k)n(e)n(y)e(research)h(goals)g(of)g(the)g
(LL)-17 b(VM)51 b(project)g(is)f(to)g(de)l(v)n(elop)f(a)h(ne)l(w)g
(strate)n(gy)g(for)g(runtime)h(optimization)g(and)f(no)n(v)n(el)0
5599 y(optimization)k(algorithms,)i(by)d(e)n(xploiting)g(the)g(LL)-17
b(VM)54 b(code)f(representation.)85 b(Unlik)n(e)54 b(other)f(virtual)h
(machine)f(based)f(systems)0 5818 y(such)43 b(as)g(those)h(for)g
(SmallT)-13 b(alk,)45 b(Self,)f(Ja)m(v)l(a,)f(or)h(Microsoft)f(CLR,)h
(the)f(goal)h(in)g(LL)-17 b(VM)45 b(is)e(to)h(generate)g(nati)l(v)n(e)f
(code-generation)g(at)0 6037 y(link-time,)50 b(and)f(to)f(perform)h
(runtime)g(optimization)g(on)f(this)h(machine)f(code,)h(using)f(the)g
(LL)-17 b(VM)49 b(representation)f(as)g(a)g(source)g(of)0
6256 y(analysis)40 b(information.)249 6475 y(The)35 b(k)n(e)n(y)g(to)g
(pro)n(viding)h(these)e(capabilities)g(is)h(to)g(maintain)g(a)g
(detailed)g(mapping)g(between)f(the)h(\002nal)h(form)f(of)h(LL)-17
b(VM)36 b(code)e(and)0 6695 y(the)50 b(generated)g(nati)l(v)n(e)g
(code.)77 b(The)50 b(precision)g(of)h(this)f(mapping)h(may)f(af)l(fect)
g(the)h(granularity)g(at)f(which)g(runtime)h(optimizations)0
6914 y(will)42 b(be)f(most)h(ef)l(fecti)l(v)n(e.)249
7133 y(W)-13 b(e)44 b(aim)h(to)f(use)g(tw)n(o)i(dif)l(ferent)f
(granularities)f(for)i(runtime)f(optimization:)58 b(traces)44
b(and)h(procedures.)59 b(T)-6 b(race-based)45 b(optimiza-)0
7352 y(tion)f(focuses)f(optimizations)i(on)f(frequently)g(e)n(x)n
(ecuted)e(dynamic)i(sequences)e(of)j(instructions)f(called)f(traces)h
([14,)g(4].)59 b(The)44 b(traces)0 7571 y(being)49 b(g)o(athered)f(in)h
(our)g(system)f(only)h(include)f(one)g(or)h(more)g(complete)g(basic)e
(blocks,)j(i.e.,)f(a)f(trace)g(is)h(a)f(dynamic)h(sequence)e(of)0
7790 y(basic)52 b(blocks.)84 b(A)52 b(k)n(e)n(y)g(property)h(of)g(our)g
(code)f(generator)h(is)f(that)h(e)l(v)n(ery)f(basic)f(block)i(of)g(LL)
-17 b(VM)53 b(code)f(maps)g(to)h(a)g(single)f(basic)0
8010 y(block)42 b(of)f(machine)h(code.)50 b(This)42 b(means)f(that)h(a)
f(trace)g(of)h(machine)f(code)g(can)g(be)h(mapped)f(directly)h(to)g
(the)f(corresponding)h(trace)f(in)0 8229 y(the)g(LL)-17
b(VM)43 b(code,)d(which)i(can)f(then)g(serv)n(e)f(as)h(a)g(source)g(of)
h(high-le)l(v)n(el)f(information)i(for)f(optimization.)249
8448 y(Procedure-based)i(optimization)h(is)f(widely)h(used)f(in)h(man)n
(y)f(adapti)l(v)n(e)f(JIT)i(optimizers)f([16)q(,)g(8,)g(28].)60
b(This)45 b(focuses)f(optimiza-)0 8667 y(tion)49 b(ef)l(fort)f(on)h
(entire)f(procedures)g(that)g(are)g(frequently)h(e)n(x)n(ecuted)d(\(or)
j(that)f(consume)g(a)g(lar)m(ge)g(fraction)h(of)f(e)n(x)n(ecution)f
(time)i([1]\).)0 8886 y(Procedure-based)k(optimization)h(can)f(be)g
(used)g(to)g(perform)h(more)g(aggressi)l(v)n(e)e(procedure-wide)h
(optimizations)g(on)h(the)f(LL)-17 b(VM)0 9105 y(code)41
b(based)g(on)g(runtime)h(information.)249 9325 y(The)32
b(trace-based)f(runtime)i(optimizer)g(is)f(currently)g(under)g(de)l(v)n
(elopment.)47 b(W)-13 b(e)32 b(ha)m(v)n(e)e(implemented)j(an)e
(instrumentation)i(phase)0 9544 y(that)51 b(inserts)g(lo)l(w)f(o)n(v)n
(erhead)g(tracing)h(code)g(into)g(LL)-17 b(VM)52 b(code)e(\(described)h
(in)g(Section)g(4.5\),)i(allo)l(wing)e(e)n(xtraction)f(of)i(hot)f
(traces)0 9763 y(from)46 b(the)f(program.)63 b(The)45
b(LL)-17 b(VM)46 b(bytecode)f(pro)n(vided)g(by)h(the)f(Sparc)g
(back-end)g(is)g(accessible)e(to)j(the)f(runtime)h(optimizer)f(when)0
9982 y(reoptimization)g(is)f(needed.)60 b(W)-13 b(e)44
b(are)g(currently)h(de)l(v)n(eloping)f(other)h(k)n(e)n(y)f(components)g
(including)h(a)f(trace)h(cache,)e(mechanisms)h(to)0 10201
y(switch)38 b(between)g(trace-based)g(and)g(normal)h(e)n(x)n(ecution,)e
(and)i(a)f(runtime)h(interf)n(ace)g(to)g(the)f(mapping)h(information)h
(g)o(athered)e(by)h(the)p 0 10526 3120 7 v 181 10636
a Fk(7)239 10684 y Fj(Note)34 b(that)f Fd(none)h Fj(of)g(the)g(code)g
(generation)h(phases)e(mo)n(v)n(es)h(machine)g(code)g(across)g(basic)f
(blocks.)3817 11160 y Fq(18)p eop
%%Page: 19 19
19 18 bop 0 166 a Fq(nati)l(v)n(e)36 b(code)g(generator)-9
b(.)50 b(This)37 b(system)f(should)h(then)g(pro)n(vide)f(a)h(no)n(v)n
(el)f(platform)h(for)h(e)n(xploring)f(ne)l(w)f(dynamic)h(optimizations)
g(that)0 385 y(are)k(much)h(more)f(aggressi)l(v)n(e)f(than)i(those)f
(pre)l(viously)g(attempted)g(in)h(binary)g(runtime)g(optimizers.)0
876 y Fl(5.9)198 b(Of\003ine)51 b(Re-optimizer)0 1207
y Fq(The)e(trace)g(generation)g(infrastructure)g(used)g(in)g(the)g
(runtime)h(re-optimizer)g(can)e(also)h(be)f(augmented)h(to)g(form)h
(the)f(basis)f(for)i(the)0 1427 y(of)l(\003ine)f(re-optimizer)-9
b(.)71 b(In)48 b(addition)h(to)f(traces,)h(we)f(w)n(ould)g(lik)n(e)h
(to)f(use)f(the)h(path-pro\002ling)i(information)f(for)g(aggressi)l(v)n
(e)d(pro\002le-)0 1646 y(directed)33 b(optimizations,)h(lik)n(e)g
(those)f(described)f(in)i(the)f(post-link)g(optimizer)-9
b(.)49 b(De)l(v)n(eloping)32 b(an)h(of)l(\003ine)h(reoptimization)f
(frame)l(w)n(ork)0 1865 y(is)41 b(a)g(topic)h(for)g(future)g(w)n(ork.)0
2448 y Fr(6)239 b(Conclusion)0 2839 y Fq(This)56 b(document)g(has)f
(introduced)i(the)f(LL)-17 b(VM)56 b(Compilation)h(Infrastructure,)i(a)
d(clean)g(ne)l(w)f(approach)h(for)g(tackling)g(today)g(and)0
3058 y(tomorro)l(w')-9 b(s)53 b(dif)l(\002cult)g(problems)f(in)h
(compilation.)83 b(It)53 b(is)f(designed)g(as)f(a)h(seamlessly)f
(replacement)h(for)h(pree)n(xisting)f(compilers,)0 3277
y(without)g(requiring)h(a)f(change)f(in)h(end-user)g(b)m(uild)g
(scripts)g(or)g(user)g(habits.)82 b(W)-7 b(ithin)53 b(the)f(constraint)
f(of)i(compatibility)f(with)h(pre-)0 3496 y(e)n(xisting)d(systems,)i
(we)f(ha)m(v)n(e)e(sho)l(wn)h(ho)l(w)h(interesting)g(transformations)g
(can)g(be)f(applied)h(to)g(real)g(w)n(orld)h(programs)f(and)g(sho)l(wn)
0 3715 y(ho)l(w)d(runtime)g(and)f(of)l(\003ine)i(optimization)f(\002t)g
(into)g(the)g(system)f(as)g(well.)70 b(LL)-17 b(VM)48
b(has)g(already)f(been)g(used)g(as)g(the)h(foundation)g(for)0
3934 y(interesting)42 b(research)e([20])i(and)g(we)f(look)g(forw)n(ard)
i(to)e(future)h(de)l(v)n(elopment.)0 4492 y Fr(Refer)l(ences)75
4847 y Fs([1])82 b(Matthe)l(w)42 b(Arnold)f(and)h(Barbara)h(G.)g(Ryder)
-8 b(.)70 b(A)42 b(frame)l(w)o(ork)g(for)g(reducing)g(the)g(cost)g(of)g
(instrumented)f(code.)71 b(In)42 b Fc(SIGPLAN)h(Confer)-6
b(ence)332 5048 y(on)37 b(Pr)-7 b(o)o(gr)n(amming)35
b(Langua)o(g)o(e)g(Design)i(and)g(Implementation)p Fs(,)d(pages)k
(168\226179,)e(2001.)75 5316 y([2])82 b(M.)36 b(A.)h(Auslander)e(and)h
(M.)h(E.)g(Hopkins.)50 b(An)36 b(o)n(v)n(ervie)l(w)f(of)h(the)f(pl.8)h
(compiler)-8 b(.)51 b(In)36 b Fc(Pr)-7 b(oc.)37 b(A)l(CM)f(SIGPLAN)g
(82)g(Symposium)f(on)g(Compiler)332 5516 y(Construction)p
Fs(,)g(pages)j(22\22631,)e(June)h(1982.)75 5784 y([3])82
b(Andre)l(w)50 b(A)-14 b(yers,)53 b(Stuart)c(de)h(Jong,)j(John)c(Pe)n
(yton,)k(and)c(Richard)g(Schooler)-8 b(.)94 b(Scalable)50
b(cross-module)f(optimization.)92 b Fc(A)l(CM)50 b(SIGPLAN)332
5985 y(Notices)p Fs(,)37 b(33\(5\):301\226312,)d(1998.)75
6252 y([4])82 b(V)-17 b(asanth)34 b(Bala,)h(Ev)n(elyn)f(Duesterw)o
(ald,)f(and)h(Sanjee)l(v)h(Banerjia.)46 b(Dynamo:)e(A)34
b(transparent)g(dynamic)f(optimization)f(system.)47 b(pages)35
b(1\22612.)75 6519 y([5])82 b(V)-17 b(asanth)40 b(Bala,)g(Ev)n(elyn)f
(Duesterw)o(ald,)g(and)h(Sanjee)l(v)g(Banerjia.)61 b(Dynamo:)50
b(A)39 b(T)-5 b(ransparent)39 b(Dynamic)h(Optimization)d(System.)62
b(In)39 b Fc(Pr)-7 b(oc.)332 6720 y(A)l(CM)37 b(SIGPLAN)g(Confer)-6
b(ence)38 b(on)f(Pr)-7 b(o)o(gr)n(amming)35 b(Langua)o(g)o(e)h(Design)g
(and)h(Implementation)p Fs(,)d(June)k(2000.)75 6988 y([6])82
b(Thomas)44 b(Ball)f(and)g(James)i(R.)e(Larus.)74 b(Ef)l(\002cient)44
b(path)e(pro\002ling.)72 b(In)43 b Fc(International)d(Symposium)i(on)h
(Micr)-7 b(oar)h(c)n(hitectur)g(e)p Fs(,)46 b(pages)e(46\22657,)332
7189 y(1996.)75 7456 y([7])82 b(Preston)36 b(Briggs,)g(K)l(eith)g(D.)h
(Cooper)-6 b(,)36 b(and)h(Linda)f(T)-12 b(orczon.)53
b(Impro)n(v)n(ements)36 b(to)g(graph)g(coloring)f(re)n(gister)h
(allocation.)51 b Fc(A)l(CM)37 b(T)-8 b(r)n(ansactions)332
7657 y(on)37 b(Pr)-7 b(o)o(gr)n(amming)35 b(Langua)o(g)o(es)g(and)i
(Systems)p Fs(,)h(16\(3\):428\226455,)c(May)j(1994.)75
7924 y([8])82 b(Michael)55 b(G.)h(Burk)o(e,)k(Jong-Deok)54
b(Choi,)59 b(Stephen)c(Fink,)60 b(Da)m(vid)55 b(Gro)n(v)n(e,)k(Michael)
d(Hind,)j(V)-9 b(i)l(v)n(ek)55 b(Sarkar)-6 b(,)61 b(Mauricio)54
b(J.)i(Serrano,)61 b(V)-11 b(u-)332 8125 y(granam)55
b(C.)g(Sreedhar)-6 b(,)60 b(Harini)54 b(Srini)l(v)l(asan,)60
b(and)55 b(John)f(Whale)n(y)-10 b(.)111 b(The)55 b(jalapeno)g(dynamic)g
(optimizing)d(compiler)j(for)f(ja)m(v)l(a.)111 b(In)55
b Fc(J)-5 b(ava)332 8326 y(Gr)n(ande)p Fs(,)37 b(pages)h(129\226141,)d
(1999.)75 8593 y([9])82 b(G.)39 b(J.)h(Chaitin.)58 b(Re)n(gister)38
b(allocation)g(and)h(spilling)d(via)j(graph)g(coloring.)58
b(In)38 b Fc(Pr)-7 b(oc.)41 b(SIGPLAN)e(`82)f(Symposium)g(on)g
(Compiler)g(Construc-)332 8794 y(tion)p Fs(,)e(June)i(1982.)0
9062 y([10])82 b(R.)37 b(Cohn,)g(D.)h(Goodwin,)d(P)-17
b(.)39 b(Lo)l(wne)n(y)-10 b(,)37 b(and)h(N.)f(Rubin.)53
b(Spik)o(e:)45 b(An)37 b(optimizer)f(for)g(alpha/nt)g(e)n(x)n
(ecutables,)h(1997.)0 9329 y([11])82 b(IBM)37 b(Corporation.)51
b(Xl)37 b(fortran:)44 b(Eight)37 b(w)o(ays)f(to)h(boost)f(performance.)
55 b(White)36 b(P)n(aper)-6 b(,)38 b(2000.)0 9596 y([12])82
b(K)l(emal)38 b(Ebcioglu)e(and)h(Erik)g(R.)g(Altman.)54
b(D)-6 b(AISY:)36 b(Dynamic)h(compilation)f(for)g(100)16
b(In)37 b Fc(ISCA)p Fs(,)g(pages)h(26\22637,)e(1997.)0
9864 y([13])82 b(Mary)36 b(F)-12 b(.)38 b(Fern)1120 9863
y(\264)1112 9864 y(andez.)53 b(Simple)36 b(and)h(ef)l(fecti)l(v)n(e)f
(link-time)f(optimization)f(of)j(Modula-3)e(programs.)52
b Fc(A)l(CM)37 b(SIGPLAN)f(Notices)p Fs(,)h(30\(6\):103\226)332
10064 y(115,)g(1995.)0 10332 y([14])82 b(J.)38 b(Fisher)-8
b(.)53 b(T)-5 b(race)39 b(scheduling:)44 b(A)37 b(general)g(technique)g
(for)f(global)g(microcode)h(compaction,)g(1981.)0 10599
y([15])82 b(C.W)-14 b(.)51 b(Fraser)-6 b(,)53 b(R.R.)d(Henry)-10
b(,)53 b(and)d(T)-11 b(.A.)51 b(Proebsting.)92 b(B)o(URG)49
b(-)g(f)o(ast)g(optimal)g(instruction)e(selection)i(and)h(tree)f
(parsing.)94 b Fc(A)l(CM)49 b(Sigplan)332 10800 y(Notices)p
Fs(,)37 b(27\(4\):68\22676,)e(April)g(1992.)3817 11160
y Fq(19)p eop
%%Page: 20 20
20 19 bop 0 166 a Fs([16])82 b(D.)38 b(Grisw)o(old.)51
b(The)38 b(ja)m(v)l(a)g(hotspot)d(virtual)h(machine)h(architecture,)h
(1998.)0 433 y([17])82 b(T)-11 b(.)38 b(Halfhill.)52
b(T)-5 b(ransmeta)38 b(breaks)f(x86)g(lo)l(w-po)l(wer)f(barrier)-6
b(,)37 b(2000.)0 701 y([18])82 b(E.)41 b(A)-14 b(yguad)969
700 y(\264)961 701 y(e)40 b(J.)i(Llosa,)f(A.)g(Gonz)2132
700 y(\264)2124 701 y(alez)g(and)f(M.)h(V)-17 b(alero.)64
b(Swing)40 b(modulo)f(scheduling:)51 b(A)40 b(lifetime-sensiti)l(v)n(e)
f(approach.)64 b(In)40 b Fc(Pr)-7 b(oceedings)332 902
y(of)37 b(International)d(Confer)-6 b(ence)37 b(on)g(P)-12
b(ar)n(allel)36 b(Ar)-6 b(c)n(hitectur)g(es)38 b(and)f(Compilation)d(T)
-14 b(ec)n(hniques)p Fs(,)37 b(pages)h(80\22686,)e(October)h(1996.)0
1169 y([19])82 b(Chris)34 b(Lattner)-8 b(.)49 b(LL)-15
b(VM)36 b(Assembly)f(Language)g(Reference)h(Manual.)49
b Fh(http://llvm.cs.uiuc.edu/docs/L)o(ang)o(Ref)o(.ht)o(ml)p
Fs(,)332 1370 y(2002.)0 1637 y([20])82 b(Chris)48 b(Lattner)h(and)g(V)
-9 b(ikram)49 b(Adv)n(e.)91 b(Analysis)49 b(and)g(optimizations)e(for)h
(disjoint)f(data)i(structures.)91 b(In)49 b Fc(A)l(CM)g(SIGPLAN)g(W)-14
b(orkshop)50 b(on)332 1838 y(Memory)38 b(System)g(P)-12
b(erformance)37 b(\(MSP'02\))p Fs(,)g(June)g(2002.)0
2105 y([21])82 b(G.)42 b(Morrisett,)g(D.)h(W)-12 b(alk)o(er)-6
b(,)43 b(K.)f(Crary)-10 b(,)43 b(and)f(N.)h(Gle)l(w)-10
b(.)70 b(From)42 b(system)g(f)g(to)f(typed)g(assembly)i(language.)69
b Fc(25th)41 b(A)l(CM)h(SIGPLAN/SIGA)l(CT)332 2306 y(Symposium)36
b(on)h(Principles)g(of)f(Pr)-7 b(o)o(gr)n(amming)36 b(Langua)o(g)o(es)p
Fs(,)f(pages)j(85\22697,)e(January)h(1998.)0 2574 y([22])82
b(Ste)l(v)n(en)39 b(P)-17 b(.)40 b(Muchnick.)59 b Fc(Advanced)40
b(Compiler)e(Design)g(and)g(Implementation)p Fs(.)58
b(Mor)m(g)o(an)39 b(Kaufmann)g(Publishers,)f(340)h(Pine)g(Street,)g
(Sixth)332 2775 y(Floor)-6 b(,)37 b(San)g(Francisco,)h(CA)f
(94104-3205.,)e(1st)i(edition,)f(1997.)0 3042 y([23])82
b(R.)37 b(Muth.)53 b(Alto:)45 b(A)37 b(platform)f(for)h(object)f(code)i
(modi\002cation,)e(1999.)0 3309 y([24])82 b(Norman)39
b(Ramse)n(y)h(and)f(Simon)g(Pe)n(yton)f(Jones.)62 b(A)39
b(single)f(intermediate)h(language)g(that)g(supports)e(multiple)h
(implementations)g(of)h(e)n(xcep-)332 3510 y(tions.)53
b(In)37 b Fc(Pr)-7 b(oc.)38 b(SIGPLAN)f(2000)f(Confer)-6
b(ence)38 b(on)f(Pr)-7 b(o)o(gr)n(amming)35 b(Langua)o(g)o(e)h(Design)g
(and)h(Implementation)p Fs(,)e(June)i(2000.)0 3778 y([25])82
b(T)-11 b(.)37 b(Romer)-6 b(,)36 b(G.)h(V)-19 b(oelk)o(er)-6
b(,)35 b(D.)h(Lee,)i(A.)f(W)-12 b(olman,)36 b(W)-14 b(.)37
b(W)-12 b(ong,)36 b(H.)g(Le)l(vy)-10 b(,)38 b(B.)e(Bershad,)g(and)g(B.)
g(Chen.)51 b(Instrumentation)34 b(and)i(optimization)e(of)332
3978 y(win32/intel)g(e)n(x)n(ecutables)j(using)f(etch,)i(1997.)0
4246 y([26])82 b(Amitabh)56 b(Sri)l(v)l(asta)m(v)l(a)i(and)f(Da)m(vid)f
(W)-14 b(.)58 b(W)-12 b(all.)117 b(A)57 b(practical)g(system)h(for)e
(intermodule)f(code)j(optimization)d(at)i(link-time.)115
b Fc(J)l(ournal)57 b(of)332 4447 y(Pr)-7 b(o)o(gr)n(amming)35
b(Langua)o(g)o(es)p Fs(,)h(1\(1\):1\22618,)f(December)k(1992.)0
4714 y([27])82 b(Sun)37 b(Microsystems.)54 b(UltraSP)-14
b(ARC)2300 4660 y Fa(T)13 b(M)2525 4714 y Fs(IIi)36 b(Users)i(Manual,)f
(1999.)0 4981 y([28])82 b(Da)m(vid)58 b(Ung)o(ar)g(and)h(Randall)e(B.)i
(Smith.)122 b(Self:)88 b(The)59 b(po)l(wer)g(of)f(simplicity)-10
b(.)121 b(In)58 b(Norman)g(Me)n(yro)l(witz,)63 b(editor)-6
b(,)63 b Fc(Pr)-7 b(oceedings)59 b(of)f(the)332 5182
y(Confer)-6 b(ence)35 b(on)g(Object-Oriented)e(Pr)-7
b(o)o(gr)n(amming)33 b(Systems,)j(Langua)o(g)o(es,)e(and)g
(Applications)f(\(OOPSLA\))p Fs(,)i(v)m(olume)f(22,)h(pages)h
(227\226242,)332 5383 y(Ne)l(w)i(Y)-16 b(ork,)36 b(NY)-19
b(,)37 b(1987.)g(A)-6 b(CM)37 b(Press.)0 5651 y([29])82
b(D.)34 b(W)-12 b(all.)47 b(Global)33 b(re)n(gister)g(allocation)f(at)i
(link-time.)45 b(In)33 b Fc(Pr)-7 b(oc.)35 b(SIGPLAN)f('86)f(Symposium)
g(on)h(Compiler)e(Construction)p Fs(,)h(P)n(alo)g(Alto,)h(CA,)332
5851 y(1986.)3817 11160 y Fq(20)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
